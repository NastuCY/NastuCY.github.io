<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ä¸€åã€åˆæ ¼ã€‘å‰ç«¯å·¥ç¨‹å¸ˆçš„è‡ªæ£€æ¸…å•]]></title>
    <url>%2F2019%2F04%2F28%2F%E4%B8%80%E5%90%8D%E3%80%90%E5%90%88%E6%A0%BC%E3%80%91%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E8%87%AA%E6%A3%80%E6%B8%85%E5%8D%95%2F</url>
    <content type="text"><![CDATA[æ‘˜å½•è‡ªæŽ˜é‡‘åŽŸæ–‡é“¾æŽ¥ï¼šhttps://juejin.im/post/5cc1da82f265da036023b628?utm_source=gold_browser_extension å¼€ç¯‡å‰ç«¯å¼€å‘æ˜¯ä¸€ä¸ªéžå¸¸ç‰¹æ®Šçš„è¡Œä¸šï¼Œå®ƒçš„åŽ†å²å®žé™…ä¸Šä¸æ˜¯å¾ˆé•¿ï¼Œä½†æ˜¯çŸ¥è¯†ä¹‹ç¹æ‚ï¼ŒæŠ€æœ¯è¿­ä»£é€Ÿåº¦ä¹‹å¿«æ˜¯å…¶ä»–æŠ€æœ¯æ‰€ä¸èƒ½æ¯”æ‹Ÿçš„ã€‚ winteråœ¨ä»–çš„ã€Šé‡å­¦å‰ç«¯ã€‹è¯¾ç¨‹ä¸­æåˆ°ï¼š åˆ°çŽ°åœ¨ä¸ºæ­¢ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå·²ç»æˆä¸ºç ”å‘ä½“ç³»ä¸­çš„é‡è¦å²—ä½ä¹‹ä¸€ã€‚å¯æ˜¯ï¼Œä¸Žæ­¤ç›¸å¯¹çš„æ˜¯ï¼Œæˆ‘å‘çŽ°æžå°‘æˆ–è€…å‡ ä¹Žæ²¡æœ‰å¤§å­¦çš„è®¡ç®—æœºä¸“ä¸šæ„¿æ„å¼€è®¾å‰ç«¯è¯¾ç¨‹ï¼Œæ›´æ²¡æœ‰ç³»ç»Ÿæ€§çš„æ•™å­¦æ–¹æ¡ˆå‡ºçŽ°ã€‚å¤§éƒ¨åˆ†å‰ç«¯å·¥ç¨‹å¸ˆçš„çŸ¥è¯†ï¼Œå…¶å®žéƒ½æ˜¯æ¥è‡ªäºŽå®žè·µå’Œå·¥ä½œä¸­é›¶æ•£çš„å­¦ä¹ ã€‚ è¿™æ ·æ˜¯ä¸€ä¸ªéžå¸¸çœŸå®žçš„çŽ°çŠ¶ï¼Œå®žé™…ä¸Šå¾ˆå¤šå‰ç«¯å¼€å‘è€…éƒ½æ˜¯è‡ªå­¦ç”šè‡³è½¬è¡Œè¿‡æ¥çš„ï¼Œå‰ç«¯å…¥é—¨ç®€å•ï¼Œå­¦ä¹ äº†å‡ ä¸ªAPIä»¥åŽä¸Šæ‰‹åšé¡¹ç›®ä¹Ÿå¾ˆç®€å•ï¼Œä½†æ˜¯è¿™å¾€å¾€æˆä¸ºäº†é™åˆ¶è‡ªèº«å‘å±•çš„ç“¶é¢ˆã€‚åªæ˜¯åœç•™åœ¨ä¼šç”¨é˜¶æ®µæ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸æ–­æŽ¢ç´¢å’Œæ·±å…¥ã€‚çŽ°åœ¨å¸‚é¢ä¸Šå¹¶ä¸ç¼ºå°‘å­¦ä¹ æ•™ç¨‹ï¼ŒæŠ€æœ¯æ–‡ç« ï¼Œå¦‚æžœç›²ç›®çš„å­¦ä¹ ä½ ä¼šå‘çŽ°çœ‹è¿‡ä»¥åŽçš„çŸ¥è¯†ç•™å­˜çŽ‡ä¼šå¾ˆä½Žï¼Œè€Œä¸”å‘çŽ°æ²¡æœ‰äº†è§£åˆ°çš„çŸ¥è¯†è¶Šæ¥è¶Šå¤šï¼Œè¿™ä¼šè®©äººäº§ç”Ÿç„¦è™‘ã€‚å®žé™…ä¸Šï¼Œé™¤äº†åšæŒå­¦ä¹ çš„å¼ºå¤§çš„è‡ªé©±åŠ›ï¼Œä½ è¿˜éœ€è¦ä¸€ä¸ªå¾ˆç®€å•çš„å­¦ä¹ æ–¹æ³•ã€‚é‚£å°±æ˜¯ï¼šå»ºç«‹è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ã€‚å®ƒèƒ½å¸®åŠ©ä½ æ›´ç³»ç»Ÿæ€§çš„å­¦ä¹ ï¼ŒåŒæ—¶ä½ ä¹Ÿæ—¶åˆ»èƒ½çŸ¥é“è‡ªå·±å“ªäº›åœ°æ–¹æ˜¯ä¸è¶³çš„ã€‚ ä¸€ã€JavaScriptåŸºç¡€ å‰ç«¯å·¥ç¨‹å¸ˆåƒé¥­çš„å®¶ä¼™ï¼Œæ·±åº¦ã€å¹¿åº¦ä¸€æ ·éƒ½ä¸èƒ½å·®ã€‚ å˜é‡å’Œç±»åž‹ JavaScriptè§„å®šäº†å‡ ç§è¯­è¨€ç±»åž‹ JavaScriptå¯¹è±¡çš„åº•å±‚æ•°æ®ç»“æž„æ˜¯ä»€ä¹ˆ Symbolç±»åž‹åœ¨å®žé™…å¼€å‘ä¸­çš„åº”ç”¨ã€å¯æ‰‹åŠ¨å®žçŽ°ä¸€ä¸ªç®€å•çš„Symbol JavaScriptä¸­çš„å˜é‡åœ¨å†…å­˜ä¸­çš„å…·ä½“å­˜å‚¨å½¢å¼ åŸºæœ¬ç±»åž‹å¯¹åº”çš„å†…ç½®å¯¹è±¡ï¼Œä»¥åŠä»–ä»¬ä¹‹é—´çš„è£…ç®±æ‹†ç®±æ“ä½œ ç†è§£å€¼ç±»åž‹å’Œå¼•ç”¨ç±»åž‹ nullå’Œundefinedçš„åŒºåˆ« è‡³å°‘å¯ä»¥è¯´å‡ºä¸‰ç§åˆ¤æ–­JavaScriptæ•°æ®ç±»åž‹çš„æ–¹å¼ï¼Œä»¥åŠä»–ä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œå¦‚ä½•å‡†ç¡®çš„åˆ¤æ–­æ•°ç»„ç±»åž‹ å¯èƒ½å‘ç”Ÿéšå¼ç±»åž‹è½¬æ¢çš„åœºæ™¯ä»¥åŠè½¬æ¢åŽŸåˆ™ï¼Œåº”å¦‚ä½•é¿å…æˆ–å·§å¦™åº”ç”¨ å‡ºçŽ°å°æ•°ç²¾åº¦ä¸¢å¤±çš„åŽŸå› ï¼ŒJavaScriptå¯ä»¥å­˜å‚¨çš„æœ€å¤§æ•°å­—ã€æœ€å¤§å®‰å…¨æ•°å­—ï¼ŒJavaScriptå¤„ç†å¤§æ•°å­—çš„æ–¹æ³•ã€é¿å…ç²¾åº¦ä¸¢å¤±çš„æ–¹æ³• åŽŸåž‹å’ŒåŽŸåž‹é“¾ ç†è§£åŽŸåž‹è®¾è®¡æ¨¡å¼ä»¥åŠJavaScriptä¸­çš„åŽŸåž‹è§„åˆ™ instanceofçš„åº•å±‚å®žçŽ°åŽŸç†ï¼Œæ‰‹åŠ¨å®žçŽ°ä¸€ä¸ªinstanceof å®žçŽ°ç»§æ‰¿çš„å‡ ç§æ–¹å¼ä»¥åŠä»–ä»¬çš„ä¼˜ç¼ºç‚¹ è‡³å°‘è¯´å‡ºä¸€ç§å¼€æºé¡¹ç›®(å¦‚Node)ä¸­åº”ç”¨åŽŸåž‹ç»§æ‰¿çš„æ¡ˆä¾‹ å¯ä»¥æè¿°newä¸€ä¸ªå¯¹è±¡çš„è¯¦ç»†è¿‡ç¨‹ï¼Œæ‰‹åŠ¨å®žçŽ°ä¸€ä¸ªnewæ“ä½œç¬¦ ç†è§£es6 classæž„é€ ä»¥åŠç»§æ‰¿çš„åº•å±‚å®žçŽ°åŽŸç† ä½œç”¨åŸŸå’Œé—­åŒ… ç†è§£è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ ç†è§£JavaScriptçš„ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾ ç†è§£JavaScriptçš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå¯ä»¥åº”ç”¨å †æ ˆä¿¡æ¯å¿«é€Ÿå®šä½é—®é¢˜ thisçš„åŽŸç†ä»¥åŠå‡ ç§ä¸åŒä½¿ç”¨åœºæ™¯çš„å–å€¼ é—­åŒ…çš„å®žçŽ°åŽŸç†å’Œä½œç”¨ï¼Œå¯ä»¥åˆ—ä¸¾å‡ ä¸ªå¼€å‘ä¸­é—­åŒ…çš„å®žé™…åº”ç”¨ ç†è§£å †æ ˆæº¢å‡ºå’Œå†…å­˜æ³„æ¼çš„åŽŸç†ï¼Œå¦‚ä½•é˜²æ­¢ å¦‚ä½•å¤„ç†å¾ªçŽ¯çš„å¼‚æ­¥æ“ä½œ ç†è§£æ¨¡å—åŒ–è§£å†³çš„å®žé™…é—®é¢˜ï¼Œå¯åˆ—ä¸¾å‡ ä¸ªæ¨¡å—åŒ–æ–¹æ¡ˆå¹¶ç†è§£å…¶ä¸­åŽŸç† æ‰§è¡Œæœºåˆ¶ ä¸ºä½•tryé‡Œé¢æ”¾returnï¼Œfinallyè¿˜ä¼šæ‰§è¡Œï¼Œç†è§£å…¶å†…éƒ¨æœºåˆ¶ JavaScriptå¦‚ä½•å®žçŽ°å¼‚æ­¥ç¼–ç¨‹ï¼Œå¯ä»¥è¯¦ç»†æè¿°EventLoopæœºåˆ¶ å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡åˆ†åˆ«æœ‰å“ªäº› å¯ä»¥å¿«é€Ÿåˆ†æžä¸€ä¸ªå¤æ‚çš„å¼‚æ­¥åµŒå¥—é€»è¾‘ï¼Œå¹¶æŽŒæ¡åˆ†æžæ–¹æ³• ä½¿ç”¨Promiseå®žçŽ°ä¸²è¡Œ Nodeä¸Žæµè§ˆå™¨EventLoopçš„å·®å¼‚ å¦‚ä½•åœ¨ä¿è¯é¡µé¢è¿è¡Œæµç•…çš„æƒ…å†µä¸‹å¤„ç†æµ·é‡æ•°æ® è¯­æ³•å’ŒAPI ç†è§£ECMAScriptå’ŒJavaScriptçš„å…³ç³» ç†Ÿç»ƒè¿ç”¨es5ã€es6æä¾›çš„è¯­æ³•è§„èŒƒï¼Œ ç†Ÿç»ƒæŽŒæ¡JavaScriptæä¾›çš„å…¨å±€å¯¹è±¡ï¼ˆä¾‹å¦‚Dateã€Mathï¼‰ã€å…¨å±€å‡½æ•°ï¼ˆä¾‹å¦‚decodeURIã€isNaNï¼‰ã€å…¨å±€å±žæ€§ï¼ˆä¾‹å¦‚Infinityã€undefinedï¼‰ ç†Ÿç»ƒåº”ç”¨mapã€reduceã€filter ç­‰é«˜é˜¶å‡½æ•°è§£å†³é—®é¢˜ setIntervaléœ€è¦æ³¨æ„çš„ç‚¹ï¼Œä½¿ç”¨settimeoutå®žçŽ°setInterval JavaScriptæä¾›çš„æ­£åˆ™è¡¨è¾¾å¼APIã€å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ˆé‚®ç®±æ ¡éªŒã€URLè§£æžã€åŽ»é‡ç­‰ï¼‰è§£å†³å¸¸è§é—®é¢˜ JavaScriptå¼‚å¸¸å¤„ç†çš„æ–¹å¼ï¼Œç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æ–¹æ¡ˆ äºŒã€HTMLå’ŒCSSHTML ä»Žè§„èŒƒçš„è§’åº¦ç†è§£HTMLï¼Œä»Žåˆ†ç±»å’Œè¯­ä¹‰çš„è§’åº¦ä½¿ç”¨æ ‡ç­¾ å¸¸ç”¨é¡µé¢æ ‡ç­¾çš„é»˜è®¤æ ·å¼ã€è‡ªå¸¦å±žæ€§ã€ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ã€å¤„ç†æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„æ–¹å¼ å…ƒä¿¡æ¯ç±»æ ‡ç­¾(headã€titleã€meta)çš„ä½¿ç”¨ç›®çš„å’Œé…ç½®æ–¹æ³• HTML5ç¦»çº¿ç¼“å­˜åŽŸç† å¯ä»¥ä½¿ç”¨Canvas APIã€SVGç­‰ç»˜åˆ¶é«˜æ€§èƒ½çš„åŠ¨ç”» CSS CSSç›’æ¨¡åž‹ï¼Œåœ¨ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ CSSæ‰€æœ‰é€‰æ‹©å™¨åŠå…¶ä¼˜å…ˆçº§ã€ä½¿ç”¨åœºæ™¯ï¼Œå“ªäº›å¯ä»¥ç»§æ‰¿ï¼Œå¦‚ä½•è¿ç”¨atè§„åˆ™ CSSä¼ªç±»å’Œä¼ªå…ƒç´ æœ‰å“ªäº›ï¼Œå®ƒä»¬çš„åŒºåˆ«å’Œå®žé™…åº”ç”¨ HTMLæ–‡æ¡£æµçš„æŽ’ç‰ˆè§„åˆ™ï¼ŒCSSå‡ ç§å®šä½çš„è§„åˆ™ã€å®šä½å‚ç…§ç‰©ã€å¯¹æ–‡æ¡£æµçš„å½±å“ï¼Œå¦‚ä½•é€‰æ‹©æœ€å¥½çš„å®šä½æ–¹å¼ï¼Œé›ªç¢§å›¾å®žçŽ°åŽŸç† æ°´å¹³åž‚ç›´å±…ä¸­çš„æ–¹æ¡ˆã€å¯ä»¥å®žçŽ°6ç§ä»¥ä¸Šå¹¶å¯¹æ¯”å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ BFCå®žçŽ°åŽŸç†ï¼Œå¯ä»¥è§£å†³çš„é—®é¢˜ï¼Œå¦‚ä½•åˆ›å»ºBFC å¯ä½¿ç”¨CSSå‡½æ•°å¤ç”¨ä»£ç ï¼Œå®žçŽ°ç‰¹æ®Šæ•ˆæžœ PostCSSã€Sassã€Lessçš„å¼‚åŒï¼Œä»¥åŠä½¿ç”¨é…ç½®ï¼Œè‡³å°‘æŽŒæ¡ä¸€ç§ CSSæ¨¡å—åŒ–æ–¹æ¡ˆã€å¦‚ä½•é…ç½®æŒ‰éœ€åŠ è½½ã€å¦‚ä½•é˜²æ­¢CSSé˜»å¡žæ¸²æŸ“ ç†Ÿç»ƒä½¿ç”¨CSSå®žçŽ°å¸¸è§åŠ¨ç”»ï¼Œå¦‚æ¸å˜ã€ç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰ç­‰ CSSæµè§ˆå™¨å…¼å®¹æ€§å†™æ³•ï¼Œäº†è§£ä¸åŒAPIåœ¨ä¸åŒæµè§ˆå™¨ä¸‹çš„å…¼å®¹æ€§æƒ…å†µ æŽŒæ¡ä¸€å¥—å®Œæ•´çš„å“åº”å¼å¸ƒå±€æ–¹æ¡ˆ æ‰‹å†™ æ‰‹å†™å›¾ç‰‡ç€‘å¸ƒæµæ•ˆæžœ ä½¿ç”¨CSSç»˜åˆ¶å‡ ä½•å›¾å½¢ï¼ˆåœ†å½¢ã€ä¸‰è§’å½¢ã€æ‰‡å½¢ã€è±å½¢ç­‰ï¼‰ ä½¿ç”¨çº¯CSSå®žçŽ°æ›²çº¿è¿åŠ¨ï¼ˆè´å¡žå°”æ›²çº¿ï¼‰ å®žçŽ°å¸¸ç”¨å¸ƒå±€ï¼ˆä¸‰æ ã€åœ£æ¯ã€åŒé£žç¿¼ã€å¸é¡¶ï¼‰ï¼Œå¯æ˜¯è¯´å‡ºå¤šç§æ–¹å¼å¹¶ç†è§£å…¶ä¼˜ç¼ºç‚¹ ä¸‰ã€è®¡ç®—æœºåŸºç¡€ å…³äºŽç¼–è¯‘åŽŸç†ï¼Œä¸éœ€è¦ç†è§£éžå¸¸æ·±å…¥ï¼Œä½†æ˜¯æœ€åŸºæœ¬çš„åŽŸç†å’Œæ¦‚å¿µä¸€å®šè¦æ‡‚ï¼Œè¿™å¯¹äºŽå­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€éžå¸¸é‡è¦ ç¼–è¯‘åŽŸç† ç†è§£ä»£ç åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œè®¡ç®—æœºå¦‚ä½•å°†ä»£ç è½¬æ¢ä¸ºå¯ä»¥è¿è¡Œçš„ç›®æ ‡ç¨‹åº æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…åŽŸç†å’Œæ€§èƒ½ä¼˜åŒ– å¦‚ä½•å°†JavaScriptä»£ç è§£æžæˆæŠ½è±¡è¯­æ³•æ ‘(AST) base64çš„ç¼–ç åŽŸç† å‡ ç§è¿›åˆ¶çš„ç›¸äº’è½¬æ¢è®¡ç®—æ–¹æ³•ï¼Œåœ¨JavaScriptä¸­å¦‚ä½•è¡¨ç¤ºå’Œè½¬æ¢ ç½‘ç»œåè®® ç†è§£ä»€ä¹ˆæ˜¯åè®®ï¼Œäº†è§£TCP/IPç½‘ç»œåè®®æ—çš„æž„æˆï¼Œæ¯å±‚åè®®åœ¨åº”ç”¨ç¨‹åºä¸­å‘æŒ¥çš„ä½œç”¨ ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹è¯¦ç»†åŽŸç†ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ç§æœºåˆ¶ æœ‰å“ªäº›åè®®æ˜¯å¯é ï¼ŒTCPæœ‰å“ªäº›æ‰‹æ®µä¿è¯å¯é äº¤ä»˜ DNSçš„ä½œç”¨ã€DNSè§£æžçš„è¯¦ç»†è¿‡ç¨‹ï¼ŒDNSä¼˜åŒ–åŽŸç† CDNçš„ä½œç”¨å’ŒåŽŸç† HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡çš„å…·ä½“ç»„æˆï¼Œèƒ½ç†è§£å¸¸è§è¯·æ±‚å¤´çš„å«ä¹‰ï¼Œæœ‰å‡ ç§è¯·æ±‚æ–¹å¼ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆ HTTPæ‰€æœ‰çŠ¶æ€ç çš„å…·ä½“å«ä¹‰ï¼Œçœ‹åˆ°å¼‚å¸¸çŠ¶æ€ç èƒ½å¿«é€Ÿå®šä½é—®é¢˜ HTTP1.1ã€HTTP2.0å¸¦æ¥çš„æ”¹å˜ HTTPSçš„åŠ å¯†åŽŸç†ï¼Œå¦‚ä½•å¼€å¯HTTPSï¼Œå¦‚ä½•åŠ«æŒHTTPSè¯·æ±‚ ç†è§£WebSocketåè®®çš„åº•å±‚åŽŸç†ã€ä¸ŽHTTPçš„åŒºåˆ« è®¾è®¡æ¨¡å¼ ç†Ÿç»ƒä½¿ç”¨å‰ç«¯å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ç¼–å†™ä»£ç ï¼Œå¦‚å•ä¾‹æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ç­‰ å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„å¼‚åŒä»¥åŠå®žé™…åº”ç”¨ å¯ä»¥è¯´å‡ºå‡ ç§è®¾è®¡æ¨¡å¼åœ¨å¼€å‘ä¸­çš„å®žé™…åº”ç”¨ï¼Œç†è§£æ¡†æž¶æºç ä¸­å¯¹è®¾è®¡æ¨¡å¼çš„åº”ç”¨ å››ã€æ•°æ®ç»“æž„å’Œç®—æ³• æ®æˆ‘äº†è§£çš„å¤§éƒ¨åˆ†å‰ç«¯å¯¹è¿™éƒ¨åˆ†çŸ¥è¯†æœ‰äº›æ¬ ç¼ºï¼Œç”šè‡³æŠµè§¦ï¼Œä½†æ˜¯ï¼Œå¦‚æžœçªç ´æ›´é«˜çš„å¤©èŠ±æ¿ï¼Œè¿™éƒ¨åˆ†çŸ¥è¯†æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè€Œä¸”æˆ‘äº²èº«ç»åŽ†â€”â€”éžå¸¸æœ‰ç”¨ï¼ JavaScriptç¼–ç èƒ½åŠ› å¤šç§æ–¹å¼å®žçŽ°æ•°ç»„åŽ»é‡ã€æ‰å¹³åŒ–ã€å¯¹æ¯”ä¼˜ç¼ºç‚¹ å¤šç§æ–¹å¼å®žçŽ°æ·±æ‹·è´ã€å¯¹æ¯”ä¼˜ç¼ºç‚¹ æ‰‹å†™å‡½æ•°æŸ¯é‡ŒåŒ–å·¥å…·å‡½æ•°ã€å¹¶ç†è§£å…¶åº”ç”¨åœºæ™¯å’Œä¼˜åŠ¿ æ‰‹å†™é˜²æŠ–å’ŒèŠ‚æµå·¥å…·å‡½æ•°ã€å¹¶ç†è§£å…¶å†…éƒ¨åŽŸç†å’Œåº”ç”¨åœºæ™¯ å®žçŽ°ä¸€ä¸ªsleepå‡½æ•° æ‰‹åŠ¨å®žçŽ°å‰ç«¯è½®å­ æ‰‹åŠ¨å®žçŽ°callã€applyã€bind æ‰‹åŠ¨å®žçŽ°ç¬¦åˆPromise/A+è§„èŒƒçš„Promiseã€æ‰‹åŠ¨å®žçŽ°async await æ‰‹å†™ä¸€ä¸ªEventEmitterå®žçŽ°äº‹ä»¶å‘å¸ƒã€è®¢é˜… å¯ä»¥è¯´å‡ºä¸¤ç§å®žçŽ°åŒå‘ç»‘å®šçš„æ–¹æ¡ˆã€å¯ä»¥æ‰‹åŠ¨å®žçŽ° æ‰‹å†™JSON.stringifyã€JSON.parse æ‰‹å†™ä¸€ä¸ªæ¨¡ç‰ˆå¼•æ“Žï¼Œå¹¶èƒ½è§£é‡Šå…¶ä¸­åŽŸç† æ‰‹å†™æ‡’åŠ è½½ã€ä¸‹æ‹‰åˆ·æ–°ã€ä¸Šæ‹‰åŠ è½½ã€é¢„åŠ è½½ç­‰æ•ˆæžœ æ•°æ®ç»“æž„ ç†è§£å¸¸è§æ•°æ®ç»“æž„çš„ç‰¹ç‚¹ï¼Œä»¥åŠä»–ä»¬åœ¨ä¸åŒåœºæ™¯ä¸‹ä½¿ç”¨çš„ä¼˜ç¼ºç‚¹ ç†è§£æ•°ç»„ã€å­—ç¬¦ä¸²çš„å­˜å‚¨åŽŸç†ï¼Œå¹¶ç†Ÿç»ƒåº”ç”¨ä»–ä»¬è§£å†³é—®é¢˜ ç†è§£äºŒå‰æ ‘ã€æ ˆã€é˜Ÿåˆ—ã€å“ˆå¸Œè¡¨çš„åŸºæœ¬ç»“æž„å’Œç‰¹ç‚¹ï¼Œå¹¶å¯ä»¥åº”ç”¨å®ƒè§£å†³é—®é¢˜ äº†è§£å›¾ã€å †çš„åŸºæœ¬ç»“æž„å’Œä½¿ç”¨åœºæ™¯ ç®—æ³• å¯è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œå¯ä¼°è®¡ä¸šåŠ¡é€»è¾‘ä»£ç çš„è€—æ—¶å’Œå†…å­˜æ¶ˆè€— è‡³å°‘ç†è§£äº”ç§æŽ’åºç®—æ³•çš„å®žçŽ°åŽŸç†ã€åº”ç”¨åœºæ™¯ã€ä¼˜ç¼ºç‚¹ï¼Œå¯å¿«é€Ÿè¯´å‡ºæ—¶é—´ã€ç©ºé—´å¤æ‚åº¦ äº†è§£é€’å½’å’Œå¾ªçŽ¯çš„ä¼˜ç¼ºç‚¹ã€åº”ç”¨åœºæ™¯ã€å¹¶å¯åœ¨å¼€å‘ä¸­ç†Ÿç»ƒåº”ç”¨ å¯åº”ç”¨å›žæº¯ç®—æ³•ã€è´ªå¿ƒç®—æ³•ã€åˆ†æ²»ç®—æ³•ã€åŠ¨æ€è§„åˆ’ç­‰è§£å†³å¤æ‚é—®é¢˜ å‰ç«¯å¤„ç†æµ·é‡æ•°æ®çš„ç®—æ³•æ–¹æ¡ˆ äº”ã€è¿è¡ŒçŽ¯å¢ƒæˆ‘ä»¬éœ€è¦ç†æ¸…è¯­è¨€å’ŒçŽ¯å¢ƒçš„å…³ç³»ï¼š ECMAScriptæè¿°äº†JavaScriptè¯­è¨€çš„è¯­æ³•å’ŒåŸºæœ¬å¯¹è±¡è§„èŒƒ æµè§ˆå™¨ä½œä¸ºJavaScriptçš„ä¸€ç§è¿è¡ŒçŽ¯å¢ƒï¼Œä¸ºå®ƒæä¾›äº†ï¼šæ–‡æ¡£å¯¹è±¡æ¨¡åž‹ï¼ˆDOMï¼‰ï¼Œæè¿°å¤„ç†ç½‘é¡µå†…å®¹çš„æ–¹æ³•å’ŒæŽ¥å£ã€æµè§ˆå™¨å¯¹è±¡æ¨¡åž‹ï¼ˆBOMï¼‰ï¼Œæè¿°ä¸Žæµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ–¹æ³•å’ŒæŽ¥å£ Nodeä¹Ÿæ˜¯JavaScriptçš„ä¸€ç§è¿è¡ŒçŽ¯å¢ƒï¼Œä¸ºå®ƒæä¾›äº†æ“ä½œI/Oã€ç½‘ç»œç­‰API æµè§ˆå™¨API æµè§ˆå™¨æä¾›çš„ç¬¦åˆW3Cæ ‡å‡†çš„DOMæ“ä½œAPIã€æµè§ˆå™¨å·®å¼‚ã€å…¼å®¹æ€§ æµè§ˆå™¨æä¾›çš„æµè§ˆå™¨å¯¹è±¡æ¨¡åž‹ (BOM)æä¾›çš„æ‰€æœ‰å…¨å±€APIã€æµè§ˆå™¨å·®å¼‚ã€å…¼å®¹æ€§ å¤§é‡DOMæ“ä½œã€æµ·é‡æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–(åˆå¹¶æ“ä½œã€Diffã€requestAnimationFrameç­‰) æµè§ˆå™¨æµ·é‡æ•°æ®å­˜å‚¨ã€æ“ä½œæ€§èƒ½ä¼˜åŒ– DOMäº‹ä»¶æµçš„å…·ä½“å®žçŽ°æœºåˆ¶ã€ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ã€äº‹ä»¶ä»£ç† å‰ç«¯å‘èµ·ç½‘ç»œè¯·æ±‚çš„å‡ ç§æ–¹å¼åŠå…¶åº•å±‚å®žçŽ°ã€å¯ä»¥æ‰‹å†™åŽŸç”Ÿajaxã€fetchã€å¯ä»¥ç†Ÿç»ƒä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œå¦‚ä½•é¿å…åŒæºç­–ç•¥ï¼Œå‡ ç§æ–¹å¼çš„å¼‚åŒç‚¹ä»¥åŠå¦‚ä½•é€‰åž‹ æµè§ˆå™¨æä¾›çš„å‡ ç§å­˜å‚¨æœºåˆ¶ã€ä¼˜ç¼ºç‚¹ã€å¼€å‘ä¸­æ­£ç¡®çš„é€‰æ‹© æµè§ˆå™¨è·¨æ ‡ç­¾é€šä¿¡ æµè§ˆå™¨åŽŸç† å„æµè§ˆå™¨ä½¿ç”¨çš„JavaScriptå¼•æ“Žä»¥åŠå®ƒä»¬çš„å¼‚åŒç‚¹ã€å¦‚ä½•åœ¨ä»£ç ä¸­è¿›è¡ŒåŒºåˆ† è¯·æ±‚æ•°æ®åˆ°è¯·æ±‚ç»“æŸä¸ŽæœåŠ¡å™¨è¿›è¡Œäº†å‡ æ¬¡äº¤äº’ å¯è¯¦ç»†æè¿°æµè§ˆå™¨ä»Žè¾“å…¥URLåˆ°é¡µé¢å±•çŽ°çš„è¯¦ç»†è¿‡ç¨‹ æµè§ˆå™¨è§£æžHTMLä»£ç çš„åŽŸç†ï¼Œä»¥åŠæž„å»ºDOMæ ‘çš„æµç¨‹ æµè§ˆå™¨å¦‚ä½•è§£æžCSSè§„åˆ™ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°DOMæ ‘ä¸Š æµè§ˆå™¨å¦‚ä½•å°†è§£æžå¥½çš„å¸¦æœ‰æ ·å¼çš„DOMæ ‘è¿›è¡Œç»˜åˆ¶ æµè§ˆå™¨çš„è¿è¡Œæœºåˆ¶ï¼Œå¦‚ä½•é…ç½®èµ„æºå¼‚æ­¥åŒæ­¥åŠ è½½ æµè§ˆå™¨å›žæµä¸Žé‡ç»˜çš„åº•å±‚åŽŸç†ï¼Œå¼•å‘åŽŸå› ï¼Œå¦‚ä½•æœ‰æ•ˆé¿å… æµè§ˆå™¨çš„åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼Œå¦‚ä½•é¿å…å†…å­˜æ³„æ¼ æµè§ˆå™¨é‡‡ç”¨çš„ç¼“å­˜æ–¹æ¡ˆï¼Œå¦‚ä½•é€‰æ‹©å’ŒæŽ§åˆ¶åˆé€‚çš„ç¼“å­˜æ–¹æ¡ˆ Node ç†è§£Nodeåœ¨åº”ç”¨ç¨‹åºä¸­çš„ä½œç”¨ï¼Œå¯ä»¥ä½¿ç”¨Nodeæ­å»ºå‰ç«¯è¿è¡ŒçŽ¯å¢ƒã€ä½¿ç”¨Nodeæ“ä½œæ–‡ä»¶ã€æ“ä½œæ•°æ®åº“ç­‰ç­‰ æŽŒæ¡ä¸€ç§Nodeå¼€å‘æ¡†æž¶ï¼Œå¦‚Expressï¼ŒExpresså’ŒKoaçš„åŒºåˆ« ç†Ÿç»ƒä½¿ç”¨Nodeæä¾›çš„APIå¦‚Pathã€Httpã€Child Processç­‰å¹¶ç†è§£å…¶å®žçŽ°åŽŸç† Nodeçš„åº•å±‚è¿è¡ŒåŽŸç†ã€å’Œæµè§ˆå™¨çš„å¼‚åŒ Nodeäº‹ä»¶é©±åŠ¨ã€éžé˜»å¡žæœºåˆ¶çš„å®žçŽ°åŽŸç† å…­ã€æ¡†æž¶å’Œç±»åº“ è½®å­å±‚å‡ºä¸ç©·ï¼Œä»ŽåŽŸç†ä¸Šç†è§£æ‰æ˜¯æ­£é“ TypeScript ç†è§£æ³›åž‹ã€æŽ¥å£ç­‰é¢å‘å¯¹è±¡çš„ç›¸å…³æ¦‚å¿µï¼ŒTypeScriptå¯¹é¢å‘å¯¹è±¡ç†å¿µçš„å®žçŽ° ç†è§£ä½¿ç”¨TypeScriptçš„å¥½å¤„ï¼ŒæŽŒæ¡TypeScriptåŸºç¡€è¯­æ³• TypeScriptçš„è§„åˆ™æ£€æµ‹åŽŸç† å¯ä»¥åœ¨Reactã€Vueç­‰æ¡†æž¶ä¸­ä½¿ç”¨TypeScriptè¿›è¡Œå¼€å‘ React Reactå’Œvueé€‰åž‹å’Œä¼˜ç¼ºç‚¹ã€æ ¸å¿ƒæž¶æž„çš„åŒºåˆ« Reactä¸­setStateçš„æ‰§è¡Œæœºåˆ¶ï¼Œå¦‚ä½•æœ‰æ•ˆçš„ç®¡ç†çŠ¶æ€ Reactçš„äº‹ä»¶åº•å±‚å®žçŽ°æœºåˆ¶ Reactçš„è™šæ‹ŸDOMå’ŒDiffç®—æ³•çš„å†…éƒ¨å®žçŽ° Reactçš„Fiberå·¥ä½œåŽŸç†ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ React Routerå’ŒVue Routerçš„åº•å±‚å®žçŽ°åŽŸç†ã€åŠ¨æ€åŠ è½½å®žçŽ°åŽŸç† å¯ç†Ÿç»ƒåº”ç”¨React APIã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œå¯åº”ç”¨HOCã€render propsã€Hooksç­‰é«˜é˜¶ç”¨æ³•è§£å†³é—®é¢˜ åŸºäºŽReactçš„ç‰¹æ€§å’ŒåŽŸç†ï¼Œå¯ä»¥æ‰‹åŠ¨å®žçŽ°ä¸€ä¸ªç®€å•çš„React Vue ç†Ÿç»ƒä½¿ç”¨Vueçš„APIã€ç”Ÿå‘½å‘¨æœŸã€é’©å­å‡½æ•° MVVMæ¡†æž¶è®¾è®¡ç†å¿µ VueåŒå‘ç»‘å®šå®žçŽ°åŽŸç†ã€Diffç®—æ³•çš„å†…éƒ¨å®žçŽ° Vueçš„äº‹ä»¶æœºåˆ¶ ä»Žtemplateè½¬æ¢æˆçœŸå®žDOMçš„å®žçŽ°æœºåˆ¶ å¤šç«¯å¼€å‘ å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰çš„åŽŸç†å’Œä¼˜ç¼ºç‚¹ï¼ŒæŽŒæ¡ä¸€ç§å¿«é€Ÿå¼€å‘SPAçš„æ–¹æ¡ˆ ç†è§£Viewportã€emã€remçš„åŽŸç†å’Œç”¨æ³•ï¼Œåˆ†è¾¨çŽ‡ã€pxã€ppiã€dpiã€dpçš„åŒºåˆ«å’Œå®žé™…åº”ç”¨ ç§»åŠ¨ç«¯é¡µé¢é€‚é…è§£å†³æ–¹æ¡ˆã€ä¸åŒæœºåž‹é€‚é…æ–¹æ¡ˆ æŽŒæ¡ä¸€ç§JavaScriptç§»åŠ¨å®¢æˆ·ç«¯å¼€å‘æŠ€æœ¯ï¼Œå¦‚React Nativeï¼šå¯ä»¥æ­å»ºReact Nativeå¼€å‘çŽ¯å¢ƒï¼Œç†Ÿç»ƒè¿›è¡Œå¼€å‘ï¼Œå¯ç†è§£React Nativeçš„è¿ä½œåŽŸç†ï¼Œä¸åŒç«¯é€‚é… æŽŒæ¡ä¸€ç§JavaScript PCå®¢æˆ·ç«¯å¼€å‘æŠ€æœ¯ï¼Œå¦‚Electronï¼šå¯æ­å»ºElectronå¼€å‘çŽ¯å¢ƒï¼Œç†Ÿç»ƒè¿›è¡Œå¼€å‘ï¼Œå¯ç†è§£Electronçš„è¿ä½œåŽŸç† æŽŒæ¡ä¸€ç§å°ç¨‹åºå¼€å‘æ¡†æž¶æˆ–åŽŸç”Ÿå°ç¨‹åºå¼€å‘ ç†è§£å¤šç«¯æ¡†æž¶çš„å†…éƒ¨å®žçŽ°åŽŸç†ï¼Œè‡³å°‘äº†è§£ä¸€ä¸ªå¤šç«¯æ¡†æž¶çš„ä½¿ç”¨ æ•°æ®æµç®¡ç† æŽŒæ¡Reactå’ŒVueä¼ ç»Ÿçš„è·¨ç»„ä»¶é€šä¿¡æ–¹æ¡ˆï¼Œå¯¹æ¯”é‡‡ç”¨æ•°æ®æµç®¡ç†æ¡†æž¶çš„å¼‚åŒ ç†Ÿç»ƒä½¿ç”¨Reduxç®¡ç†æ•°æ®æµï¼Œå¹¶ç†è§£å…¶å®žçŽ°åŽŸç†ï¼Œä¸­é—´ä»¶å®žçŽ°åŽŸç† ç†Ÿç»ƒä½¿ç”¨Mobxç®¡ç†æ•°æ®æµï¼Œå¹¶ç†è§£å…¶å®žçŽ°åŽŸç†ï¼Œç›¸æ¯”Reduxæœ‰ä»€ä¹ˆä¼˜åŠ¿ ç†Ÿç»ƒä½¿ç”¨Vuexç®¡ç†æ•°æ®æµï¼Œå¹¶ç†è§£å…¶å®žçŽ°åŽŸç† ä»¥ä¸Šæ•°æ®æµæ–¹æ¡ˆçš„å¼‚åŒå’Œä¼˜ç¼ºç‚¹ï¼Œä¸æƒ…å†µä¸‹çš„æŠ€æœ¯é€‰åž‹ å®žç”¨åº“ è‡³å°‘æŽŒæ¡ä¸€ç§UIç»„ä»¶æ¡†æž¶ï¼Œå¦‚antd designï¼Œç†è§£å…¶è®¾è®¡ç†å¿µã€åº•å±‚å®žçŽ° æŽŒæ¡ä¸€ç§å›¾è¡¨ç»˜åˆ¶æ¡†æž¶ï¼Œå¦‚Echartï¼Œç†è§£å…¶è®¾è®¡ç†å¿µã€åº•å±‚å®žçŽ°ï¼Œå¯ä»¥è‡ªå·±å®žçŽ°å›¾è¡¨ æŽŒæ¡ä¸€ç§GISå¼€å‘æ¡†æž¶ï¼Œå¦‚ç™¾åº¦åœ°å›¾API æŽŒæ¡ä¸€ç§å¯è§†åŒ–å¼€å‘æ¡†æž¶ï¼Œå¦‚Three.jsã€D3 å·¥å…·å‡½æ•°åº“ï¼Œå¦‚lodashã€underscoreã€momentç­‰ï¼Œç†è§£ä½¿ç”¨çš„å·¥å…·ç±»æˆ–å·¥å…·å‡½æ•°çš„å…·ä½“å®žçŽ°åŽŸç† å¼€å‘å’Œè°ƒè¯• ç†Ÿç»ƒä½¿ç”¨å„æµè§ˆå™¨æä¾›çš„è°ƒè¯•å·¥å…· ç†Ÿç»ƒä½¿ç”¨ä¸€ç§ä»£ç†å·¥å…·å®žçŽ°è¯·æ±‚ä»£ç†ã€æŠ“åŒ…ï¼Œå¦‚charls å¯ä»¥ä½¿ç”¨Androidã€IOSæ¨¡æ‹Ÿå™¨è¿›è¡Œè°ƒè¯•ï¼Œå¹¶æŽŒæ¡ä¸€ç§çœŸæœºè°ƒè¯•æ–¹æ¡ˆ äº†è§£Vueã€Reactç­‰æ¡†æž¶è°ƒè¯•å·¥å…·çš„ä½¿ç”¨ ä¸ƒã€å‰ç«¯å·¥ç¨‹ å‰ç«¯å·¥ç¨‹åŒ–ï¼šä»¥å·¥ç¨‹åŒ–æ–¹æ³•å’Œå·¥å…·æé«˜å¼€å‘ç”Ÿäº§æ•ˆçŽ‡ã€é™ä½Žç»´æŠ¤éš¾åº¦ é¡¹ç›®æž„å»º ç†è§£npmã€yarnä¾èµ–åŒ…ç®¡ç†çš„åŽŸç†ï¼Œä¸¤è€…çš„åŒºåˆ« å¯ä»¥ä½¿ç”¨npmè¿è¡Œè‡ªå®šä¹‰è„šæœ¬ ç†è§£Babelã€ESLintã€webpackç­‰å·¥å…·åœ¨é¡¹ç›®ä¸­æ‰¿æ‹…çš„ä½œç”¨ ESLintè§„åˆ™æ£€æµ‹åŽŸç†ï¼Œå¸¸ç”¨çš„ESLinté…ç½® Babelçš„æ ¸å¿ƒåŽŸç†ï¼Œå¯ä»¥è‡ªå·±ç¼–å†™ä¸€ä¸ªBabelæ’ä»¶ å¯ä»¥é…ç½®ä¸€ç§å‰ç«¯ä»£ç å…¼å®¹æ–¹æ¡ˆï¼Œå¦‚Polyfill Webpackçš„ç¼–è¯‘åŽŸç†ã€æž„å»ºæµç¨‹ã€çƒ­æ›´æ–°åŽŸç†ï¼Œchunkã€bundleå’Œmoduleçš„åŒºåˆ«å’Œåº”ç”¨ å¯ç†Ÿç»ƒé…ç½®å·²æœ‰çš„loaderså’Œpluginsè§£å†³é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±ç¼–å†™loaderså’Œplugins nginx æ­£å‘ä»£ç†ä¸Žåå‘ä»£ç†çš„ç‰¹ç‚¹å’Œå®žä¾‹ å¯æ‰‹åŠ¨æ­å»ºä¸€ä¸ªç®€å•çš„nginxæœåŠ¡å™¨ã€ ç†Ÿç»ƒåº”ç”¨å¸¸ç”¨çš„nginxå†…ç½®å˜é‡ï¼ŒæŽŒæ¡å¸¸ç”¨çš„åŒ¹é…è§„åˆ™å†™æ³• å¯ä»¥ç”¨nginxå®žçŽ°è¯·æ±‚è¿‡æ»¤ã€é…ç½®gzipã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œå¹¶èƒ½è§£é‡Šå…¶å†…éƒ¨åŽŸç† å¼€å‘æé€Ÿ ç†Ÿç»ƒæŽŒæ¡ä¸€ç§æŽ¥å£ç®¡ç†ã€æŽ¥å£mockå·¥å…·çš„ä½¿ç”¨ï¼Œå¦‚yapi æŽŒæ¡ä¸€ç§é«˜æ•ˆçš„æ—¥å¿—åŸ‹ç‚¹æ–¹æ¡ˆï¼Œå¯å¿«é€Ÿä½¿ç”¨æ—¥å¿—æŸ¥è¯¢å·¥å…·å®šä½çº¿ä¸Šé—®é¢˜ ç†è§£TDDä¸ŽBDDæ¨¡å¼ï¼Œè‡³å°‘ä¼šä½¿ç”¨ä¸€ç§å‰ç«¯å•å…ƒæµ‹è¯•æ¡†æž¶ ç‰ˆæœ¬æŽ§åˆ¶ ç†è§£Gitçš„æ ¸å¿ƒåŽŸç†ã€å·¥ä½œæµç¨‹ã€å’ŒSVNçš„åŒºåˆ« ç†Ÿç»ƒä½¿ç”¨å¸¸è§„çš„Gitå‘½ä»¤ã€git rebaseã€git stashç­‰è¿›é˜¶å‘½ä»¤ å¯ä»¥å¿«é€Ÿè§£å†³çº¿ä¸Šåˆ†æ”¯å›žæ»šã€çº¿ä¸Šåˆ†æ”¯é”™è¯¯åˆå¹¶ç­‰å¤æ‚é—®é¢˜ æŒç»­é›†æˆ ç†è§£CI/CDæŠ€æœ¯çš„æ„ä¹‰ï¼Œè‡³å°‘ç†Ÿç»ƒæŽŒæ¡ä¸€ç§CI/CDå·¥å…·çš„ä½¿ç”¨ï¼Œå¦‚Jenkins å¯ä»¥ç‹¬è‡ªå®Œæˆæž¶æž„è®¾è®¡ã€æŠ€æœ¯é€‰åž‹ã€çŽ¯å¢ƒæ­å»ºã€å…¨æµç¨‹å¼€å‘ã€éƒ¨ç½²ä¸Šçº¿ç­‰ä¸€å¥—å®Œæ•´çš„å¼€å‘æµç¨‹ï¼ˆåŒ…æ‹¬Webåº”ç”¨ã€ç§»åŠ¨å®¢æˆ·ç«¯åº”ç”¨ã€PCå®¢æˆ·ç«¯åº”ç”¨ã€å°ç¨‹åºã€H5ç­‰ç­‰ï¼‰ å…«ã€é¡¹ç›®å’Œä¸šåŠ¡åŽç«¯æŠ€èƒ½ äº†è§£åŽç«¯çš„å¼€å‘æ–¹å¼ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­çš„ä½œç”¨ï¼Œè‡³å°‘ä¼šä½¿ç”¨ä¸€ç§åŽç«¯è¯­è¨€ æŽŒæ¡æ•°æ®æœ€ç»ˆåœ¨æ•°æ®åº“ä¸­æ˜¯å¦‚ä½•è½åœ°å­˜å‚¨çš„ï¼Œèƒ½çœ‹æ‡‚è¡¨ç»“æž„è®¾è®¡ã€è¡¨ä¹‹é—´çš„å…³è”ï¼Œè‡³å°‘ä¼šä½¿ç”¨ä¸€ç§æ•°æ®åº“ æ€§èƒ½ä¼˜åŒ– äº†è§£å‰ç«¯æ€§èƒ½è¡¡é‡æŒ‡æ ‡ã€æ€§èƒ½ç›‘æŽ§è¦ç‚¹ï¼ŒæŽŒæ¡ä¸€ç§å‰ç«¯æ€§èƒ½ç›‘æŽ§æ–¹æ¡ˆ äº†è§£å¸¸è§çš„Webã€Appæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ SEOæŽ’åè§„åˆ™ã€SEOä¼˜åŒ–æ–¹æ¡ˆã€å‰åŽç«¯åˆ†ç¦»çš„SEO SSRå®žçŽ°æ–¹æ¡ˆã€ä¼˜ç¼ºç‚¹ã€åŠå…¶æ€§èƒ½ä¼˜åŒ– Webpackçš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ Canvasæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ Reactã€Vueç­‰æ¡†æž¶ä½¿ç”¨æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ å‰ç«¯å®‰å…¨ XSSæ”»å‡»çš„åŽŸç†ã€åˆ†ç±»ã€å…·ä½“æ¡ˆä¾‹ï¼Œå‰ç«¯å¦‚ä½•é˜²å¾¡ CSRFæ”»å‡»çš„åŽŸç†ã€å…·ä½“æ¡ˆä¾‹ï¼Œå‰ç«¯å¦‚ä½•é˜²å¾¡ HTTPåŠ«æŒã€é¡µé¢åŠ«æŒçš„åŽŸç†ã€é˜²å¾¡æŽªæ–½ ä¸šåŠ¡ç›¸å…³ èƒ½ç†è§£æ‰€å¼€å‘é¡¹ç›®çš„æ•´ä½“ä¸šåŠ¡å½¢æ€ã€ä¸šåŠ¡ç›®æ ‡ã€ä¸šåŠ¡æž¶æž„ï¼Œå¯ä»¥å¿«é€Ÿå®šä½çº¿ä¸Šä¸šåŠ¡é—®é¢˜ èƒ½ç†è§£æ‰€å¼€å‘é¡¹ç›®æ•´ä½“çš„æŠ€æœ¯æž¶æž„ã€èƒ½å¿«è¯»çš„æ ¹æ®æ–°éœ€æ±‚è¿›è¡Œå¼€å‘è§„åˆ’ã€èƒ½å¿«é€Ÿæ ¹æ®ä¸šåŠ¡æŠ¥è­¦ã€çº¿ä¸Šæ—¥å¿—ç­‰å®šä½å¹¶è§£å†³çº¿ä¸ŠæŠ€æœ¯é—®é¢˜ å¯ä»¥å°†è‡ªå·±çš„æƒ³æ³•æˆ–æ–°æŠ€æœ¯åœ¨ä¸šåŠ¡ä¸­è½åœ°å®žè·µï¼Œå°½é‡åœ¨å›¢é˜Ÿä¸­æ‹¥æœ‰ä¸€å®šçš„ä¸å¯æ›¿ä»£æ€§ ä¹ã€å­¦ä¹ æå‡vczhå¤§ç¥žåœ¨çŸ¥ä¹Žé—®é¢˜ã€å¦‚ä½•èƒ½ä»¥åŽè¾¾åˆ°æ¸©èµµè½®ä¸‰ä½å¤§ç¥žçš„æ°´å¹³ï¼Ÿã€‘ä¸‹çš„å›žç­”ï¼š è¿™åå‡ å¹´æˆ‘ä¸€å…±åšäº†ä¸‰ä»¶äº‹ï¼š 1ã€ä¸ä»¥èµšé’±ä¸ºç›®çš„é€‰æ‹©å­¦ä¹ çš„å†…å®¹ï¼› 2ã€ä»¥è‡ªå·±æ˜¯å¦èƒ½é€ å‡ºè½®å­æ¥è¡¡é‡å­¦ä¹ çš„æ•ˆæžœï¼› 3ã€åšæŒæ¯å¤©å†™è‡ªå·±çš„ä»£ç ï¼Œå‰10å¹´æ¯å¤©è‡³å°‘6ä¸ªå°æ—¶ï¼Œä¸åŒ…å«å­¦ä¹ å’Œå·¥ä½œçš„æ—¶é—´ã€‚ ä¸Šé¢å‡ ç‚¹å¯èƒ½æœ‰ç‚¹éš¾ï¼Œç¬¬ä¸€ç‚¹æˆ‘å°±åšä¸åˆ°ï¼Œä½†æ˜¯åšåˆ°ä¸‹é¢ç»©ç‚¹è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚ å…³äºŽå†™åšå®¢è¯´æ˜Žä¸‹ï¼Œèƒ½ç»™åˆ«äººè®²æ˜Žç™½çš„çŸ¥è¯†ä¼šæ¯”è‡ªå·±å­¦ä¹ æŽŒæ¡çš„è¦æ·±åˆ»è®¸å¤š æ‹¥æœ‰è‡ªå·±çš„æŠ€æœ¯åšå®¢ï¼Œæˆ–è€…åœ¨ä¸€äº›åšå®¢å¹³å°ä¸Šæ‹¥æœ‰è‡ªå·±çš„ä¸“æ  å®šæœŸçš„å°†çŸ¥è¯†è¿›è¡Œæ€»ç»“ï¼Œä¸æ–­å®Œå–„è‡ªå·±çš„çŸ¥è¯†ä½“ç³» å°½é‡å°†è‡ªå·±çš„çŸ¥è¯†è½¬æ¢æˆçœŸå®žçš„äº§å‡ºï¼Œä¸è¦ä»…ä»…åœç•™åœ¨ä¹¦é¢ç†è§£å±‚é¢ï¼Œæ›´é‡è¦çš„æ˜¯å®žé™…åº”ç”¨ åšæŒè¾“å‡ºè‡ªå·±çš„ä»£ç ï¼Œä¸è¦ç›²ç›®çš„æ‰Žè¿›å…¬å¸ä¸š åã€æŠ€æœ¯ä¹‹å¤– è¿™éƒ¨åˆ†å¯èƒ½æ¯”ä¸Šé¢ä¹æ¡åŠ èµ·æ¥é‡è¦ï¼ äº†è§£äº’è”ç½‘äººå‘˜æœ¯è¯­ï¼šCEOã€CTOã€COOã€CFOã€PMã€QAã€UIã€FEã€DEVã€DBAã€OPSç­‰ äº†è§£äº’è”ç½‘è¡Œä¸šæœ¯è¯­ï¼šB2Bã€B2Cã€C2Cã€O2Oç­‰ æŽŒæ¡äº’è”ç½‘è¡Œä¸šæ²Ÿé€šã€é—®ç­”ã€å­¦ä¹ çš„ æœ‰ä¸€å®šçš„â€PPTâ€èƒ½åŠ› æœ‰ä¸€å®šçš„ç†è´¢æ„è¯†ï¼Œè‡³å°‘äº†è§£å‚¨è“„ã€è´§å¸åŸºé‡‘ã€ä¿é™©ã€æŒ‡æ•°åŸºé‡‘ã€è‚¡ç¥¨ç­‰åŸºæœ¬çš„ç†è´¢çŸ¥è¯† æŽŒæ¡åœ¨ç¹é‡çš„å·¥ä½œå’Œé•¿æœŸçš„ç”µè„‘è¾å°„çš„æƒ…å†µä¸‹ä¿æŒå¥åº·çš„æ–¹æ³•ï¼Œå»ºç«‹æ­£ç¡®çš„å…»ç”ŸçŸ¥è¯†ä½“ç³» åä¸€ã€èµ„æºæŽ¨èæœ‰äº†çŸ¥è¯†ä½“ç³»ï¼Œåœ¨é˜…è¯»ä¸€ç¯‡æŠ€æœ¯æ–‡ç« çš„æ—¶å€™å°±å¾ˆå®¹æ˜“æŠŠå®ƒå½’ç±»ï¼Œæˆ‘ä¸€ç›´ä»¥æ¥å°±æ˜¯è¿™æ ·åšçš„ã€‚äº‹å®žè¯æ˜Žï¼Œåœ¨é˜…è¯»æ–‡ç« æˆ–ä¹¦ç±æ—¶ï¼Œæœ‰ç›®çš„å’Œå½’ç±»çš„é˜…è¯»æ¯”â€éšä¾¿çœ‹çœ‹â€åŽçš„åªæ˜¯ç•™å­˜çŽ‡è¦é«˜å¾ˆå¤šã€‚æ¯é˜…è¯»åˆ°ä¸€ç¯‡å¥½çš„æ–‡ç« æˆ–è€…ä¹¦ç±ï¼Œæˆ‘éƒ½ä¼šæ”¶è—å¹¶å½’ç±»åˆ°æˆ‘çš„çŸ¥è¯†ä½“ç³»ä¸­ã€‚ä¸‹é¢æ˜¯ä¸€äº›æˆ‘è§‰å¾—è¿˜ä¸é”™çš„æ–‡ç« ã€åšå®¢æˆ–è€…ä¹¦ç±æ•™ç¨‹ç­‰ç­‰ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼Œèµ„æºä¸å¤šï¼Œä½†éƒ½æ˜¯ç²¾å“ã€‚å­¦ä¹ ä¸€é—¨çŸ¥è¯†ï¼Œæœ€å¥½å…ˆé˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼ŒæŠŠæ‰€æœ‰çš„APIå¤§æ¦‚æµè§ˆä¸€éï¼Œå†ç»§ç»­çœ‹å¤§ä½¬ä»¬æ€»ç»“çš„è¿›é˜¶çŸ¥è¯†ï¼Œä»€ä¹ˆä¸œè¥¿æ˜¯æ¬è¿è¿‡æ¥çš„ï¼Œä»€ä¹ˆæ˜¯å¹²è´§ï¼Œä¸€ç›®äº†ç„¶ã€‚ è¯­è¨€åŸºç¡€ [ðŸ“š]JavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆå¿…çœ‹ï¼‰ [ðŸ“š]é«˜æ€§èƒ½JavaScript çŽ°ä»£JavaScriptæ•™ç¨‹ é˜®ä¸€å³°çš„ECMAScript 6æ•™ç¨‹ ECMAScript 6æ ‡å‡† HTML metaæ ‡ç­¾æ€»ç»“ä¸Žå±žæ€§ä½¿ç”¨ä»‹ç» CSSç¼–ç æŒ‡å¯¼ è®¡ç®—æœºåŸºç¡€ å¤§å‰ç«¯å¼€å‘è€…éœ€è¦äº†è§£çš„åŸºç¡€ç¼–è¯‘åŽŸç†å’Œè¯­è¨€çŸ¥è¯† å›¾è§£HTTP [ðŸ“š]JavaScriptè®¾è®¡æ¨¡å¼ä¸Žå¼€å‘å®žè·µ æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ æ•°æ®ç»“æž„å’Œç®—æ³• æ•°æ®ç»“æž„ä¸Žç®—æ³•ä¹‹ç¾Ž ç”¨åŠ¨ç”»çš„å½¢å¼å‘ˆçŽ°è§£LeetCodeé¢˜ç›®çš„æ€è·¯ JavaScriptæ•°æ®ç»“æž„å’Œç®—æ³• 30-seconds-of-codeï¼ˆé‡Œé¢æœ‰å¾ˆå¤šjsä»£ç éžå¸¸å·§å¦™ï¼Œæˆ‘æ­£åœ¨å°†å®ƒç¿»è¯‘æˆä¸­æ–‡ï¼‰ è¿è¡ŒçŽ¯å¢ƒ ã€Šé‡å­¦å‰ç«¯ã€‹ä¸­çš„æµè§ˆå™¨åŽŸç†ç« èŠ‚ å›¾è§£æµè§ˆå™¨çš„åŸºæœ¬å·¥ä½œåŽŸç† ä¸ƒå¤©å­¦ä¼šNodeJS Node.jsæ¨¡å—åŠ è½½ä¸Žè¿è¡ŒåŽŸç† æ¡†æž¶å’Œç±»åº“ TypeScript Handbook React.jså°ä¹¦ Reactæ·±å…¥ç³»åˆ— Webpack Reactå°ä¹¦ Vue.jsæŠ€æœ¯æ­ç§˜ Vuex-åœ¨Vueä¸­ç®¡ç†çŠ¶æ€ ä½ éœ€è¦Mobxè¿˜æ˜¯Reduxï¼Ÿ Underscoreæºç åˆ†æž å¾®ä¿¡å°ç¨‹åºå¼€å‘èµ„æºæ±‡æ€» è…¾è®¯ç§»åŠ¨Webå‰ç«¯çŸ¥è¯†åº“ å‰ç«¯å·¥ç¨‹ ä¸€å£ï¼ˆå¾ˆé•¿çš„ï¼‰æ°”äº†è§£babel Webpackå‚»ç“œå¼æŒ‡å— WebpackåŽŸç† å»–é›ªå³°çš„gitæ•™ç¨‹ å›¾è§£Git å‰ç«¯å¼€å‘è€…å¿…å¤‡çš„NginxçŸ¥è¯† ä½¿ç”¨Jenkinsè¿›è¡ŒæŒç»­é›†æˆ é¡¹ç›®å’Œä¸šåŠ¡ å¸¸è§å…­å¤§Webå®‰å…¨æ”»é˜²è§£æž æ·±å…¥ç†è§£å‰ç«¯æ€§èƒ½ç›‘æŽ§ [ðŸ“š]é«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å— æ–°äººå¦‚ä½•å¿«é€Ÿèžå…¥æŠ€æœ¯å®žåŠ›å¼ºçš„å‰ç«¯å›¢é˜Ÿ å­¦ä¹ æå‡ å°è®°ä¸­æ–‡ï¼ˆå„ç§ä¸­æ–‡å¼€å‘æ–‡æ¡£ï¼‰ å‰ç«¯å­¦ä¹ æ–¹æ³• å¦‚ä½•åœ¨å·¥ä½œå†…å¤–èŽ·å¾—æŒç»­çš„æŠ€æœ¯æˆé•¿ ä¼˜ç§€çš„å‰ç«¯åšå®¢æ±‡æ€» å¦å¤–æŽ¨èæˆ‘ä¸€ç›´åœ¨å…³æ³¨çš„å‡ ä½å¤§ä½¬çš„ä¸ªäººåšå®¢ï¼š å†´ç¾½çš„åšå®¢ å¼ é‘«æ—­çš„åšå®¢ å·¦è€³æœµè€—å­ æŠ€æœ¯ä¹‹å¤– äº’è”ç½‘æœ¯è¯­å¤§å…¨ äº’è”ç½‘æ²Ÿé€šã€é—®ç­”ã€å­¦ä¹ çš„è‰ºæœ¯ ç»å¸¸åŠ ç­è‡³æ·±å¤œï¼Œæ€Žæ ·æ‰èƒ½ä¿æŒèº«ä½“å¥åº· å…¶å®žåœ¨è¿™ä¸ªä¿¡æ¯å‘è¾¾çš„æ—¶ä»£æœ€ä¸ç¼ºçš„å°±æ˜¯èµ„æºï¼Œå¦‚ä½•ä»Žä¼—å¤šçš„èµ„æºä¸­èŽ·å–åˆ°çœŸæ­£ç²¾åŽçš„éƒ¨åˆ†ï¼Œæ˜¯éžå¸¸é‡è¦çš„ï¼Œèµ„æºåœ¨äºŽç²¾ä¸åœ¨äºŽå¤šï¼Œå¼ºçƒˆå»ºè®®åœ¨ä¿è¯æ·±åº¦çš„æƒ…å†µä¸‹å†ä¿è¯å¹¿åº¦ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[jsæ¨¡å—åŒ–ç¼–ç¨‹]]></title>
    <url>%2F2019%2F03%2F20%2Fjs%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[æ‘˜å½•è‡ªæŽ˜é‡‘åŽŸæ–‡é“¾æŽ¥ï¼šhttps://juejin.im/post/5c84b3b0e51d450cbe06ae8e å‰è¨€ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Ÿ æ¨¡å—å°±æ˜¯å®žçŽ°ç‰¹å®šåŠŸèƒ½çš„ä¸€ç»„æ–¹æ³•,è€Œæ¨¡å—åŒ–æ˜¯å°†æ¨¡å—çš„ä»£ç åˆ›é€ è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåªå‘å¤–éƒ¨æš´éœ²å…¬å¼€çš„æ–¹æ³•å’Œå˜é‡ï¼Œè€Œè¿™äº›æ–¹æ³•ä¹‹é—´é«˜åº¦è§£è€¦ã€‚ å†™ JS ä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—åŒ–ç¼–ç¨‹ï¼Ÿå½“å†™å‰ç«¯è¿˜åªæ˜¯å¤„ç†ç½‘é¡µçš„ä¸€äº›è¡¨å•æäº¤ï¼Œç‚¹å‡»äº¤äº’çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰å¼ºåŒ– JS æ¨¡å—åŒ–çš„æ¦‚å¿µï¼Œå½“å‰ç«¯é€»è¾‘å¼€å§‹å¤æ‚ï¼Œäº¤äº’å˜å¾—æ›´å¤šï¼Œæ•°æ®é‡è¶Šæ¥è¶Šåºžå¤§æ—¶ï¼Œå‰ç«¯å¯¹ JS æ¨¡å—åŒ–ç¼–ç¨‹çš„éœ€æ±‚å°±è¶ŠåŠ å¼ºçƒˆã€‚ åœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘æ¨¡å—åŒ–ï¼š å›¢é˜Ÿå¤šäººåä½œï¼Œéœ€è¦å¼•ç”¨åˆ«äººçš„ä»£ç  é¡¹ç›®äº¤æŽ¥ï¼Œæˆ‘ä»¬åœ¨é˜…è¯»å’Œé‡æž„åˆ«äººçš„ä»£ç  ä»£ç å®¡æŸ¥æ—¶ï¼Œæ£€éªŒä½ çš„ä»£ç æ˜¯å¦è§„èŒƒï¼Œæ˜¯å¦å­˜åœ¨é—®é¢˜ å†™å®Œä»£ç ï¼Œå›žé¡¾è‡ªå·±å†™çš„ä»£ç æ˜¯å¦ç¾Žè§‚ï¼šï¼‰ ä¸åŒçš„çŽ¯å¢ƒï¼ŒçŽ¯å¢ƒå˜é‡ä¸åŒ åŸºäºŽä»¥ä¸Šåœºæ™¯ï¼Œæ‰€ä»¥ï¼Œå½“å‰ JS æ¨¡å—åŒ–ä¸»è¦æ˜¯è¿™å‡ ä¸ªç›®çš„ï¼š ä»£ç å¤ç”¨æ€§ åŠŸèƒ½ä»£ç æ¾è€¦åˆ è§£å†³å‘½åå†²çª ä»£ç å¯ç»´æŠ¤æ€§ ä»£ç å¯é˜…è¯»æ€§ å…ˆç»™ç»“è®ºï¼šJS çš„æ¨¡å—åŒ–ç¼–ç¨‹ç»åŽ†äº†å‡ ä¸ªé˜¶æ®µï¼š å‘½åç©ºé—´å½¢å¼çš„ä»£ç å°è£… é€šè¿‡ç«‹å³æ‰§è¡Œå‡½æ•°(IIFE)åˆ›å»ºçš„å‘½åç©ºé—´ æœåŠ¡å™¨ç«¯è¿è¡Œæ—¶ Nodejs çš„ CommonJS è§„èŒƒ å°†æ¨¡å—åŒ–è¿è¡Œåœ¨æµè§ˆå™¨ç«¯çš„ AMD/CMD è§„èŒƒ å…¼å®¹ CMD å’Œ AMD çš„ UMD è§„èŒƒ é€šè¿‡è¯­è¨€æ ‡å‡†æ”¯æŒçš„ ES Module å…ˆç»™ç»“è®ºå›¾ï¼š ä¸€ã€å‘½åç©ºé—´æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ ES6 ä¹‹å‰ï¼ŒJS æ˜¯æ²¡æœ‰å—ä½œç”¨åŸŸçš„ï¼Œç§æœ‰å˜é‡å’Œæ–¹æ³•çš„éš”ç¦»ä¸»è¦é å‡½æ•°ä½œç”¨åŸŸï¼Œå…¬å¼€å˜é‡å’Œæ–¹æ³•çš„éš”ç¦»ä¸»è¦é å¯¹è±¡çš„å±žæ€§å¼•ç”¨ã€‚ å°è£…å‡½æ•°åœ¨ JS è¿˜æ²¡æœ‰æ¨¡å—åŒ–è§„èŒƒçš„æ—¶å€™ï¼Œå°†ä¸€äº›é€šç”¨çš„ã€åº•å±‚çš„åŠŸèƒ½æŠ½è±¡å‡ºæ¥ï¼Œç‹¬ç«‹æˆä¸€ä¸ªä¸ªå‡½æ•°æ¥å®žçŽ°æ¨¡å—åŒ–ï¼š æ¯”æ–¹å†™ä¸€ä¸ª utils.js å·¥å…·å‡½æ•°æ–‡ä»¶12345678910111213141516// utils.jsfunction add(x, y) &#123; if(typeof x !== "number" || typeof y !== "number") return; return x + y;&#125;function square(x) &#123; if(typeof x !== "number") return; return x * x;&#125;&lt;script src="./utils.js"&gt;&lt;/script&gt;&lt;script&gt; add(2, 3); square(4);&lt;/script&gt; é€šè¿‡ js å‡½æ•°æ–‡ä»¶åˆ’åˆ†çš„æ–¹å¼ï¼Œæ­¤æ—¶çš„å…¬å¼€å‡½æ•°å…¶å®žæ˜¯æŒ‚è½½åˆ°äº†å…¨å±€å¯¹è±¡ window ä¸‹ï¼Œå½“åœ¨åˆ«äººä¹Ÿæƒ³å®šä¹‰ä¸€ä¸ªå« add å‡½æ•°ï¼Œæˆ–è€…å¤šä¸ª js æ–‡ä»¶åˆå¹¶åŽ‹ç¼©çš„æ—¶å€™ï¼Œä¼šå­˜åœ¨å‘½åå†²çªçš„é—®é¢˜ã€‚ æŒ‚è½½åˆ°å…¨å±€å˜é‡ä¸‹ï¼šåŽæ¥æˆ‘ä»¬æƒ³åˆ°é€šè¿‡æŒ‚è½½å‡½æ•°åˆ°å…¨å±€å¯¹è±¡å­—é¢é‡ä¸‹çš„æ–¹å¼ï¼Œåˆ©ç”¨ JAVA åŒ…çš„æ¦‚å¿µï¼Œå¸Œæœ›å‡è½»å‘½åå†²çªçš„ä¸¥é‡æ€§ã€‚ 123456789101112131415var mathUtils1 = &#123; add: function(x, y) &#123; return x + y; &#125;,&#125;var mathUtils2 = &#123; add: function(x, y, z) &#123; return x + y + z; &#125;,&#125;mathUtils.add();mathUtils.square(); è¿™ç§æ–¹å¼ä»ç„¶åˆ›å»ºäº†å…¨å±€å˜é‡ï¼Œä½†å¦‚æžœåŒ…çš„è·¯å¾„å¾ˆé•¿ï¼Œé‚£ä¹ˆåˆ°æœ€åŽå¼•ç”¨æ–¹æ³•å¯èƒ½å°±ä¼šä»¥module1.subModule.subSubModule.addçš„æ–¹å¼å¼•ç”¨ä»£ç äº†ã€‚ IIFEè€ƒè™‘æ¨¡å—å­˜åœ¨ç§æœ‰å˜é‡ï¼ŒäºŽæ˜¯æˆ‘ä»¬åˆ©ç”¨IIFE(ç«‹å³æ‰§è¡Œè¡¨è¾¾å¼)åˆ›å»ºé—­åŒ…æ¥å°è£…ç§æœ‰å˜é‡ï¼š1234567891011121314var module = (function()&#123; var count = 0; return &#123; inc: function()&#123; count += 1; &#125;, dec: function()&#123; count += -1; &#125; &#125;&#125;)()module.inc();module.dec(); è¿™æ ·ç§æœ‰å˜é‡å¯¹äºŽå¤–éƒ¨æ¥è¯´å°±æ˜¯ä¸å¯è®¿é—®çš„ï¼Œé‚£å¦‚æžœæ¨¡å—éœ€è¦å¼•å…¥å…¶ä»–ä¾èµ–å‘¢ï¼Ÿ123456789101112131415var utils = (function ($) &#123; var $body = $("body"); var _private = 0; var foo = function() &#123; ... &#125; var bar = function () &#123; ... &#125; return &#123; foo: foo, bar: bar &#125;&#125;)(jQuery); ä»¥ä¸Šå°è£…æ¨¡å—çš„æ–¹å¼å«ä½œï¼šæ¨¡å—æ¨¡å¼ï¼Œåœ¨ jQuery æ—¶ä»£ï¼Œå¤§é‡ä½¿ç”¨äº†æ¨¡å—æ¨¡å¼:12345&lt;script src="jquery.js"&gt;&lt;/script&gt;&lt;script src="underscore.js"&gt;&lt;/script&gt;&lt;script src="utils.js"&gt;&lt;/script&gt;&lt;script src="base.js"&gt;&lt;/script&gt;&lt;script src="main.js"&gt;&lt;/script&gt; jQuery çš„æ’ä»¶å¿…é¡»åœ¨ JQuery.js æ–‡ä»¶ä¹‹åŽ ï¼Œæ–‡ä»¶çš„åŠ è½½é¡ºåºè¢«ä¸¥æ ¼é™åˆ¶ä½ï¼Œä¾èµ–è¶Šå¤š,ä¾èµ–å…³ç³»è¶Šæ··ä¹±ï¼Œè¶Šå®¹æ˜“å‡ºé”™ã€‚ äºŒã€CommonJSNodejs çš„å‡ºçŽ°ï¼Œè®© JavaScript èƒ½å¤Ÿè¿è¡Œåœ¨æœåŠ¡ç«¯çŽ¯å¢ƒä¸­ï¼Œæ­¤æ—¶è¿«åˆ‡éœ€è¦å»ºç«‹ä¸€ä¸ªæ ‡å‡†æ¥å®žçŽ°ç»Ÿä¸€çš„æ¨¡å—ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯åŽæ¥çš„ CommonJSã€‚123456789101112// math.jsexports.add = function(x, y) &#123; return x + y;&#125;// base.jsvar math = require("./math.js");math.add(2, 3); // 5// å¼•ç”¨æ ¸å¿ƒæ¨¡å—var http = require('http');http.createServer(...).listen(3000); CommonJS è§„å®šæ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œmodule ä»£è¡¨å½“å‰æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ id,filename, loaded,parent, children, exports ç­‰å±žæ€§ï¼Œmodule.exports å±žæ€§è¡¨ç¤ºå½“å‰æ¨¡å—å¯¹å¤–è¾“å‡ºçš„æŽ¥å£ï¼Œå…¶ä»–æ–‡ä»¶åŠ è½½è¯¥æ¨¡å—ï¼Œå®žé™…ä¸Šå°±æ˜¯è¯»å– module.exports å˜é‡ã€‚ 123456789101112131415161718// utils.js// ç›´æŽ¥èµ‹å€¼ç»™ module.exports å˜é‡module.exports = function () &#123; console.log("I'm utils.js module");&#125;// base.jsvar util = require("./utils.js")util(); // I'm utils.js moduleæˆ–è€…æŒ‚è½½åˆ° module.exports å¯¹è±¡ä¸‹module.exports.say = function () &#123; console.log("I'm utils.js module");&#125;// base.jsvar util = require("./utils.js")util.say(); ä¸ºäº†æ–¹ä¾¿ï¼ŒNode ä¸ºæ¯ä¸ªæ¨¡å—æä¾›ä¸€ä¸ª exports è‡ªç”±å˜é‡ï¼ŒæŒ‡å‘ module.exportsã€‚è¿™ç­‰åŒåœ¨æ¯ä¸ªæ¨¡å—å¤´éƒ¨ï¼Œæœ‰ä¸€è¡Œè¿™æ ·çš„å‘½ä»¤ã€‚1var exports = module.exports; exports å’Œ module.exports å…±äº«äº†åŒä¸ªå¼•ç”¨åœ°å€ï¼Œå¦‚æžœç›´æŽ¥å¯¹ exports èµ‹å€¼ä¼šå¯¼è‡´ä¸¤è€…ä¸å†æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä½†æœ€ç»ˆä¸ä¼šå¯¹ module.exports èµ·æ•ˆã€‚12345// module.exports å¯ä»¥ç›´æŽ¥èµ‹å€¼module.exports = 'Hello world'; // exports ä¸èƒ½ç›´æŽ¥èµ‹å€¼exports = 'Hello world'; CommonJS æ€»ç»“ï¼šCommonJS è§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œç”¨äºŽæœåŠ¡ç«¯ï¼Œç”±äºŽ CommonJS ä¼šåœ¨å¯åŠ¨æ—¶æŠŠå†…ç½®æ¨¡å—åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä¹Ÿä¼šæŠŠåŠ è½½è¿‡çš„æ¨¡å—æ”¾åœ¨å†…å­˜ä¸­ã€‚æ‰€ä»¥åœ¨ Node çŽ¯å¢ƒä¸­ç”¨åŒæ­¥åŠ è½½çš„æ–¹å¼ä¸ä¼šæœ‰å¾ˆå¤§é—®é¢˜ã€‚å¦ï¼ŒCommonJSæ¨¡å—åŠ è½½çš„æ˜¯è¾“å‡ºå€¼çš„æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤–éƒ¨æ¨¡å—è¾“å‡ºå€¼å˜äº†ï¼Œå½“å‰æ¨¡å—çš„å¯¼å…¥å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ ä¸‰ã€AMDCommonJS è§„èŒƒçš„å‡ºçŽ°ï¼Œä½¿å¾— JS æ¨¡å—åŒ–åœ¨ NodeJS çŽ¯å¢ƒä¸­å¾—åˆ°äº†æ–½å±•æœºä¼šã€‚ä½† CommonJS å¦‚æžœåº”ç”¨åœ¨æµè§ˆå™¨ç«¯ï¼ŒåŒæ­¥åŠ è½½çš„æœºåˆ¶ä¼šä½¿å¾— JS é˜»å¡ž UI çº¿ç¨‹ï¼Œé€ æˆé¡µé¢å¡é¡¿ã€‚åˆ©ç”¨æ¨¡å—åŠ è½½åŽæ‰§è¡Œå›žè°ƒçš„æœºåˆ¶ï¼Œæœ‰äº†åŽé¢çš„ RequireJS æ¨¡å—åŠ è½½å™¨ï¼Œ ç”±äºŽåŠ è½½æœºåˆ¶ä¸åŒï¼Œæˆ‘ä»¬ç§°è¿™ç§æ¨¡å—è§„èŒƒä¸º AMD(Asynchromous Module Definition å¼‚æ­¥æ¨¡å—å®šä¹‰)è§„èŒƒ, å¼‚æ­¥æ¨¡å—å®šä¹‰è¯žç”ŸäºŽä½¿ç”¨ XHR + eval çš„å¼€å‘ç»éªŒï¼Œæ˜¯ RequireJS æ¨¡å—åŠ è½½å™¨å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚AMD çš„æ¨¡å—å†™æ³•ï¼š123456789101112131415161718192021222324// æ¨¡å—å utils// ä¾èµ– jQuery, underscore// æ¨¡å—å¯¼å‡º foo, bar å±žæ€§&lt;script data-main="scripts/main" src="scripts/require.js"&gt;&lt;/script&gt;// main.jsrequire.config(&#123; baseUrl: "script", paths: &#123; "jquery": "jquery.min", "underscore": "underscore.min", &#125;&#125;);// å®šä¹‰ utils æ¨¡å—ï¼Œä½¿ç”¨ jQuery æ¨¡å—define("utils", ["jQuery", "underscore"], function($, _) &#123; var body = $("body"); var deepClone = _.deepClone(&#123;...&#125;); return &#123; foo: "hello", bar: "world" &#125;&#125;)&lt;/script&gt; AMD çš„ç‰¹ç‚¹åœ¨äºŽï¼š å»¶è¿ŸåŠ è½½ ä¾èµ–å‰ç½® AMD æ”¯æŒå…¼å®¹ CommonJS å†™æ³•ï¼š123456789101112define(function (require, exports, module)&#123; var someModule = require("someModule"); var anotherModule = require("anotherModule"); someModule.sayHi(); anotherModule.sayBye(); exports.asplode = function ()&#123; someModule.eat(); anotherModule.play(); &#125;;&#125;); å››ã€CMDSeaJS æ˜¯å›½å†… JS å¤§ç¥žçŽ‰ä¼¯å¼€å‘çš„æ¨¡å—åŠ è½½å™¨ï¼ŒåŸºäºŽ SeaJS çš„æ¨¡å—æœºåˆ¶ï¼Œæ‰€æœ‰ JavaScript æ¨¡å—éƒ½éµå¾ª CMDï¼ˆCommon Module Definitionï¼‰ æ¨¡å—å®šä¹‰è§„èŒƒ. CMD æ¨¡å—çš„å†™æ³•ï¼š1234567891011121314151617181920212223242526272829303132333435363738&lt;script src="scripts/sea.js"&gt;&lt;/script&gt;&lt;script&gt;// seajs çš„ç®€å•é…ç½®seajs.config(&#123; base: "./script/", alias: &#123; "jquery": "script/jquery/3.3.1/jquery.js" &#125;&#125;)// åŠ è½½å…¥å£æ¨¡å—seajs.use("./main")&lt;/script&gt;// å®šä¹‰æ¨¡å—// utils.jsdefine(function(require, exports, module) &#123; exports.each = function (arr) &#123; // å®žçŽ°ä»£ç  &#125;; exports.log = function (str) &#123; // å®žçŽ°ä»£ç  &#125;;&#125;);// è¾“å‡ºæ¨¡å—define(function(require, exports, module) &#123; var util = require('./util.js'); var a = require('./a'); //åœ¨éœ€è¦æ—¶ç”³æ˜Žï¼Œä¾èµ–å°±è¿‘ a.doSomething(); exports.init = function() &#123; // å®žçŽ°ä»£ç  util.log(); &#125;;&#125;); CMD å’Œ AMD è§„èŒƒçš„åŒºåˆ«ï¼šAMDæŽ¨å´‡ä¾èµ–å‰ç½®ï¼ŒCMDæŽ¨å´‡ä¾èµ–å°±è¿‘ï¼šAMD çš„ä¾èµ–éœ€è¦æå‰å®šä¹‰ï¼ŒåŠ è½½å®ŒåŽå°±ä¼šæ‰§è¡Œã€‚ CMD ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™ï¼Œåªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†åŽ»æ‰§è¡Œç›¸åº”æ¨¡å—ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š12345678910111213141516171819202122232425262728293031323334// main.jsdefine(function(require, exports, module) &#123; console.log("I'm main"); var mod1 = require("./mod1"); mod1.say(); var mod2 = require("./mod2"); mod2.say(); return &#123; hello: function() &#123; console.log("hello main"); &#125; &#125;;&#125;);// mod1.jsdefine(function() &#123; console.log("I'm mod1"); return &#123; say: function() &#123; console.log("say: I'm mod1"); &#125; &#125;;&#125;);// mod2.jsdefine(function() &#123; console.log("I'm mod2"); return &#123; say: function() &#123; console.log("say: I'm mod2"); &#125; &#125;;&#125;); ä»¥ä¸Šä»£ç åˆ†åˆ«ç”¨ Require.js å’Œ Sea.js æ‰§è¡Œï¼Œæ‰“å°ç»“æžœå¦‚ä¸‹ï¼šRequire.js:å…ˆæ‰§è¡Œæ‰€æœ‰ä¾èµ–ä¸­çš„ä»£ç 12345I'm mod1I'm mod2I'm mainsay: I'm mod1say: I'm mod2 Sea.js:ç”¨åˆ°ä¾èµ–æ—¶ï¼Œå†æ‰§è¡Œä¾èµ–ä¸­çš„ä»£ç 123456I'm mainI'm mod1say: I'm mod1I'm mod2say: I'm mod2 äº”ã€UMDumdï¼ˆUniversal Module Definitionï¼‰ æ˜¯ AMD å’Œ CommonJS çš„å…¼å®¹æ€§å¤„ç†,æå‡ºäº†è·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆã€‚123456789101112131415161718(function (root, factory) &#123; if (typeof exports === 'object') &#123; // commonJS module.exports = factory(); &#125; else if (typeof define === 'function' &amp;&amp; define.amd) &#123; // AMD define(factory); &#125; else &#123; // æŒ‚è½½åˆ°å…¨å±€ root.eventUtil = factory(); &#125;&#125;)(this, function () &#123; function myFunc()&#123;&#125;; return &#123; foo: myFunc &#125;;&#125;); åº”ç”¨ UMD è§„èŒƒçš„ JS æ–‡ä»¶å…¶å®žå°±æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œé€šè¿‡æ£€éªŒ JS çŽ¯å¢ƒæ˜¯å¦æ”¯æŒ CommonJS æˆ– AMD å†è¿›è¡Œæ¨¡å—åŒ–å®šä¹‰ã€‚ å…­ã€ES6 ModuleCommonJS å’Œ AMD è§„èŒƒéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šä¾èµ–ã€‚è€Œ ES6 åœ¨è¯­è¨€å±‚é¢æå‡ºäº†æ¨¡å—åŒ–æ–¹æ¡ˆ, ES6 module æ¨¡å—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚ES6 æ¨¡å—åŒ–è¿™ç§åŠ è½½ç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€æˆ–è€…é™æ€åŠ è½½ã€‚ å†™æ³•ï¼š12345678910111213141516171819// math.js// å‘½åå¯¼å‡ºexport function add(a, b)&#123; return a + b;&#125;export function sub(a, b)&#123; return a - b;&#125;// å‘½åå¯¼å…¥import &#123; add, sub &#125; from "./math.js";add(2, 3);sub(7, 2);// é»˜è®¤å¯¼å‡ºexport default function foo() &#123; console.log('foo');&#125;// é»˜è®¤å¯¼å…¥import someModule from "./utils.js"; ES6 æ¨¡å—çš„è¿è¡Œæœºåˆ¶ä¸Ž CommonJS ä¸ä¸€æ ·ã€‚JS å¼•æ“Žå¯¹è„šæœ¬é™æ€åˆ†æžçš„æ—¶å€™ï¼Œé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤importï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œé¢åŽ»å–å€¼ã€‚åŽŸå§‹å€¼å˜äº†ï¼ŒimportåŠ è½½çš„å€¼ä¹Ÿä¼šè·Ÿç€å˜ã€‚å› æ­¤ï¼ŒES6 æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚ æ€»ç»“JS çš„æ¨¡å—åŒ–è§„èŒƒç»è¿‡äº†æ¨¡å—æ¨¡å¼ã€CommonJSã€AMD/CMDã€ES6 çš„æ¼”è¿›ï¼Œåˆ©ç”¨çŽ°åœ¨å¸¸ç”¨çš„ gulpã€webpack æ‰“åŒ…å·¥å…·ï¼Œéžå¸¸æ–¹ä¾¿æˆ‘ä»¬ç¼–å†™æ¨¡å—åŒ–ä»£ç ã€‚æŽŒæ¡è¿™å‡ ç§æ¨¡å—åŒ–è§„èŒƒçš„åŒºåˆ«å’Œè”ç³»æœ‰åŠ©äºŽæé«˜ä»£ç çš„æ¨¡å—åŒ–è´¨é‡ï¼Œæ¯”å¦‚ï¼ŒCommonJS è¾“å‡ºçš„æ˜¯å€¼æ‹·è´ï¼ŒES6 Module åœ¨é™æ€ä»£ç è§£æžæ—¶è¾“å‡ºåªè¯»æŽ¥å£ï¼ŒAMD æ˜¯å¼‚æ­¥åŠ è½½ï¼ŒæŽ¨å´‡ä¾èµ–å‰ç½®ï¼ŒCMD æ˜¯ä¾èµ–å°±è¿‘ï¼Œå»¶è¿Ÿæ‰§è¡Œï¼Œåœ¨ä½¿ç”¨åˆ°æ¨¡å—æ—¶æ‰åŽ»åŠ è½½ç›¸åº”çš„ä¾èµ–ã€‚]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ ä¸çŸ¥é“çš„javascriptéšç¬”]]></title>
    <url>%2F2019%2F02%2F26%2F%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84javascript%E9%9A%8F%E7%AC%94%2F</url>
    <content type="text"><![CDATA[æ‘˜å½•è‡ªæŽ˜é‡‘åŽŸæ–‡é“¾æŽ¥ï¼šhttps://juejin.im/post/5bfaa2e26fb9a04a0440b0e4 ç¬¬ä¸€éƒ¨åˆ† ä½œç”¨åŸŸä¸Žé—­åŒ…ç¬¬ä¸€ç«  ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ1.1 ç¼–è¯‘åŽŸç†ä¼ ç»Ÿç¼–è¯‘çš„ä¸‰ä¸ªæ­¥éª¤ 1,åˆ†è¯/è¯æ³•åˆ†æž(Tokenizing/Lexing) : è¿™ä¸ªè¿‡ç¨‹ä¼šå°†ç”±å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²åˆ†è§£æˆ(å¯¹ç¼–ç¨‹è¯­è¨€æ¥è¯´)æœ‰æ„ä¹‰çš„ä»£ç å—ï¼Œè¿™äº›ä»£ç å—è¢«ç§°ä¸ºè¯æ³•å•å…ƒ(token)ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ç¨‹åºvar a = 2;ã€‚è¿™æ®µç¨‹åºé€šå¸¸ä¼šè¢«åˆ†è§£æˆ ä¸ºä¸‹é¢è¿™äº›è¯æ³•å•å…ƒ:varã€aã€=ã€2ã€;ã€‚ç©ºæ ¼æ˜¯å¦ä¼šè¢«å½“ä½œè¯æ³•å•å…ƒï¼Œå–å†³äºŽç©ºæ ¼åœ¨ è¿™é—¨è¯­è¨€ä¸­æ˜¯å¦å…·æœ‰æ„ä¹‰ã€‚ 2,è§£æž/è¯­æ³•åˆ†æž(Parsing): è¿™ä¸ªè¿‡ç¨‹æ˜¯å°†è¯æ³•å•å…ƒæµ(æ•°ç»„)è½¬æ¢æˆä¸€ä¸ªç”±å…ƒç´ é€çº§åµŒå¥—æ‰€ç»„æˆçš„ä»£è¡¨äº†ç¨‹åºè¯­æ³•ç»“æž„çš„æ ‘ã€‚è¿™ä¸ªæ ‘è¢«ç§°ä¸ºâ€œæŠ½è±¡è¯­æ³•æ ‘â€(Abstract Syntax Treeï¼ŒAST)ã€‚var a = 2; çš„æŠ½è±¡è¯­æ³•æ ‘ä¸­å¯èƒ½ä¼šæœ‰ä¸€ä¸ªå«ä½œ VariableDeclaration çš„é¡¶çº§èŠ‚ç‚¹ï¼ŒæŽ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªå«ä½œIdentifier(å®ƒçš„å€¼æ˜¯a)çš„å­èŠ‚ç‚¹ï¼Œä»¥åŠä¸€ä¸ªå«ä½œ AssignmentExpression çš„å­èŠ‚ç‚¹ã€‚AssignmentExpression èŠ‚ç‚¹æœ‰ä¸€ä¸ªå«ä½œ NumericLiteral(å®ƒçš„å€¼æ˜¯ 2)çš„å­èŠ‚ç‚¹ã€‚ 3,ä»£ç ç”Ÿæˆ: å°† AST è½¬æ¢ä¸ºå¯æ‰§è¡Œä»£ç çš„è¿‡ç¨‹ç§°è¢«ç§°ä¸ºä»£ç ç”Ÿæˆã€‚è¿™ä¸ªè¿‡ç¨‹ä¸Žè¯­è¨€ã€ç›®æ ‡å¹³å°ç­‰æ¯æ¯ç›¸å…³ã€‚æŠ›å¼€å…·ä½“ç»†èŠ‚ï¼Œç®€å•æ¥è¯´å°±æ˜¯æœ‰æŸç§æ–¹æ³•å¯ä»¥å°† var a = 2; çš„ AST è½¬åŒ–ä¸ºä¸€ç»„æœºå™¨æŒ‡ä»¤ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªå«ä½œ a çš„å˜é‡(åŒ…æ‹¬åˆ†é…å†…å­˜ç­‰)ï¼Œå¹¶å°†ä¸€ä¸ªå€¼å‚¨å­˜åœ¨ a ä¸­ã€‚ è¯´æ˜Ž: æ­¤å¤„åªéœ€è®°ä½ç¬¬ä¸€æ­¥:åˆ†è¯/è¯æ³•åˆ†æž.ç¬¬äºŒæ­¥:è§£æž/è¯­æ³•åˆ†æž,å¾—åˆ°æŠ½è±¡è¯­æ³•æ ‘(AST).ç¬¬ä¸‰æ­¥:ä»£ç ç”Ÿæˆ,å°†æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤. JavaScriptä¸Žä¼ ç»Ÿç¼–è¯‘çš„ä¸åŒç‚¹: 1,JavaScript å¼•æ“Žä¸ä¼šæœ‰å¤§é‡çš„(åƒå…¶ä»–è¯­è¨€ç¼–è¯‘å™¨é‚£ä¹ˆå¤šçš„)æ—¶é—´ç”¨æ¥è¿›è¡Œä¼˜åŒ–. 2,JavaScriptä¸Žä¼ ç»Ÿçš„ç¼–è¯‘è¯­è¨€ä¸åŒï¼Œå®ƒä¸æ˜¯åœ¨æž„å»ºä¹‹å‰æå‰ç¼–è¯‘çš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹,å®ƒæ˜¯åœ¨ä»£ç æ‰§è¡Œå‰çš„å‡ å¾®ç§’(ç”šè‡³æ›´çŸ­)è¿›è¡Œç¼–è¯‘. 3,JavaScript å¼•æ“Žç”¨å°½äº†å„ç§åŠžæ³•(æ¯”å¦‚ JITï¼Œå¯ä»¥å»¶ è¿Ÿç¼–è¯‘ç”šè‡³å®žæ–½é‡ç¼–è¯‘)æ¥ä¿è¯æ€§èƒ½æœ€ä½³ã€‚ 4,JavaScriptçš„ç¼–è¯‘ç»“æžœä¸èƒ½åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿›è¡Œç§»æ¤ã€‚1.2 ç†è§£ä½œç”¨åŸŸ 1.2.1 æ¼”å‘˜è¡¨(ä»£ç ç¼–è¯‘åˆ°æ‰§è¡Œçš„å‚ä¸Žè€…)é¦–å…ˆä»‹ç»å°†è¦å‚ä¸Žåˆ°å¯¹ç¨‹åº var a = 2; è¿›è¡Œå¤„ç†çš„è¿‡ç¨‹ä¸­çš„æ¼”å‘˜ä»¬ï¼Œè¿™æ ·æ‰èƒ½ç†è§£æŽ¥ä¸‹æ¥å°†è¦å¬åˆ°çš„å¯¹è¯ã€‚ å¼•æ“Žä»Žå¤´åˆ°å°¾è´Ÿè´£æ•´ä¸ª JavaScript ç¨‹åºçš„ç¼–è¯‘åŠæ‰§è¡Œè¿‡ç¨‹ã€‚ ç¼–è¯‘å™¨å¼•æ“Žçš„å¥½æœ‹å‹ä¹‹ä¸€ï¼Œè´Ÿè´£è¯­æ³•åˆ†æžåŠä»£ç ç”Ÿæˆç­‰è„æ´»ç´¯æ´»(è¯¦è§å‰ä¸€èŠ‚çš„å†…å®¹)ã€‚ ä½œç”¨åŸŸå¼•æ“Žçš„å¦ä¸€ä½å¥½æœ‹å‹ï¼Œè´Ÿè´£æ”¶é›†å¹¶ç»´æŠ¤ç”±æ‰€æœ‰å£°æ˜Žçš„æ ‡è¯†ç¬¦(å˜é‡)ç»„æˆçš„ä¸€ç³»åˆ—æŸ¥è¯¢ï¼Œå¹¶å®žæ–½ä¸€å¥—éžå¸¸ä¸¥æ ¼çš„è§„åˆ™ï¼Œç¡®å®šå½“å‰æ‰§è¡Œçš„ä»£ç å¯¹è¿™äº›æ ‡è¯†ç¬¦çš„è®¿é—®æƒé™ã€‚1.2.2 å¯¹è¯(ä»£ç ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹)1.2.3 ä½œç”¨åŸŸçš„LHSæŸ¥è¯¢å’ŒRHSæŸ¥è¯¢ç”±ä¸Šå›¾å¯çŸ¥,å¼•æ“Žåœ¨èŽ·å¾—ç¼–è¯‘å™¨ç»™çš„ä»£ç åŽ,è¿˜ä¼šå¯¹ä½œç”¨åŸŸè¿›è¡Œè¯¢é—®å˜é‡. çŽ°åœ¨å°†ä¾‹å­æ”¹ä¸ºvar a = b;æ­¤æ—¶å¼•æ“Žä¼šå¯¹å˜é‡aå’Œå˜é‡béƒ½å‘ä½œç”¨åŸŸè¿›è¡ŒæŸ¥è¯¢.æŸ¥è¯¢åˆ†ä¸ºä¸¤ç§:LHSå’ŒRHS.å…¶ä¸­Lä»£è¡¨å·¦.Rä»£è¡¨å³.å³å¯¹å˜é‡aè¿›è¡ŒLHSæŸ¥è¯¢.å¯¹å˜é‡bè¿›è¡ŒRHSæŸ¥è¯¢. å•å•ä»Žè¡¨è±¡ä¸Šçœ‹.LHSå°±æ˜¯ä½œç”¨åŸŸå¯¹=å·¦è¾¹å˜é‡çš„æŸ¥è¯¢.RHSå°±æ˜¯ä½œç”¨åŸŸå¯¹=å³è¾¹å˜é‡çš„æŸ¥è¯¢.ä½†å®žé™…ä¸Šå¹¶ä¸æ˜¯è¿™ä¹ˆç®€å•,é¦–å…ˆLHSå’ŒRHSéƒ½æ˜¯å¯¹å˜é‡è¿›è¡ŒæŸ¥è¯¢,è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºä»€ä¹ˆè¦å°†ä¾‹å­ä»Žvar a=2;æ”¹ä¸ºvar a=b;ä¸¤è€…çš„åŒºåˆ«æ˜¯ä¸¤è€…æœ€ç»ˆè¦æŸ¥è¯¢åˆ°çš„ä¸œè¥¿å¹¶ä¸ä¸€è‡´.LHSæ˜¯è¦æŸ¥è¯¢åˆ°å˜é‡çš„å£°æ˜Ž(è€Œä¸æ˜¯å˜é‡çš„å€¼),ä»Žè€ŒåŽé¢å¯ä»¥ä¸ºå…¶èµ‹å€¼.RHSæ˜¯è¦æŸ¥è¯¢åˆ°å˜é‡æœ€ç»ˆçš„å€¼.è¿˜æœ‰ä¸€ç‚¹,LHS å’Œ RHS çš„å«ä¹‰æ˜¯â€œèµ‹å€¼æ“ä½œçš„å·¦ä¾§æˆ–å³ä¾§â€å¹¶ä¸ä¸€å®šæ„å‘³ç€å°±æ˜¯â€œ= èµ‹å€¼æ“ä½œç¬¦çš„å·¦ä¾§æˆ–å³ä¾§â€ã€‚èµ‹å€¼æ“ä½œè¿˜æœ‰å…¶ä»–å‡ ç§å½¢å¼ï¼Œå› æ­¤åœ¨æ¦‚å¿µä¸Šæœ€ å¥½å°†å…¶ç†è§£ä¸ºâ€œèµ‹å€¼æ“ä½œçš„ç›®æ ‡æ˜¯è°(LHS)â€ä»¥åŠâ€œè°æ˜¯èµ‹å€¼æ“ä½œçš„æºå¤´(RHS)â€.æˆ–è€…è¿™æ ·ç†è§£å¦‚æžœè¿™æ®µä»£ç éœ€è¦å¾—åˆ°è¯¥å˜é‡çš„â€™æºå€¼â€™,åˆ™ä¼šè¿›è¡ŒRHSæŸ¥è¯¢. 1.2.4 å¼•æ“Žå’Œä½œç”¨åŸŸçš„å¯¹è¯è¿™éƒ¨åˆ†æ¯”è¾ƒç®€å•å°±æ˜¯é€šè¿‡æ‹Ÿäººæ–¹å¼æ¯”å–»å¼•æ“Žå’Œä½œç”¨åŸŸçš„åˆä½œè¿‡ç¨‹.ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯,å¼•æ“Žè¿›è¡ŒLHSå’ŒRHSæŸ¥è¯¢æ—¶éƒ½ä¼šæ‰¾ä½œç”¨åŸŸè¦.1234function foo(a) &#123; console.log( a ); // 2&#125;foo( 2 ); è®©æˆ‘ä»¬æŠŠä¸Šé¢è¿™æ®µä»£ç çš„å¤„ç†è¿‡ç¨‹æƒ³è±¡æˆä¸€æ®µå¯¹è¯ï¼Œè¿™æ®µå¯¹è¯å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚ å¼•æ“Ž:æˆ‘è¯´ä½œç”¨åŸŸï¼Œæˆ‘éœ€è¦ä¸º foo è¿›è¡Œ RHS å¼•ç”¨ã€‚ä½ è§è¿‡å®ƒå—?ä½œç”¨åŸŸ:åˆ«è¯´ï¼Œæˆ‘è¿˜çœŸè§è¿‡ï¼Œç¼–è¯‘å™¨é‚£å°å­åˆšåˆšå£°æ˜Žäº†å®ƒã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»™ä½ ã€‚å¼•æ“Ž:å“¥ä»¬å¤ªå¤Ÿæ„æ€äº†!å¥½å§ï¼Œæˆ‘æ¥æ‰§è¡Œä¸€ä¸‹ fooã€‚å¼•æ“Ž:ä½œç”¨åŸŸï¼Œè¿˜æœ‰ä¸ªäº‹å„¿ã€‚æˆ‘éœ€è¦ä¸º a è¿›è¡Œ LHS å¼•ç”¨ï¼Œè¿™ä¸ªä½ è§è¿‡å—?ä½œç”¨åŸŸ:è¿™ä¸ªä¹Ÿè§è¿‡ï¼Œç¼–è¯‘å™¨æœ€è¿‘æŠŠå®ƒå£°åä¸º foo çš„ä¸€ä¸ªå½¢å¼å‚æ•°äº†ï¼Œæ‹¿åŽ»å§ã€‚å¼•æ“Ž:å¤§æ©ä¸è¨€è°¢ï¼Œä½ æ€»æ˜¯è¿™ä¹ˆæ£’ã€‚çŽ°åœ¨æˆ‘è¦æŠŠ 2 èµ‹å€¼ç»™ aã€‚å¼•æ“Ž:å“¥ä»¬ï¼Œä¸å¥½æ„æ€åˆæ¥æ‰“æ‰°ä½ ã€‚æˆ‘è¦ä¸º console è¿›è¡Œ RHS å¼•ç”¨ï¼Œä½ è§è¿‡å®ƒå—?ä½œç”¨åŸŸ:å’±ä¿©è°è·Ÿè°å•Šï¼Œå†è¯´æˆ‘å°±æ˜¯å¹²è¿™ä¸ªã€‚è¿™ä¸ªæˆ‘ä¹Ÿæœ‰ï¼Œconsole æ˜¯ä¸ªå†…ç½®å¯¹è±¡ã€‚ ç»™ä½ ã€‚å¼•æ“Ž:ä¹ˆä¹ˆå“’ã€‚æˆ‘å¾—çœ‹çœ‹è¿™é‡Œé¢æ˜¯ä¸æ˜¯æœ‰ log(..)ã€‚å¤ªå¥½äº†ï¼Œæ‰¾åˆ°äº†ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å¼•æ“Ž:å“¥ä»¬ï¼Œèƒ½å¸®æˆ‘å†æ‰¾ä¸€ä¸‹å¯¹ a çš„ RHS å¼•ç”¨å—?è™½ç„¶æˆ‘è®°å¾—å®ƒï¼Œä½†æƒ³å†ç¡®è®¤ä¸€æ¬¡ã€‚ä½œç”¨åŸŸ:æ”¾å¿ƒå§ï¼Œè¿™ä¸ªå˜é‡æ²¡æœ‰å˜åŠ¨è¿‡ï¼Œæ‹¿èµ°ï¼Œä¸è°¢ã€‚å¼•æ“Ž:çœŸæ£’ã€‚æˆ‘æ¥æŠŠ a çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 2ï¼Œä¼ é€’è¿› log(..)ã€‚ 1.3ä½œç”¨åŸŸåµŒå¥—å½“ä¸€ä¸ªå—æˆ–å‡½æ•°åµŒå¥—åœ¨å¦ä¸€ä¸ªå—æˆ–å‡½æ•°ä¸­æ—¶ï¼Œå°±å‘ç”Ÿäº†ä½œç”¨åŸŸçš„åµŒå¥—ã€‚è¿›è€Œå½¢æˆäº†ä¸€æ¡ä½œç”¨åŸŸé“¾.å› æ­¤ï¼Œåœ¨å½“å‰ä½œç”¨ åŸŸä¸­æ— æ³•æ‰¾åˆ°æŸä¸ªå˜é‡æ—¶ï¼Œå¼•æ“Žå°±ä¼šåœ¨å¤–å±‚åµŒå¥—çš„ä½œç”¨åŸŸä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡ï¼Œ æˆ–æŠµè¾¾æœ€å¤–å±‚çš„ä½œç”¨åŸŸ(ä¹Ÿå°±æ˜¯å…¨å±€ä½œç”¨åŸŸ)ä¸ºæ­¢ã€‚ å½“å¼•æ“Žéœ€è¦å¯¹ä½œç”¨åŸŸè¿›è¡ŒæŸ¥è¯¢æ—¶.å¼•æ“Žä¼šä»Žå½“å‰çš„æ‰§è¡Œä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾å˜é‡ï¼Œå¦‚æžœæ‰¾ä¸åˆ°ï¼Œ å°±å‘ä¸Šä¸€çº§ç»§ç»­æŸ¥æ‰¾ã€‚å½“æŠµè¾¾æœ€å¤–å±‚çš„å…¨å±€ä½œç”¨åŸŸæ—¶ï¼Œæ— è®ºæ‰¾åˆ°è¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹éƒ½ ä¼šåœæ­¢ã€‚ 1.4 å¼‚å¸¸ä¾‹å­:12345function foo(a) &#123; console.log( a + b ); b = a;&#125;foo( 2 ); å¦‚æžœ RHS æŸ¥è¯¢åœ¨æ‰€æœ‰åµŒå¥—çš„ä½œç”¨åŸŸä¸­éå¯»ä¸åˆ°æ‰€éœ€çš„å˜é‡ï¼Œå¼•æ“Žå°±ä¼šæŠ›å‡º ReferenceError å¼‚å¸¸ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­console.log(a+b)ç”±äºŽRHSæ­¤æ—¶æ˜¯æ‰¾ä¸åˆ°bçš„å€¼.æ•…ä¼šæŠ›å‡ºReferenceError. å¦‚æžœ RHS æŸ¥è¯¢æ‰¾åˆ°äº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯ä½ å°è¯•å¯¹è¿™ä¸ªå˜é‡çš„å€¼è¿›è¡Œä¸åˆç†çš„æ“ä½œï¼Œ æ¯”å¦‚è¯•å›¾å¯¹ä¸€ä¸ªéžå‡½æ•°ç±»åž‹çš„å€¼è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œæˆ–ç€å¼•ç”¨ null æˆ– undefined ç±»åž‹çš„å€¼ä¸­çš„ å±žæ€§ï¼Œé‚£ä¹ˆå¼•æ“Žä¼šæŠ›å‡ºå¦å¤–ä¸€ç§ç±»åž‹çš„å¼‚å¸¸ï¼Œå«ä½œ TypeErrorã€‚ å½“å¼•æ“Žæ‰§è¡Œ LHS æŸ¥è¯¢æ—¶ï¼Œå¦‚æžœåœ¨é¡¶å±‚(å…¨å±€ä½œç”¨åŸŸ)ä¸­ä¹Ÿæ— æ³•æ‰¾åˆ°ç›®æ ‡å˜é‡ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­å°±ä¼šåˆ›å»ºä¸€ä¸ªå…·æœ‰è¯¥åç§°çš„å˜é‡ï¼Œå¹¶å°†å…¶è¿”è¿˜ç»™å¼•æ“Žï¼Œå‰ææ˜¯ç¨‹åºè¿è¡Œåœ¨éž â€œä¸¥æ ¼æ¨¡å¼â€ä¸‹ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„b=a;. åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ LHS æŸ¥è¯¢å¤±è´¥æ—¶ï¼Œå¹¶ä¸ä¼šåˆ›å»ºå¹¶è¿”å›žä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¼•æ“Žä¼šæŠ›å‡ºåŒ RHS æŸ¥è¯¢ å¤±è´¥æ—¶ç±»ä¼¼çš„ ReferenceError å¼‚å¸¸ã€‚ 1.5 LHSä¸ŽRHSå°ç»“ LHSå’ŒRHSæŸ¥è¯¢éƒ½æ˜¯å¼•æ“Žå¯¹ä½œç”¨åŸŸçš„æŸ¥è¯¢ LHSå’ŒRHSæŸ¥è¯¢éƒ½æ˜¯åªå¯¹å˜é‡è¿›è¡ŒæŸ¥è¯¢ LHSå’ŒRHSéƒ½ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾è¿›è¡ŒæŸ¥è¯¢,ç›´åˆ°æœ€ä¸Šå±‚çš„å…¨å±€ä½œç”¨åŸŸ.å¦‚æžœæ²¡æ‰¾åˆ°çš„è¯,åœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹,LHSåˆ™ä¼šåœ¨å…¨å±€åˆ›å»ºä¸€ä¸ªç›¸åŒåç§°çš„å˜é‡.RHSåˆ™ä¼šæŠ›å‡ºReferenceErrorçš„å¼‚å¸¸. å¦‚æžœæŸ¥æ‰¾çš„ç›®çš„æ˜¯å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨ LHS æŸ¥è¯¢;å¦‚æžœç›®çš„æ˜¯èŽ·å–å˜é‡çš„å€¼ï¼Œå°±ä¼šä½¿ç”¨ RHS æŸ¥è¯¢ã€‚ LHSåªæ˜¯æ‰¾åˆ°å˜é‡çš„å®¹å™¨è€Œå·²,æ–¹ä¾¿è¿›è¡Œèµ‹å€¼ =æ“ä½œç¬¦æˆ–è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥å‚æ•°çš„æ“ä½œéƒ½ä¼šå¯¼è‡´å…³è”ä½œç”¨åŸŸçš„èµ‹å€¼æ“ä½œã€‚æ­¤æ—¶éƒ½ä¼šè¿›è¡ŒLHSæŸ¥è¯¢ RHSæŸ¥è¯¢åˆ™éœ€è¦æ‰¾åˆ°å˜é‡çš„å€¼. ç¬¬äºŒç«  è¯æ³•ä½œç”¨åŸŸä½œç”¨åŸŸåˆ†ä¸ºä¸¤ç§å·¥ä½œæ¨¡å¼: 1,è¯æ³•ä½œç”¨åŸŸ.æ˜¯ç›®å‰æœ€ä¸ºæ™®éçš„ï¼Œè¢«å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€æ‰€é‡‡ç”¨çš„æ¨¡å¼.å½“ç„¶JavaScriptä¹Ÿæ˜¯ä½¿ç”¨çš„è¯æ³•ä½œç”¨åŸŸ. 2,åŠ¨æ€ä½œç”¨åŸŸ.ä½¿ç”¨è¾ƒå°‘,æ¯”å¦‚ Bash è„šæœ¬ã€Perl ä¸­çš„ä¸€äº›æ¨¡å¼ç­‰. 2.1 è¯æ³•é˜¶æ®µè¯æ³•é˜¶æ®µ: å¤§éƒ¨åˆ†æ ‡å‡†è¯­è¨€ç¼–è¯‘å™¨çš„ç¬¬ä¸€ä¸ªå·¥ä½œé˜¶æ®µå«ä½œè¯æ³•åŒ–(ä¹Ÿå«å•è¯åŒ–)ã€‚è¯æ³•åŒ–çš„è¿‡ç¨‹ä¼šå¯¹æºä»£ç ä¸­çš„å­—ç¬¦è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æžœæ˜¯æœ‰çŠ¶æ€çš„è§£æžè¿‡ç¨‹ï¼Œè¿˜ä¼šèµ‹äºˆå•è¯è¯­ä¹‰ã€‚ è¯æ³•ä½œç”¨åŸŸ: è¯æ³•ä½œç”¨åŸŸå°±æ˜¯å®šä¹‰åœ¨è¯æ³•é˜¶æ®µçš„ä½œç”¨åŸŸä¹Ÿè¢«ç§°ä¸ºé™æ€ä½œç”¨åŸŸã€‚å³åœ¨JavaScripté‡Œä½œç”¨åŸŸçš„äº§ç”Ÿæ˜¯åœ¨ç¼–è¯‘å™¨å‡ºæ¥çš„ç¬¬ä¸€é˜¶æ®µè¯æ³•é˜¶æ®µäº§ç”Ÿçš„,å¹¶ä¸”æ˜¯ä½ åœ¨ä¹¦å†™å®Œä»£ç æ—¶å°±å·²ç»ç¡®å®šäº†çš„. è¯æ³•ä½œç”¨åŸŸä½ç½®: è¯æ³•ä½œç”¨åŸŸä½ç½®èŒƒå›´å®Œå…¨ç”±å†™ä»£ç æœŸé—´å‡½æ•°æ‰€å£°æ˜Žçš„ä½ç½®æ¥å†³å®š. ç†è§£è¯æ³•ä½œç”¨åŸŸåŠåµŒå¥—:çœ‹ä¸‹ä¾‹å­:12345678910function foo(a) &#123; var b = a * 2; function bar(c) &#123; console.log( a, b, c ); &#125; bar( b * 3 ); &#125;foo( 2 ); // 2, 4, 12 åœ¨è¿™ä¸ªä¾‹å­ä¸­æœ‰ä¸‰ä¸ªé€çº§åµŒå¥—çš„ä½œç”¨åŸŸã€‚ä¸ºäº†å¸®åŠ©ç†è§£ï¼Œå¯ä»¥å°†å®ƒä»¬åˆ†æˆ3ä¸ªé€çº§åŒ…å«çš„â€æ°”æ³¡ä½œç”¨åŸŸâ€ã€‚ 1:åŒ…å«ç€æ•´ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦:fooã€‚ 2:åŒ…å«ç€ foo æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªæ ‡è¯†ç¬¦:aã€bar å’Œ bã€‚ 3:åŒ…å«ç€ bar æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦:cã€‚ æ³¨æ„: æ²¡æœ‰ä»»ä½•å‡½æ•°çš„æ°”æ³¡å¯ä»¥(éƒ¨åˆ†åœ°)åŒæ—¶å‡ºçŽ°åœ¨ä¸¤ä¸ªå¤–éƒ¨ä½œç”¨åŸŸçš„æ°”æ³¡ä¸­ï¼Œå°±å¦‚åŒæ²¡æœ‰ä»»ä½•å‡½æ•°å¯ä»¥éƒ¨åˆ†åœ°åŒæ—¶å‡ºçŽ°åœ¨ä¸¤ä¸ªçˆ¶çº§å‡½æ•°ä¸­ä¸€æ ·ã€‚ å¼•æ“Žå¯¹ä½œç”¨åŸŸçš„æŸ¥æ‰¾:è¿™ä¸€éƒ¨åˆ†åœ¨ä¸Šä¸€èŠ‚ä¸­å·²ç»è¯´è¿‡,å°±æ˜¯ä»Žå½“å‰ä½œç”¨åŸŸé€çº§å‘ä¸Š,ç›´åˆ°æœ€ä¸Šå±‚çš„å…¨å±€ä½œç”¨åŸŸ.è¿™é‡Œå†è¿›ä¸€æ­¥è¿›è¡Œè®²è§£.ä½œç”¨åŸŸæŸ¥æ‰¾ä¼šåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦æ—¶åœæ­¢ã€‚åœ¨å¤šå±‚çš„åµŒå¥—ä½œç”¨åŸŸä¸­å¯ä»¥å®šä¹‰åŒåçš„æ ‡è¯†ç¬¦ï¼Œè¿™å«ä½œâ€œé®è”½æ•ˆåº”â€(å†…éƒ¨çš„æ ‡è¯†ç¬¦â€œé®è”½â€äº†å¤–éƒ¨çš„æ ‡è¯†ç¬¦)ã€‚æŠ›å¼€é®è”½æ•ˆåº”ï¼Œ ä½œç”¨åŸŸæŸ¥æ‰¾å§‹ç»ˆä»Žè¿è¡Œæ—¶æ‰€å¤„çš„æœ€å†…éƒ¨ä½œç”¨åŸŸå¼€å§‹ï¼Œé€çº§å‘å¤–æˆ–è€…è¯´å‘ä¸Šè¿›è¡Œï¼Œç›´åˆ°é‡è§ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦ä¸ºæ­¢ã€‚ æ³¨æ„: å…¨å±€å˜é‡ä¼šè‡ªåŠ¨æˆä¸ºå…¨å±€å¯¹è±¡(æ¯”å¦‚æµè§ˆå™¨ä¸­çš„ windowå¯¹è±¡)çš„å±žæ€§ï¼Œå› æ­¤å¯ä»¥ä¸ç›´æŽ¥é€šè¿‡å…¨å±€å¯¹è±¡çš„è¯æ³•åç§°ï¼Œè€Œæ˜¯é—´æŽ¥åœ°é€šè¿‡å¯¹å…¨å±€å¯¹è±¡å±žæ€§çš„å¼• ç”¨æ¥å¯¹å…¶è¿›è¡Œè®¿é—®ã€‚ä¾‹å¦‚:window.a é€šè¿‡è¿™ç§æŠ€æœ¯å¯ä»¥è®¿é—®é‚£äº›è¢«åŒåå˜é‡æ‰€é®è”½çš„å…¨å±€å˜é‡ã€‚ä½†éžå…¨å±€çš„å˜é‡å¦‚æžœè¢«é®è”½äº†ï¼Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•è¢«è®¿é—®åˆ°ã€‚ è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾åªä¼šæŸ¥æ‰¾ä¸€çº§æ ‡è¯†ç¬¦ï¼Œæ¯”å¦‚ aã€b å’Œ cã€‚å¦‚æžœä»£ç ä¸­å¼•ç”¨äº† foo.bar.bazï¼Œè¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾åªä¼šè¯•å›¾æŸ¥æ‰¾ foo æ ‡è¯†ç¬¦ï¼Œæ‰¾åˆ°è¿™ä¸ªå˜é‡åŽï¼Œå¯¹è±¡å±žæ€§è®¿é—®è§„åˆ™ä¼šåˆ†åˆ«æŽ¥ç®¡å¯¹ bar å’Œ baz å±žæ€§çš„è®¿é—®ã€‚ 2.2 æ¬ºéª—è¯æ³•æ¬ºéª—è¯æ³•: å¼•æ“Žåœ¨è¿è¡Œæ—¶æ¥â€œä¿®æ”¹â€(ä¹Ÿå¯ä»¥è¯´æ¬ºéª—)è¯æ³•ä½œç”¨åŸŸ.æˆ–è€…è¯´å°±æ˜¯åœ¨å¼•æ“Žè¿è¡Œæ—¶åŠ¨æ€åœ°ä¿®æ”¹è¯æ³•ä½œç”¨åŸŸ(æœ¬æ¥åœ¨ç¼–è¯‘è¯æ³•åŒ–å°±å·²ç»ç¡®å®šçš„). æ¬ºéª—è¯æ³•çš„ä¸¤ç§æœºåˆ¶:(ä¸‹é¢è¿™ä¸¤ç§æœºåˆ¶ç†è§£äº†è§£å³å¯,ä¸æŽ¨èå®žé™…å¼€å‘ä½¿ç”¨) 2.2.1 evalJavaScript ä¸­çš„ eval(..) å‡½æ•°å¯ä»¥æŽ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶ä¸­çš„å†…å®¹è§†ä¸ºå¥½åƒåœ¨ä¹¦å†™æ—¶å°±å­˜åœ¨äºŽç¨‹åºä¸­è¿™ä¸ªä½ç½®çš„ä»£ç ã€‚å³å°†evalæ”¾åœ¨è¯¥è¯æ³•ä½œç”¨åŸŸ,ç„¶åŽevalæºå¸¦çš„ä»£ç å°±ä¼šåŠ¨æ€åŠ å…¥åˆ°è¯¥è¯æ³•ä½œç”¨åŸŸ. é€šè¿‡ä¸‹é¢çš„ä¾‹å­åŠ æ·±ç†è§£:123456function foo(str, a) &#123; eval( str ); // æ¬ºéª—! console.log( a, b );&#125;var b = 2;foo( "var b = 3;", 1 ); // 1, 3 eval(..) è°ƒç”¨ä¸­çš„ â€œvar b = 3;â€ è¿™æ®µä»£ç ä¼šè¢«å½“ä½œæœ¬æ¥å°±åœ¨é‚£é‡Œä¸€æ ·æ¥å¤„ç†ã€‚ç”±äºŽé‚£æ®µä»£ç å£°æ˜Žäº†ä¸€ä¸ªæ–°çš„å˜é‡ bï¼Œå› æ­¤å®ƒå¯¹å·²ç»å­˜åœ¨çš„ foo(..) çš„è¯æ³•ä½œç”¨åŸŸè¿›è¡Œäº†ä¿®æ”¹ã€‚å½“ console.log(..) è¢«æ‰§è¡Œæ—¶ï¼Œä¼šåœ¨ foo(..) çš„å†…éƒ¨åŒæ—¶æ‰¾åˆ° a å’Œ bï¼Œä½†æ˜¯æ°¸è¿œä¹Ÿæ— æ³•æ‰¾åˆ°å¤–éƒ¨çš„ bã€‚å› æ­¤ä¼šè¾“å‡ºâ€œ1, 3â€è€Œä¸æ˜¯æ­£å¸¸æƒ…å†µä¸‹ä¼šè¾“å‡ºçš„â€œ1, 2â€ã€‚ æ³¨æ„: eval(..) é€šå¸¸è¢«ç”¨æ¥æ‰§è¡ŒåŠ¨æ€åˆ›å»ºçš„ä»£ç .å¯ä»¥æ®ç¨‹åºé€»è¾‘åŠ¨æ€åœ°å°†å˜é‡å’Œå‡½æ•°ä»¥å­—ç¬¦å½¢å¼æ‹¼æŽ¥åœ¨ä¸€èµ·ä¹‹åŽä¼ é€’è¿›åŽ»ã€‚ åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹,eval(â€¦)æ— æ³•ä¿®æ”¹æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚ ä¸Ževal(â€¦)ç±»ä¼¼,setTimeout(..)å’Œ setInterval(..) çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹å¯ä»¥è¢«è§£é‡Šä¸ºä¸€æ®µåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°ä»£ç ã€‚ new Function(..) å‡½æ•°çš„è¡Œä¸ºä¹Ÿå¾ˆç±»ä¼¼ï¼Œæœ€åŽä¸€ä¸ªå‚æ•°å¯ä»¥æŽ¥å—ä»£ç å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°(å‰é¢çš„å‚æ•°æ˜¯è¿™ä¸ªæ–°ç”Ÿæˆçš„å‡½æ•°çš„å½¢å‚)ã€‚è¿™ç§æž„å»ºå‡½æ•°çš„è¯­æ³•æ¯” eval(..) ç•¥å¾®å®‰å…¨ä¸€äº›ï¼Œä½†ä¹Ÿè¦å°½é‡é¿å…ä½¿ç”¨ã€‚12var sum = new Function("a", "b", "return a + b;");console.log(sum(1, 1111)); //1112 2.2.2 with(ä¸æŽ¨èå®žé™…ä½¿ç”¨)ä¾‹å­:12345678910111213141516171819function foo(obj) &#123; with (obj) &#123; a = 2; &#125;&#125;var o1 = &#123; a: 3&#125;;var o2 = &#123; b: 3&#125;;foo( o1 );console.log( o1.a ); // 2foo( o2 );console.log( o2.a ); // undefinedconsole.log( a ); // 2â€”â€”ä¸å¥½ï¼Œa è¢«æ³„æ¼åˆ°å…¨å±€ä½œç”¨åŸŸä¸Šäº†! èµ·åˆä½ ä¼šè§‰å¾—o1çš„aå±žæ€§è¢«withé‡Œçš„aè¿›è¡Œäº†è¯æ³•å¼•ç”¨è¢«é®è”½äº†æˆä¸ºäº†2.è€Œo2æ²¡æœ‰aå±žæ€§,æ­¤æ—¶withä¸èƒ½è¿›è¡Œè¯æ³•å¼•ç”¨,æ‰€ä»¥æ­¤æ—¶o2.aå°±ä¼šå˜æˆundefined.ä½†æ˜¯,ä¸ºä»€ä¹ˆæœ€åŽconsole.log(a)ä¼šä¸º2?å› ä¸ºåœ¨æ‰§è¡Œfoo(o2)æ—¶,withä¼šå¯¹å…¶ä¸­çš„a=2è¿›è¡ŒLHSæŸ¥è¯¢,ä½†å®ƒåœ¨o2ä½œç”¨åŸŸ,foo()ä½œç”¨åŸŸ,å…¨å±€ä½œç”¨åŸŸéƒ½æ²¡æ‰¾åˆ°,å› æ­¤å°±åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡aå¹¶éšåŽèµ‹å€¼2. æ€»çš„æ¥è¯´,withå°±æ˜¯å°†ä¸€ä¸ªæ²¡æœ‰æˆ–æœ‰å¤šä¸ªå±žæ€§çš„å¯¹è±¡å¤„ç†ä¸ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„è¯æ³•ä½œç”¨åŸŸï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡çš„å±žæ€§ä¹Ÿä¼šè¢«å¤„ç†ä¸ºå®šä¹‰åœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­çš„è¯æ³•æ ‡è¯†ç¬¦ã€‚ æ³¨æ„: ä½¿ç”¨ eval(..) å’Œ with çš„åŽŸå› æ˜¯ä¼šè¢«ä¸¥æ ¼æ¨¡å¼æ‰€å½±å“(é™åˆ¶)ã€‚with è¢«å®Œå…¨ç¦æ­¢ï¼Œè€Œåœ¨ä¿ç•™æ ¸å¿ƒåŠŸèƒ½çš„å‰æä¸‹ï¼Œé—´æŽ¥æˆ–éžå®‰å…¨åœ°ä½¿ç”¨ eval(..) ä¹Ÿè¢«ç¦æ­¢äº†ã€‚ 2.2.3 æ€§èƒ½JavaScript å¼•æ“Žä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œæ•°é¡¹çš„æ€§èƒ½ä¼˜åŒ–ã€‚å…¶ä¸­æœ‰äº›ä¼˜åŒ–ä¾èµ–äºŽèƒ½å¤Ÿæ ¹æ®ä»£ç çš„è¯æ³•è¿›è¡Œé™æ€åˆ†æžï¼Œå¹¶é¢„å…ˆç¡®å®šæ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å®šä¹‰ä½ç½®ï¼Œæ‰èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¿«é€Ÿæ‰¾åˆ°æ ‡è¯†ç¬¦ã€‚ä½†æ˜¯eval(..) å’Œ withä¼šåœ¨è¿è¡Œæ—¶ä¿®æ”¹æˆ–åˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œä»¥æ­¤æ¥æ¬ºéª—å…¶ä»–åœ¨ä¹¦å†™æ—¶å®šä¹‰çš„è¯æ³•ä½œç”¨åŸŸã€‚è¿™ä¹ˆåšå°±ä¼šå¯¼è‡´å¼•æ“Žæ— æ³•çŸ¥é“evalå’Œwithå®ƒä»¬å¯¹è¯æ³•ä½œç”¨åŸŸè¿›è¡Œä»€ä¹ˆæ ·çš„æ”¹åŠ¨.åªèƒ½å¯¹éƒ¨åˆ†ä¸è¿›è¡Œå¤„ç†å’Œä¼˜åŒ–!å› æ­¤å¦‚æžœä»£ç ä¸­å¤§é‡ä½¿ç”¨ eval(..) æˆ– withï¼Œé‚£ä¹ˆè¿è¡Œèµ·æ¥ä¸€å®šä¼šå˜å¾—éžå¸¸æ…¢!ã€‚ 2.3 å°ç»“ è¯æ³•ä½œç”¨åŸŸæ˜¯åœ¨ä½ ä¹¦å†™ä»£ç æ—¶å°±å·²ç»å†³å®šäº†çš„.åœ¨ç¼–è¯‘çš„ç¬¬ä¸€é˜¶æ®µè¯æ³•åˆ†æžé˜¶æ®µäº§ç”Ÿè¯æ³•ä½œç”¨åŸŸ.æ­¤æ—¶è¯æ³•ä½œç”¨åŸŸåŸºæœ¬èƒ½å¤ŸçŸ¥é“å…¨éƒ¨æ ‡è¯†ç¬¦åœ¨å“ªé‡Œä»¥åŠæ˜¯å¦‚ä½•å£°æ˜Žçš„ï¼Œä»Žè€Œèƒ½å¤Ÿé¢„æµ‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚ä½•å¯¹å®ƒ ä»¬è¿›è¡ŒæŸ¥æ‰¾ã€‚ eval(..) å’Œ withã€‚å‰è€…å¯ä»¥å¯¹ä¸€æ®µåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå£°æ˜Žçš„â€œä»£ç â€å­—ç¬¦ä¸²è¿›è¡Œæ¼”ç®—ï¼Œå¹¶å€Ÿæ­¤æ¥ä¿®æ”¹å·²ç»å­˜åœ¨çš„è¯æ³•ä½œç”¨åŸŸ(åœ¨è¿è¡Œæ—¶)ã€‚åŽè€…æœ¬è´¨ä¸Šæ˜¯é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨å½“ä½œä½œç”¨åŸŸæ¥å¤„ç†ï¼Œå°†å¯¹è±¡çš„å±žæ€§å½“ä½œä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦æ¥å¤„ç†ï¼Œä»Žè€Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¯æ³•ä½œç”¨åŸŸ(åŒæ ·æ˜¯åœ¨è¿è¡Œæ—¶)ã€‚ ä¸€èˆ¬ä¸è¦åœ¨å®žé™…ä»£ç ä¸­ä½¿ç”¨eval(â€¦)å’Œwith,å› ä¸ºä¸ä»…å±é™©,è€Œä¸”ä¼šé€ æˆæ€§èƒ½é—®é¢˜! ç¬¬ä¸‰ç«  å‡½æ•°ä½œç”¨åŸŸå’Œå—ä½œç”¨åŸŸ3.1 å‡½æ•°ä¸­çš„ä½œç”¨åŸŸ JavaScript å…·æœ‰åŸºäºŽå‡½æ•°çš„ä½œç”¨åŸŸï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ¯å£°æ˜Ž ä¸€ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸ. å‡½æ•°ä½œç”¨åŸŸçš„å«ä¹‰æ˜¯æŒ‡ï¼Œå±žäºŽè¿™ä¸ªå‡½æ•°çš„å…¨éƒ¨å˜é‡éƒ½å¯ä»¥åœ¨æ•´ä¸ªå‡½æ•°çš„èŒƒå›´å†…ä½¿ç”¨åŠå¤ç”¨(äº‹å®žä¸Šåœ¨åµŒå¥—çš„ä½œç”¨åŸŸä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨)ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯JavaScript å˜é‡å¯ä»¥æ ¹æ®éœ€è¦æ”¹å˜å€¼ç±»åž‹ã€‚ 3.2 éšè—å†…éƒ¨å®žçŽ°å› ä¸º å­çº§å‡½æ•°ä½œç”¨åŸŸå¯ä»¥ç›´æŽ¥è®¿é—®çˆ¶çº§å‡½æ•°ä½œç”¨åŸŸé‡Œçš„æ ‡è¯†ç¬¦; çˆ¶çº§å‡½æ•°ä½œç”¨åŸŸä¸èƒ½ç›´æŽ¥è®¿é—®å­çº§å‡½æ•°ä½œç”¨åŸŸé‡Œçš„æ ‡è¯†ç¬¦. æ‰€ä»¥ç”¨å‡½æ•°å£°æ˜Žå¯¹ä»£ç è¿›è¡ŒåŒ…è£…ï¼Œå®žé™…ä¸Šå°±æ˜¯æŠŠè¿™äº›ä»£ç â€œéšè—â€èµ·æ¥äº†ã€‚ ä¸ºä»€ä¹ˆè¦å°†ä»£ç è¿›è¡Œâ€éšè—â€?å› ä¸ºæœ€å°æŽˆæƒæˆ–æœ€å°æš´éœ²åŽŸåˆ™ã€‚è¿™ä¸ªåŽŸåˆ™æ˜¯æŒ‡åœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼Œåº”è¯¥æœ€å°é™åº¦åœ°æš´éœ²å¿… è¦å†…å®¹ï¼Œè€Œå°†å…¶ä»–å†…å®¹éƒ½â€œéšè—â€èµ·æ¥ï¼Œæ¯”å¦‚æŸä¸ªæ¨¡å—æˆ–å¯¹è±¡çš„ API è®¾è®¡ã€‚éšè—çš„å¥½å¤„: å®žçŽ°ä»£ç ç§æœ‰åŒ–,å‡å°‘å¤–éƒ¨å¯¹å†…éƒ¨ä»£ç çš„å¹²æ‰°,ä¿æŒå…¶ç¨³å®šæ€§. è§„é¿å†²çª: å¯ä»¥é¿å…åŒåæ ‡è¯†ç¬¦ä¹‹é—´çš„å†²çªï¼Œ ä¸¤ä¸ªæ ‡è¯†ç¬¦å¯èƒ½å…·æœ‰ç›¸åŒçš„åå­—ä½†ç”¨é€”å´ä¸ä¸€æ ·ï¼Œæ— æ„é—´å¯èƒ½é€ æˆå‘½åå†²çªã€‚å†²çªä¼šå¯¼è‡´ å˜é‡çš„å€¼è¢«æ„å¤–è¦†ç›–ã€‚é‚£ä¹ˆä¸€èˆ¬è§„é¿å†²çªçš„æ‰‹æ®µæœ‰å“ªäº›? å…¨å±€å‘½åç©ºé—´: å˜é‡å†²çªçš„ä¸€ä¸ªå…¸åž‹ä¾‹å­å­˜åœ¨äºŽå…¨å±€ä½œç”¨åŸŸä¸­ã€‚å½“ç¨‹åºä¸­åŠ è½½äº†å¤šä¸ªç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¦‚æžœå®ƒä»¬æ²¡æœ‰å¦¥å–„åœ°å°†å†…éƒ¨ç§æœ‰çš„å‡½æ•°æˆ–å˜é‡éšè—èµ·æ¥ï¼Œå°±ä¼šå¾ˆå®¹æ˜“å¼•å‘å†²çªã€‚è¿™äº›åº“é€šå¸¸ä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜Žä¸€ä¸ªåå­—è¶³å¤Ÿç‹¬ç‰¹çš„å˜é‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡è¢«ç”¨ä½œåº“çš„å‘½åç©ºé—´ï¼Œæ‰€æœ‰éœ€è¦æš´éœ²ç»™å¤–ç•Œçš„åŠŸèƒ½éƒ½ä¼šæˆä¸ºè¿™ä¸ªå¯¹è±¡(å‘½åç©ºé—´)çš„å±žæ€§ï¼Œè€Œä¸æ˜¯å°†è‡ªå·±çš„æ ‡è¯†ç¬¦æš´æ¼åœ¨é¡¶çº§çš„è¯æ³•ä½œç”¨åŸŸä¸­ã€‚ 2.æ¨¡å—ç®¡ç†: å¦å¤–ä¸€ç§é¿å…å†²çªçš„åŠžæ³•å’ŒçŽ°ä»£çš„æ¨¡å—æœºåˆ¶å¾ˆæŽ¥è¿‘ï¼Œå°±æ˜¯ä»Žä¼—å¤šæ¨¡å—ç®¡ç†å™¨ä¸­æŒ‘é€‰ä¸€ä¸ªæ¥ ä½¿ç”¨ã€‚å®žé™…ä¸Šå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„amd,commonjs,importæ¨¡å—æœºåˆ¶. 3.3 å‡½æ•°ä½œç”¨åŸŸå‡½æ•°å£°æ˜Žä¸Žå‡½æ•°è¡¨è¾¾å¼:123function foo() &#123; ...&#125; æˆ‘ä»¬çŸ¥é“å‡½æ•°fooå†…çš„å˜é‡å’Œå‡½æ•°è¢«éšè—èµ·æ¥äº†,æ˜¯ä¸ä¼šå¯¹å…¨å±€ä½œç”¨åŸŸé€ æˆæ±¡æŸ“.ä½†æ˜¯å˜é‡åfooä»ç„¶å­˜åœ¨äºŽå…¨å±€ä½œç”¨åŸŸä¸­,ä¼šé€ æˆæ±¡æŸ“.é‚£æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½é¿å…å‡½æ•°åçš„æ±¡æŸ“å‘¢?é‚£å°±æ˜¯ä½œä¸ºå‡½æ•°è¡¨è¾¾å¼,è€Œä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å‡½æ•°å£°æ˜Ž.è¿™æ ·å‡½æ•°ååªå­˜åœ¨äºŽå®ƒè‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸå†…,è€Œä¸ä¼šå­˜åœ¨äºŽå…¶çˆ¶ä½œç”¨åŸŸ,è¿™æ ·å°±æ²¡æœ‰äº†æ±¡æŸ“.ä¸¾ä¸ªå‡½æ•°å£°æ˜Žçš„ä¾‹å­:123456var a = 2;(function foo()&#123; var a = 3; console.log( a ); // 3 &#125;)(); console.log( a ); // 2 å½“æˆ‘ä»¬ç”¨()åŒ…è£¹ä¸€ä¸ªå‡½æ•°,å¹¶ç«‹å³æ‰§è¡Œ.æ­¤æ—¶è¿™ä¸ªåŒ…è£…å‡½æ•°å£°æ˜Žæ˜¯ä»Ž(functionå¼€å§‹çš„è€Œä¸æ˜¯ä»Žfunctionå…³é”®å­—å¼€å§‹.è¿™æ ·fooå°±ä¼šè¢«å½“åšä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼,è€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜Ž(å³fooä¸ä¼šå­˜åœ¨äºŽçˆ¶çº§ä½œç”¨åŸŸä¸­).å›žåˆ°ä¸Šé¢çš„ä¾‹å­ä¸­,å…¨å±€ä½œç”¨åŸŸæ˜¯è®¿é—®ä¸åˆ°fooçš„,fooåªå­˜åœ¨äºŽå®ƒè‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸä¸­. è¡¥å……: ä»€ä¹ˆæ˜¯å‡½æ•°å£°æ˜Žå’Œå‡½æ•°è¡¨è¾¾å¼é¦–å…ˆæˆ‘ä»¬å¾—äº†è§£JSå£°æ˜Žå‡½æ•°çš„ä¸‰ç§æ–¹å¼: å‡½æ•°è¡¨è¾¾å¼(Function Expression): å°†å‡½æ•°å®šä¹‰ä¸ºè¡¨è¾¾å¼è¯­å¥ï¼ˆé€šå¸¸æ˜¯å˜é‡èµ‹å€¼,ä¹Ÿå¯ä»¥æ˜¯è‡ªè°ƒç”¨å½¢å¼ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡å‡½æ•°è¡¨è¾¾å¼å®šä¹‰çš„å‡½æ•°å¯ä»¥æ˜¯å‘½åçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åçš„ã€‚å› ä¸ºå®ƒå¯ä»¥æ²¡æœ‰å‡½æ•°å,å› æ­¤å¸¸è¢«ç”¨ä½œåŒ¿åå‡½æ•°.å¦‚æžœæœ‰,å…¶å‡½æ•°åä¹Ÿåªå­˜åœ¨è‡ªèº«çš„å‡½æ•°ä½œç”¨åŸŸ.å¹¶ä¸”å‡½æ•°è¡¨è¾¾å¼ä¸èƒ½ä»¥â€œfunctionâ€å¼€å¤´.å‡½æ•°è¡¨è¾¾å¼å¯ä»¥å­˜å‚¨åœ¨å˜é‡æˆ–è€…å¯¹è±¡å±žæ€§é‡Œ. (åœ¨å‡½æ•°å£°æ˜Žå‰åŠ ä¸Šè¿ç®—ç¬¦æ˜¯å¯ä»¥å°†å…¶è½¬åŒ–ä¸ºå‡½æ•°è¡¨è¾¾å¼çš„.ä¾‹å¦‚!,+,-,().ä¸¾ä¸ªä¾‹å­:!function(){console.log(1)}()çš„ç»“æžœæ˜¯1,å¹¶ä¸ä¼šæŠ¥é”™) å‡½æ•°å£°æ˜Ž(Function Declaration): å‡½æ•°å£°æ˜Žæ˜¯ä¸€ç§ç‹¬ç«‹çš„ç»“æž„,å®ƒä¼šå£°æ˜Žä¸€ä¸ªå…·åå‡½æ•°,å¹¶å¿…é¡»ä»¥functionå¼€å¤´. ä¸”å‡½æ•°å£°æ˜Žä¼šè¿›è¡Œå‡½æ•°æå‡.ä½¿å®ƒèƒ½åœ¨å…¶æ‰€åœ¨ä½œç”¨åŸŸçš„ä»»æ„ä½ç½®è¢«è°ƒç”¨,å³åŽé¢çš„ä»£ç ä¸­å¯ä»¥å°†æ­¤å‡½æ•°é€šè¿‡å‡½æ•°åèµ‹å€¼ç»™å˜é‡æˆ–è€…å¯¹è±¡å±žæ€§. Function()æž„é€ å™¨: å³ä½¿ç”¨Functionæž„é€ å™¨åˆ›å»ºå‡½æ•°.ä¸æŽ¨èè¿™ç§ç”¨æ³•, å®¹æ˜“å‡ºé—®é¢˜123456789101112131415//Function()æž„é€ å™¨var f =new Function()// å‡½æ•°è¡¨è¾¾å¼var f = function() &#123; console.log(1); &#125;// å‡½æ•°å£°æ˜Žfunction f ()&#123; console.log(2);&#125;console.log(f())//æ€è€ƒä¸€ä¸‹,è¿™é‡Œä¼šæ‰“å°å‡ºä»€ä¹ˆ æ€Žä¹ˆåŒºåˆ†å‡½æ•°å£°æ˜Žå’Œå‡½æ•°è¡¨è¾¾å¼:çœ‹ function å…³é”®å­—å‡ºçŽ°åœ¨å£°æ˜Žä¸­çš„ä½ç½®(ä¸ä»…ä»…æ˜¯ä¸€è¡Œä»£ç ï¼Œè€Œæ˜¯æ•´ä¸ªå£°æ˜Žä¸­çš„ä½ç½®)ã€‚å¦‚æžœ function æ˜¯å£°æ˜Žä¸­çš„ç¬¬ä¸€ä¸ªè¯ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜Žï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ä¸Šä¾‹ä¸­,æ˜¯ä»Ž(å¼€å§‹è€Œä¸æ˜¯function. è¡¥å……: ä¸Šé¢è¿™æ®µæ˜¯åŽŸä¹¦çš„è§£é‡Š,æˆ‘è§‰å¾—è¿™ä¸ªè§£é‡Šå¹¶ä¸å®Œå…¨,è¿™é‡Œç»™å‡ºæˆ‘è‡ªå·±çš„è§£é‡Š. è¡¨è±¡åŒºåˆ«:å’Œå®ƒè¯´çš„ä¸€æ ·,åªè¦æ˜¯ä»¥functionå¼€å¤´è¿›è¡Œå£°æ˜Ž,å¹¶ä¸”å«æœ‰å‡½æ•°åçš„å°±ä¸€å®šæ˜¯å‡½æ•°å£°æ˜Ž. å†…åœ¨åŒºåˆ«:å…¶å®žæˆ‘åœ¨ä¸Šé¢è¡¥å……ä¸¤è€…çš„å®šä¹‰æ—¶å·²ç»è¯´å¾—å¾ˆæ¸…æ¥šäº†,æˆ‘å†å¯¹æ¯”æ€»ç»“ä¸‹. å‡½æ•°æå‡:å‡½æ•°å£°æ˜Ž,ä¼šå°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæå‡.è€Œå‡½æ•°è¡¨è¾¾å¼åˆ™ä¸ä¼šæå‡,å®ƒæ˜¯åœ¨å¼•æ“Žè¿è¡Œæ—¶è¿›è¡Œèµ‹å€¼ï¼Œä¸”è¦ç­‰åˆ°è¡¨è¾¾å¼èµ‹å€¼å®ŒæˆåŽæ‰èƒ½è°ƒç”¨ã€‚ å‡½æ•°è¡¨è¾¾å¼æ˜¯å¯ä»¥æ²¡æœ‰å‡½æ•°åçš„,å¦‚æžœæœ‰,å®ƒçš„å‡½æ•°åä¹Ÿåªå­˜åœ¨äºŽè‡ªèº«çš„ä½œç”¨åŸŸ,var f = function fun(){console.log(fun)}å…¶ä»–åœ°æ–¹æ˜¯æ²¡æœ‰çš„.è¿™ä¹Ÿé¿å…äº†å…¨å±€æ±¡æŸ“,ä¹Ÿæ–¹ä¾¿é€’å½’. 3.3.1 åŒ¿åå’Œå…·åå‡½æ•°è¡¨è¾¾å¼å¯ä»¥æ˜¯åŒ¿åçš„ï¼Œè€Œå‡½æ•°å£°æ˜Žåˆ™ä¸å¯ä»¥çœç•¥å‡½æ•°å.æœ‰å‡½æ•°åçš„å°±æ˜¯å…·åå‡½æ•°,æ²¡æœ‰å‡½æ•°åçš„å°±æ˜¯åŒ¿åå‡½æ•°. åŒ¿åå‡½æ•°çš„ç¼ºç‚¹: åŒ¿åå‡½æ•°åœ¨æ ˆè¿½è¸ªä¸­ä¸ä¼šæ˜¾ç¤ºå‡ºæœ‰æ„ä¹‰çš„å‡½æ•°åï¼Œä½¿å¾—è°ƒè¯•å¾ˆå›°éš¾ã€‚ å¦‚æžœæ²¡æœ‰å‡½æ•°åï¼Œå½“å‡½æ•°éœ€è¦å¼•ç”¨è‡ªèº«æ—¶åªèƒ½ä½¿ç”¨å·²ç»è¿‡æœŸçš„arguments.calleeå¼•ç”¨ï¼Œæ¯”å¦‚åœ¨é€’å½’ä¸­ã€‚å¦ä¸€ä¸ªå‡½æ•°éœ€è¦å¼•ç”¨è‡ªèº«çš„ä¾‹å­ï¼Œæ˜¯åœ¨äº‹ä»¶è§¦å‘åŽäº‹ä»¶ç›‘å¬å™¨éœ€è¦è§£ç»‘è‡ªèº«ã€‚ åŒ¿åå‡½æ•°çœç•¥äº†å¯¹äºŽä»£ç å¯è¯»æ€§/å¯ç†è§£æ€§å¾ˆé‡è¦çš„å‡½æ•°åã€‚ä¸€ä¸ªæè¿°æ€§çš„åç§°å¯ä»¥è®©ä»£ç ä¸è¨€è‡ªæ˜Žã€‚ æ‰€ä»¥ç»™å‡½æ•°è¡¨è¾¾å¼æŒ‡å®šä¸€ä¸ªå‡½æ•°åå¯ä»¥æœ‰æ•ˆè§£å†³ä»¥ä¸Šé—®é¢˜ã€‚å§‹ç»ˆç»™å‡½æ•°è¡¨è¾¾å¼å‘½åæ˜¯ä¸€ä¸ªæœ€ä½³å®žè·µ. PS: ä¸ªäººæ„è§æ˜¯å¦‚æžœå‡½æ•°è¡¨è¾¾å¼æœ‰èµ‹å€¼ç»™å˜é‡æˆ–å±žæ€§åæˆ–è€…å°±æ˜¯ä¸€æ¬¡æ€§è°ƒç”¨çš„.å…¶å®žæ˜¯æ²¡å¿…è¦åŠ ä¸Šå‡½æ•°å.å› ä¸ºä»£ç é‡Œå–åæœ¬æ¥å°±å¾ˆéš¾,å–ä¸å¥½åè€Œä¼šé€ æˆè¯¯è§£. 3.3.2 ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼æ¯”å¦‚ (function foo(){ .. })()ã€‚ç¬¬ä¸€ä¸ª ( ) å°†å‡½æ•°å˜æˆè¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ª ( ) æ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°ã€‚è¿™å°±æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ä¹Ÿè¢«ç§°ä¸ºIIFEï¼Œä»£è¡¨ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ (Immediately Invoked Function Expression); IIFEå¯ä»¥å…·åä¹Ÿå¯ä»¥åŒ¿å.å¥½å¤„å’Œä¸Šé¢æåˆ°çš„ä¸€æ ·.IIFEè¿˜å¯ä»¥æ˜¯è¿™ç§å½¢å¼(function(){ .. }()).è¿™ä¸¤ç§å½¢å¼åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€è‡´çš„ã€‚ 3.4 å—ä½œç”¨åŸŸå‡½æ•°ä½œç”¨åŸŸæ˜¯JavaScriptæœ€å¸¸è§çš„ä½œç”¨åŸŸå•å…ƒ,æœ‰æ—¶æˆ‘ä»¬ä»…ä¼šå°†varèµ‹å€¼å˜é‡åœ¨ifæˆ–forçš„{â€¦}å†…ä½¿ç”¨,è€Œä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨.ä½†å®ƒä»ç„¶ä¼šå¯¹å¤–å±‚çš„å‡½æ•°ä½œç”¨åŸŸé€ æˆæ±¡æŸ“.è¿™ä¸ªæ—¶å€™å°±ä¼šå¸Œæœ›èƒ½æœ‰ä¸€ä¸ªä½œç”¨åŸŸèƒ½å°†å…¶å¤–éƒ¨çš„å‡½æ•°ä½œç”¨åŸŸéš”å¼€,å£°æ˜Žçš„å˜é‡ä»…åœ¨æ­¤ä½œç”¨åŸŸæœ‰æ•ˆ.å—ä½œç”¨åŸŸ(é€šå¸¸å°±æ˜¯{â€¦}åŒ…è£¹çš„å†…éƒ¨)å°±å¯ä»¥å¸®æˆ‘ä»¬åšåˆ°è¿™ç‚¹. ä»Ž ES3 å‘å¸ƒä»¥æ¥ï¼ŒJavaScript ä¸­å°±æœ‰äº†å—ä½œç”¨åŸŸï¼Œè€Œ with å’Œ catch åˆ†å¥å°±æ˜¯å—ä½œç”¨åŸŸçš„ä¸¤ä¸ªå°ä¾‹å­ã€‚ 3.4.1 withæˆ‘ä»¬åœ¨ç¬¬ 2 ç« è®¨è®ºè¿‡ with å…³é”®å­—ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªéš¾äºŽç†è§£çš„ç»“æž„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å—ä½œç”¨åŸŸçš„ä¸€ä¸ªä¾‹å­(å—ä½œç”¨åŸŸçš„ä¸€ç§å½¢å¼)ï¼Œç”¨ with ä»Žå¯¹è±¡ä¸­åˆ›å»ºå‡ºçš„ä½œç”¨åŸŸä»…åœ¨ with å£°æ˜Žä¸­è€Œéžå¤–éƒ¨ä½œç”¨åŸŸä¸­æœ‰æ•ˆã€‚ 3.4.2 try/catchtry/catch çš„ catch åˆ†å¥ä¼šåˆ›å»ºä¸€ä¸ªå—ä½œç”¨åŸŸï¼Œå…¶ä¸­å£°æ˜Žçš„å˜é‡ä»…åœ¨ catch å†…éƒ¨æœ‰æ•ˆã€‚1234567try &#123; undefined(); // æ‰§è¡Œä¸€ä¸ªéžæ³•æ“ä½œæ¥å¼ºåˆ¶åˆ¶é€ ä¸€ä¸ªå¼‚å¸¸&#125;catch (err) &#123; console.log( err ); // èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ! &#125;console.log( err ); // ReferenceError: err not found err ä»…å­˜åœ¨ catch åˆ†å¥å†…éƒ¨ï¼Œå½“è¯•å›¾ä»Žåˆ«å¤„å¼•ç”¨å®ƒæ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚é‚£ä¹ˆå¦‚æžœæˆ‘ä»¬æƒ³ç”¨catchåˆ›å»ºä¸€ä¸ªä¸æ˜¯ä»…ä»…æŽ¥æ”¶errçš„å—ä½œç”¨åŸŸ,è¯¥æ€Žä¹ˆåšå‘¢?1234try&#123;throw 2;&#125;catch(a)&#123; console.log( a ); // 2&#125;console.log( a ); // ReferenceError è¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªå—ä½œç”¨åŸŸ,ä¸”a=2,ä»…åœ¨catchåˆ†å¥ä¸­å­˜åœ¨.åœ¨ES6ä¹‹å‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥ä½¿ç”¨å—ä½œç”¨åŸŸ. 3.4.3 letES6 å¼•å…¥äº†æ–°çš„ let å…³é”®å­—ï¼Œæä¾›äº†é™¤ var ä»¥å¤–çš„å¦ä¸€ç§å˜é‡å£°æ˜Žæ–¹å¼ã€‚let å…³é”®å­—å¯ä»¥å°†å˜é‡ç»‘å®šåˆ°æ‰€åœ¨çš„ä»»æ„ä½œç”¨åŸŸä¸­(é€šå¸¸æ˜¯ { .. } å†…éƒ¨)ã€‚ ç”¨ let å°†å˜é‡é™„åŠ åœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å—ä½œç”¨åŸŸä¸Šçš„è¡Œä¸ºæ˜¯éšå¼çš„ã€‚ä¾‹å¦‚åœ¨ifçš„{â€¦}å†…ç”¨letå£°æ˜Žä¸€ä¸ªå˜é‡.é‚£ä»€ä¹ˆæ˜¯æ˜¾å¼åœ°åˆ›å»ºå—ä½œç”¨åŸŸå‘¢?å°±æ˜¯å•ç‹¬åˆ›å»º{}æ¥ä½œä¸ºletçš„å—ä½œç”¨åŸŸ.è€Œä¸æ˜¯å€Ÿç”¨ifæˆ–è€…foræä¾›çš„{}.ä¾‹å¦‚{let a=2;console.log(a)}æ³¨æ„: ä½¿ç”¨ let è¿›è¡Œçš„å£°æ˜Žä¸ä¼šåœ¨å—ä½œç”¨åŸŸä¸­è¿›è¡Œæå‡.å—ä½œç”¨åŸŸçš„å¥½å¤„: 1,åžƒåœ¾æ”¶é›†12345678910111213function process(data)&#123; // åœ¨è¿™é‡Œåšç‚¹æœ‰è¶£çš„äº‹æƒ… &#125; var someReallyBigData=function()&#123; //dosomeing &#125; process(someReallyBigData); var btn=document.getElementById("my_button"); btn.addEventListener("click",function click(evt)&#123; alert("button click"); //å‡å¦‚æˆ‘ä»¬åœ¨è¿™é‡Œç»§ç»­è°ƒç”¨someReallyBigDataå°±ä¼šå½¢æˆé—­åŒ…,å¯¼è‡´ä¸èƒ½åžƒåœ¾å›žæ”¶(è¿™æ®µæ˜¯ä¹¦é‡Œæ²¡æœ‰,æˆ‘åŠ ä¸Šæ–¹ä¾¿ç†è§£çš„) &#125;,false); click å‡½æ•°çš„ç‚¹å‡»å›žè°ƒå¹¶ä¸éœ€è¦ someReallyBigData å˜é‡ã€‚ç†è®ºä¸Šè¿™æ„å‘³ç€å½“ process(..) æ‰§è¡ŒåŽï¼Œåœ¨å†…å­˜ä¸­å ç”¨å¤§é‡ç©ºé—´çš„æ•°æ®ç»“æž„å°±å¯ä»¥è¢«åžƒåœ¾å›žæ”¶äº†ã€‚ä½†æ˜¯ï¼Œç”±äºŽ click å‡½æ•°å½¢æˆäº†ä¸€ä¸ªè¦†ç›–æ•´ä¸ªä½œç”¨åŸŸçš„é—­åŒ…ï¼ŒJavaScript å¼•æ“Žæžæœ‰å¯èƒ½ä¾ç„¶ä¿å­˜ç€è¿™ä¸ªç»“æž„(å–å†³äºŽå…·ä½“å®žçŽ°)ã€‚ä½†æ˜¾å¼ä½¿ç”¨å—ä½œç”¨åŸŸå¯ä»¥è®©å¼•æ“Žæ¸…æ¥šåœ°çŸ¥é“æ²¡æœ‰å¿…è¦ç»§ç»­ä¿å­˜ someReallyBigData äº†: 123456789101112function process(data)&#123; // åœ¨è¿™é‡Œåšç‚¹æœ‰è¶£çš„äº‹æƒ… &#125; // åœ¨è¿™ä¸ªå—ä¸­å®šä¹‰çš„å†…å®¹å¯ä»¥é”€æ¯äº†! &#123; let someReallyBigData = &#123; .. &#125;; process( someReallyBigData ); &#125; var btn=document.getElementById("my_button"); btn.addEventListener("click",function click(evt)&#123; alert("button click"); &#125;,false); letå¾ªçŽ¯1234for (let i=0; i&lt;10; i++) &#123; console.log( i ); &#125;console.log( i ); // ReferenceError for å¾ªçŽ¯å¤´éƒ¨çš„ let ä¸ä»…å°† i ç»‘å®šåˆ°äº† for å¾ªçŽ¯çš„å—ä¸­ï¼Œäº‹å®žä¸Šå®ƒå°†å…¶é‡æ–°ç»‘å®šåˆ°äº†å¾ªçŽ¯çš„æ¯ä¸€ä¸ªè¿­ä»£ä¸­ï¼Œç¡®ä¿ä½¿ç”¨ä¸Šä¸€ä¸ªå¾ªçŽ¯è¿­ä»£ç»“æŸæ—¶çš„å€¼é‡æ–°è¿›è¡Œèµ‹å€¼ã€‚è¿™æ ·å°±é¿å…äº†iå¯¹å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸçš„æ±¡æŸ“. 3.4.4 consté™¤äº† let ä»¥å¤–ï¼ŒES6 è¿˜å¼•å…¥äº† constï¼ŒåŒæ ·å¯ä»¥ç”¨æ¥åˆ›å»ºå—ä½œç”¨åŸŸå˜é‡ï¼Œä½†å…¶å€¼æ˜¯å›ºå®šçš„(å¸¸é‡)ã€‚ä¹‹åŽä»»ä½•è¯•å›¾ä¿®æ”¹å€¼çš„æ“ä½œéƒ½ä¼šå¼•èµ·é”™è¯¯ã€‚123456789var foo = true;if (foo) &#123; var a = 2; const b = 3; // åŒ…å«åœ¨ if ä¸­çš„å—ä½œç”¨åŸŸå¸¸é‡ a = 3; // æ­£å¸¸! b = 4; // é”™è¯¯! &#125;console.log( a ); // 3console.log( b ); // ReferenceError! 3.5 å°ç»“å‡½æ•°æ˜¯ JavaScript ä¸­æœ€å¸¸è§çš„ä½œç”¨åŸŸå•å…ƒã€‚æœ¬è´¨ä¸Šï¼Œå£°æ˜Žåœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å˜é‡æˆ–å‡½æ•°ä¼šåœ¨æ‰€å¤„çš„ä½œç”¨åŸŸä¸­â€œéšè—â€èµ·æ¥ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä¸Žå¤–éƒ¨ä½œç”¨åŸŸéš”å¼€. ä½†å‡½æ•°ä¸æ˜¯å”¯ä¸€çš„ä½œç”¨åŸŸå•å…ƒã€‚å—ä½œç”¨åŸŸæŒ‡çš„æ˜¯å˜é‡å’Œå‡½æ•°ä¸ä»…å¯ä»¥å±žäºŽæ‰€å¤„çš„ä½œç”¨åŸŸï¼Œä¹Ÿå¯ä»¥å±žäºŽæŸä¸ªä»£ç å—(é€šå¸¸æŒ‡ { .. } å†…éƒ¨)å³å—ä½œç”¨åŸŸã€‚ES6ä¸­å°±æä¾›äº†letå’Œconstæ¥å¸®åŠ©åˆ›å»ºå—ä½œç”¨åŸŸ. ç¬¬å››ç«  æå‡4.1 å…ˆæœ‰é¸¡(èµ‹å€¼)è¿˜æ˜¯å…ˆæœ‰è›‹(å£°æ˜Ž)è€ƒè™‘ç¬¬ä¸€æ®µä»£ç 123a = 2;var a; console.log( a ); è¾“å‡ºç»“æžœæ˜¯2,è€Œä¸æ˜¯undefined è€ƒè™‘ç¬¬äºŒæ®µä»£ç 12console.log( a ); var a = 2; è¾“å‡ºç»“æžœæ˜¯undefined,è€Œä¸æ˜¯ReferenceErrorè€ƒè™‘å®Œä»¥ä¸Šä»£ç ,ä½ åº”è¯¥ä¼šè€ƒè™‘è¿™ä¸ªé—®é¢˜.åˆ°åº•æ˜¯å£°æ˜Ž(è›‹)åœ¨å‰ï¼Œè¿˜æ˜¯èµ‹å€¼(é¸¡)åœ¨å‰? 4.2 ç¼–è¯‘å™¨å†åº¦æ¥è¢­ç¼–è¯‘å™¨çš„å†…å®¹,å›žå¿†ä¸€ä¸‹ï¼Œå¼•æ“Žä¼šåœ¨è§£é‡Š JavaScript ä»£ç ä¹‹å‰é¦–å…ˆå¯¹å…¶è¿›è¡Œç¼–è¯‘ã€‚ç¼–è¯‘é˜¶æ®µä¸­çš„ä¸€éƒ¨åˆ†å·¥ä½œå°±æ˜¯æ‰¾åˆ°æ‰€æœ‰çš„å£°æ˜Žï¼Œå¹¶ç”¨åˆé€‚çš„ä½œç”¨åŸŸå°†å®ƒä»¬å…³è”èµ·æ¥ã€‚ ä¹‹åŽå¼•æ“Žä¼šè¯¢é—®ä½œç”¨åŸŸ,å¯¹å£°æ˜Žè¿›è¡Œèµ‹å€¼æ“ä½œ. é‚£ä¹ˆ,åœ¨ç¼–è¯‘é˜¶æ®µæ‰¾åˆ°æ‰€æœ‰çš„å£°æ˜ŽåŽ,ç¼–è¯‘å™¨åˆåšäº†ä»€ä¹ˆ?ç­”æ¡ˆå°±æ˜¯æå‡ä»¥ä¸ŠèŠ‚çš„ç¬¬ä¸€æ®µä»£ç ä¸ºä¾‹,å½“ä½ çœ‹åˆ° var a = 2; æ—¶ï¼Œå¯èƒ½ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå£°æ˜Žã€‚ä½† JavaScript å®žé™…ä¸Šä¼šå°†å…¶çœ‹æˆä¸¤ä¸ªå£°æ˜Ž:var a;å’Œa = 2;ã€‚ ç¬¬ä¸€ä¸ªå®šä¹‰å£°æ˜Žæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œçš„ã€‚ç¬¬äºŒä¸ªèµ‹å€¼å£°æ˜Žä¼šè¢«ç•™åœ¨åŽŸåœ°ç­‰å¾…æ‰§è¡Œé˜¶æ®µã€‚åœ¨ç¬¬ä¸€ä¸ªå£°æ˜Žåœ¨ç¼–è¯‘é˜¶æ®µæ—¶,ç¼–è¯‘å™¨ä¼šå¯¹var a;å£°æ˜Žè¿›è¡Œæå‡(å³æŠŠvar a;ç½®äºŽæ‰€åœ¨ä½œç”¨åŸŸçš„æœ€ä¸Šé¢).è€Œa = 2;åˆ™ä¼šä¿æŒæ‰€åœ¨ä½ç½®ä¸åŠ¨.æ­¤æ—¶ä»£ç ä¼šå˜æˆ123var a; a = 2;console.log( a ); ç”±æ­¤å¯çŸ¥,åœ¨ç¼–è¯‘é˜¶æ®µ,ç¼–è¯‘å™¨ä¼šå¯¹å£°æ˜Žè¿›è¡Œæå‡.å³å…ˆæœ‰è›‹(å£°æ˜Ž)åŽæœ‰é¸¡(èµ‹å€¼)ã€‚å“ªäº›å£°æ˜Žä¼šè¢«è¿›è¡Œæå‡? å˜é‡å£°æ˜Ž:ä¾‹å¦‚ä¸Šä¾‹ä¸­çš„var a;.ä¸åŒ…æ‹¬åŽé¢çš„a = 2;å³ä¸åŒ…å«æœ‰èµ‹å€¼æ“ä½œçš„å£°æ˜Ž. å‡½æ•°å£°æ˜Ž:æ³¨æ„æ˜¯å‡½æ•°å£°æ˜Ž,è€Œä¸æ˜¯å‡½æ•°è¡¨è¾¾å¼!(ä¸æ¸…æ¥šå¯ä»¥çœ‹å‰é¢çš„3.3èŠ‚,æˆ‘æœ‰è¯¦ç»†è¯´æ˜Ž).å‡½æ•°å£°æ˜Žæå‡,æ˜¯å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæå‡,è€Œä¸æ˜¯ä»…ä»…å‡½æ•°åçš„æå‡. 4.3 å‡½æ•°ä¼˜å…ˆå‡½æ•°å£°æ˜Žå’Œå˜é‡å£°æ˜Žéƒ½ä¼šè¢«æå‡ã€‚ä½†æ˜¯ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç»†èŠ‚(è¿™ä¸ªç»†èŠ‚å¯ä»¥å‡ºçŽ°åœ¨æœ‰å¤šä¸ªâ€œé‡å¤â€å£°æ˜Žçš„ä»£ç ä¸­)æ˜¯å‡½æ•°ä¼šé¦–å…ˆè¢«æå‡ï¼Œç„¶åŽæ‰æ˜¯å˜é‡ã€‚è€ƒè™‘ä»¥ä¸‹ä»£ç :12345678foo(); // 1var foo;function foo() &#123; console.log( 1 );&#125;foo = function() &#123; console.log( 2 );&#125;; ä¼šè¾“å‡º 1 è€Œä¸æ˜¯ 2 !è¿™ä¸ªä»£ç ç‰‡æ®µä¼šè¢«å¼•æ“Žç†è§£ä¸ºå¦‚ä¸‹å½¢å¼:1234567function foo() &#123; console.log( 1 );&#125;foo(); // 1foo = function() &#123; console.log( 2 );&#125;; æ³¨æ„ï¼Œvar foo å°½ç®¡å‡ºçŽ°åœ¨ function foo()â€¦ çš„å£°æ˜Žä¹‹å‰ï¼Œä½†å®ƒæ˜¯é‡å¤çš„å£°æ˜Ž(å› æ­¤è¢«å¿½ç•¥äº†)ï¼Œå› ä¸ºå‡½æ•°å£°æ˜Žä¼šè¢«æå‡åˆ°æ™®é€šå˜é‡ä¹‹å‰ã€‚æ³¨æ„: jsä¼šå¿½ç•¥å‰é¢å·²ç»å£°æ˜Žçš„å£°æ˜Ž(ä¸ç®¡æ˜¯å˜é‡å£°æ˜Žè¿˜æ˜¯å‡½æ•°å£°æ˜Ž,åªè¦å…¶åç§°ç›¸åŒ,åˆ™åŽç»­ä¸ä¼šå†è¿›è¡Œé‡å¤å£°æ˜Ž).ä½†æ˜¯å¯¹è¯¥å˜é‡æ–°çš„èµ‹å€¼,ä¼šè¦†ç›–ä¹‹å‰çš„å€¼.ä¸€å¥è¯æ¦‚æ‹¬:å‡½æ•°å£°æ˜Žçš„ä¼˜å…ˆçº§é«˜äºŽå˜é‡å£°æ˜Ž,ä¼šæŽ’åœ¨å®ƒå‰é¢. 4.4 å°ç»“ å¯¹äºŽvar a = 2 JavaScriptå¼•æ“Žä¼šå°†var aå’Œ a = 2å½“ä½œä¸¤ä¸ªå•ç‹¬çš„å£°æ˜Žï¼Œç¬¬ä¸€ä¸ªæ˜¯ç¼–è¯‘é˜¶æ®µçš„ä»»åŠ¡ï¼Œè€Œç¬¬äºŒä¸ªåˆ™æ˜¯æ‰§è¡Œé˜¶æ®µçš„ä»»åŠ¡ã€‚ è®ºä½œç”¨åŸŸä¸­çš„å£°æ˜Žå‡ºçŽ°åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œéƒ½å°†åœ¨ä»£ç æœ¬èº«è¢«æ‰§è¡Œå‰é¦–å…ˆè¿›è¡Œå¤„ç†ã€‚ å¯ä»¥å°†è¿™ä¸ªè¿‡ç¨‹å½¢è±¡åœ°æƒ³è±¡æˆæ‰€æœ‰çš„å£°æ˜Ž(å˜é‡å’Œå‡½æ•°)éƒ½ä¼šè¢«â€œç§»åŠ¨â€åˆ°å„è‡ªä½œç”¨åŸŸçš„æœ€é¡¶ç«¯ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæå‡ã€‚ å£°æ˜Žæœ¬èº«ä¼šè¢«æå‡ï¼Œè€ŒåŒ…æ‹¬å‡½æ•°è¡¨è¾¾å¼çš„èµ‹å€¼åœ¨å†…çš„èµ‹å€¼æ“ä½œå¹¶ä¸ä¼šæå‡(å³èµ‹å€¼æ“ä½œéƒ½ä¸ä¼šæå‡)ã€‚ æ³¨æ„:ï¼Œå½“æ™®é€šçš„ var å£°æ˜Žå’Œå‡½æ•°å£°æ˜Žæ··åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå¹¶ä¸”å£°æ˜Žç›¸åŒæ—¶(varçš„å˜é‡åå’Œå‡½æ•°åç›¸åŒæ—¶,ä¼šå¼•å‘jså¯¹é‡å¤å£°æ˜Žçš„å¿½ç•¥)!ä¸€å®šè¦æ³¨æ„é¿å…é‡å¤å£°æ˜Ž! ç¬¬äº”ç«  ä½œç”¨åŸŸé—­åŒ…5.1 å¯ç¤º JavaScriptä¸­é—­åŒ…æ— å¤„ä¸åœ¨ï¼Œä½ åªéœ€è¦èƒ½å¤Ÿè¯†åˆ«å¹¶æ‹¥æŠ±å®ƒã€‚ é—­åŒ…æ˜¯åŸºäºŽè¯æ³•ä½œç”¨åŸŸä¹¦å†™ä»£ç æ—¶æ‰€äº§ç”Ÿçš„è‡ªç„¶ç»“æžœï¼Œä½ ç”šè‡³ä¸éœ€è¦ä¸ºäº†åˆ©ç”¨å®ƒä»¬è€Œæœ‰æ„è¯†åœ°åˆ›å»ºé—­åŒ…ã€‚ 5.2 å®žè´¨é—®é¢˜ &amp;&amp; 5.3 çŽ°åœ¨æˆ‘æ‡‚äº†å› ä¸ºè¿™ä¸¤å°èŠ‚ç†è§£é€äº†å…¶å®žå‘çŽ°ä¹¦é‡Œä¹Ÿæ²¡è®²ä»€ä¹ˆ,è¿™é‡Œå°±è¿›è¡Œåˆå¹¶,å¹¶è¡¥å……æ‹“å±•æˆ‘è‡ªå·±çš„ç†è§£å’Œæ€»ç»“.ä»€ä¹ˆæ˜¯é—­åŒ…?(å¹¿ä¹‰ç‰ˆ)ä¹¦ä¸­è§£é‡Š: å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚MDNçš„è§£é‡Š: é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜Žè¯¥å‡½æ•°çš„è¯æ³•çŽ¯å¢ƒçš„ç»„åˆã€‚æˆ‘çš„è§£é‡Š(è¯¦ç»†ç‰ˆ): å¿…é¡»åŒ…å«ä¸¤ç‚¹: 1,æœ‰å‡½æ•°.ç”±äºŽå‡½æ•°è‡ªèº«çš„ç‰¹æ€§,å®ƒèƒ½è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸ.å¹¶èƒ½ä¿å­˜å¤–éƒ¨è¯æ³•ä½œç”¨åŸŸçš„å˜é‡å’Œå‡½æ•°åˆ°è‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸ. 2,æœ‰è¯¥å‡½æ•°æ‰€åœ¨çš„è¯æ³•çŽ¯å¢ƒ.å…¶å®žåœ¨JavaScriptä¸­ä»»ä½•å‡½æ•°éƒ½ä¼šå¤„åœ¨ä¸€ä¸ªè¯æ³•çŽ¯å¢ƒä¸­.ä¸ç®¡æ˜¯å…¨å±€ä½œç”¨åŸŸè¿˜æ˜¯å‡½æ•°ä½œç”¨åŸŸ. ç»¼ä¸Šç®€å•ç‰ˆå°±æ˜¯:MDNçš„è§£é‡Šé—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜Žè¯¥å‡½æ•°çš„è¯æ³•çŽ¯å¢ƒçš„ç»„åˆã€‚è¿˜å¯ä»¥ç»§ç»­å»¶ä¼¸æˆæžç®€ç‰ˆ:JavaScriptä¸­çš„å‡½æ•°å°±ä¼šå½¢æˆé—­åŒ…ã€‚Tips: æ³¨æ„åˆ°ä¸Šé¢å¯¹è¯æ³•ä½œç”¨åŸŸå’Œè¯æ³•çŽ¯å¢ƒä¸¤è¯çš„åˆ†å¼€ä½¿ç”¨äº†å—?1,é‡Œæ­¤æ—¶å‡½æ•°è¿˜æ²¡è¢«æ‰§è¡Œ,æ‰€ä»¥ä½¿ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸå³é™æ€ä½œç”¨åŸŸ.2,é‡Œ,æ­¤æ—¶å‡½æ•°è¢«æ‰§è¡Œ,æ­¤æ—¶è¯æ³•ä½œç”¨åŸŸå°±ä¼šå˜æˆè¯æ³•çŽ¯å¢ƒ(åŒ…å«é™æ€ä½œç”¨åŸŸä¸ŽåŠ¨æ€ä½œç”¨åŸŸ).æ‰€ä»¥å…¶å®žMDNçš„è§£é‡Šå…¶å®žæ›´å‡†ç¡®ä¸€ç‚¹, æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨æ—¶æ‰€è¯´çš„é—­åŒ…(ç‹­ä¹‰ç‰ˆ,ä¸¥æ ¼æ„ä¹‰ä¸Šçš„):ä¸ºäº†ä¾¿äºŽå¯¹é—­åŒ…ä½œç”¨åŸŸçš„è§‚å¯Ÿå’Œä½¿ç”¨.æˆ‘ä»¬å®žé™…ä½¿ç”¨æ—¶ä¼šå°†é—­åŒ…çš„å‡½æ•°ä½œç”¨åŸŸæš´éœ²ç»™å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–.ä¹Ÿå°±æ˜¯æœ¬ä¹¦ä¸€ç›´å¼ºè°ƒçš„é—­åŒ…å‡½æ•°éœ€è¦åœ¨å®ƒæœ¬èº«çš„è¯æ³•ä½œç”¨åŸŸä»¥å¤–æ‰§è¡Œ.ä½œè€…è®¤ä¸ºç¬¦åˆè¿™ä¸ªæ¡ä»¶æ‰ç§°å¾—ä¸Šæ˜¯çœŸæ­£çš„é—­åŒ…(ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨å¸¸è¯´çš„â€™ä½¿ç”¨é—­åŒ…â€™,å¹¶ä¸”ä½¿ç”¨ä»»ä½•å›žè°ƒå‡½æ•°å…¶å®žä¹Ÿæ˜¯é—­åŒ…).æ‰€ä»¥ç‹­ä¹‰ç‰ˆå°±æ˜¯:é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜Žè¯¥å‡½æ•°çš„è¯æ³•çŽ¯å¢ƒçš„ç»„åˆ,å¹¶ä¸”å°†é—­åŒ…çš„å‡½æ•°ä½œç”¨åŸŸæš´éœ²ç»™å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–. é—­åŒ…æš´éœ²å‡½æ•°ä½œç”¨åŸŸçš„ä¸‰ç§æ–¹å¼:ä¸‹é¢éƒ¨åˆ†æ˜¯ä¹¦ä¸­æ²¡æœ‰çš„,æ˜¯è‡ªå·±å®žé™…ä½¿ç”¨æ—¶çš„æ€»ç»“,å¹¶ä¸”ç¬¦åˆè¿™ä¸‰ç§å½¢å¼ä¹‹ä¸€çš„å°±æ˜¯æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨æ—¶æ‰€è¯´çš„é—­åŒ…(ç‹­ä¹‰ç‰ˆ) 1,é€šè¿‡å¤–éƒ¨å‡½æ•°çš„å‚æ•°è¿›è¡Œæš´éœ². 1234567891011function foo() &#123; var a = 2; function bar() &#123; baz(a) //é€šè¿‡å¤–éƒ¨å‡½æ•°çš„å‚æ•°è¿›è¡Œæš´éœ² &#125; bar(); &#125;;function baz(val) &#123; console.log( val ); // 2 &#125;foo(); 2,é€šè¿‡å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡è¿›è¡Œæš´éœ² 12345678910var val;function foo() &#123; var a = 2; function bar() &#123; val=a //é€šè¿‡å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡è¿›è¡Œæš´éœ² &#125; bar(); &#125;;foo();console.log(val) //2 3,é€šè¿‡returnç›´æŽ¥å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæš´éœ² 123456789function foo() &#123; var a = 2; function bar() &#123; console.log(a) &#125; return bar //é€šè¿‡returnç›´æŽ¥å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæš´éœ²&#125;;var val=foo();val() //2 å…³äºŽé—­åŒ…çš„å†…å­˜æ³„éœ²é—®é¢˜:é¦–å…ˆå¿…é¡»å£°æ˜Žä¸€ç‚¹:ä½¿ç”¨é—­åŒ…å¹¶ä¸ä¸€å®šä¼šé€ æˆå†…å­˜æ³„éœ²,åªæœ‰ä½¿ç”¨é—­åŒ…ä¸å½“æ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ².(åæ§½:é¢è¯•å¾ˆå¤šæ–°äººæ—¶,å¼ å£å°±è¯´é—­åŒ…ä¼šé€ æˆå†…å­˜æ³„éœ²)ä¸ºä»€ä¹ˆé—­åŒ…å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ²å‘¢?åŽŸå› å°±æ˜¯ä¸Šé¢æåˆ°çš„,å› ä¸ºå®ƒä¸€èˆ¬ä¼šæš´éœ²è‡ªèº«çš„ä½œç”¨åŸŸç»™å¤–éƒ¨ä½¿ç”¨.å¦‚æžœä½¿ç”¨ä¸å½“,å°±å¯èƒ½å¯¼è‡´è¯¥å†…å­˜ä¸€ç›´è¢«å ç”¨,æ— æ³•è¢«JSçš„åžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶.å°±é€ æˆäº†å†…å­˜æ³„éœ².æ³¨æ„: å³ä½¿é—­åŒ…é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰,é—­åŒ…ä»ç„¶ä¼šéšå¼åœ°å¼•ç”¨å®ƒæ‰€åœ¨ä½œç”¨åŸŸé‡Œçš„æ‰€ç”¨å˜é‡. æ­£å› ä¸ºè¿™ä¸ªéšè—çš„ç‰¹ç‚¹,é—­åŒ…ç»å¸¸ä¼šå‘ç”Ÿä¸æ˜“å‘çŽ°çš„å†…å­˜æ³„æ¼é—®é¢˜.å¸¸è§å“ªäº›æƒ…å†µä½¿ç”¨é—­åŒ…ä¼šé€ æˆå†…å­˜æ³„éœ²: 1,ä½¿ç”¨å®šæ—¶å™¨æœªåŠæ—¶æ¸…é™¤.å› ä¸ºè®¡æ—¶å™¨åªæœ‰å…ˆåœæ­¢æ‰ä¼šè¢«å›žæ”¶.æ‰€ä»¥å†³åŠžæ³•å¾ˆç®€å•,å°†å®šæ—¶å™¨åŠæ—¶æ¸…é™¤,å¹¶å°†é€ æˆå†…å­˜çš„å˜é‡èµ‹å€¼ä¸ºnull(å˜æˆç©ºæŒ‡é’ˆ) 2,ç›¸äº’å¾ªçŽ¯å¼•ç”¨.è¿™æ˜¯ç»å¸¸å®¹æ˜“çŠ¯çš„é”™è¯¯,å¹¶ä¸”ä¹Ÿä¸å®¹æ˜“å‘çŽ°.ä¸¾ä¸ªæ —å­:12345678function foo() &#123; var a = &#123;&#125;; function bar() &#123; console.log(a); &#125;; a.fn = bar; return bar; &#125;; è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªa çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¢«å†…éƒ¨å‡½æ•°barå¼•ç”¨ã€‚ç„¶åŽï¼Œaåˆ›å»ºäº†ä¸€ä¸ªå±žæ€§fnæŒ‡å‘äº†barï¼Œæœ€åŽè¿”å›žäº†innerFn()ã€‚è¿™æ ·å°±å½¢æˆäº†barå’Œaçš„ç›¸äº’å¾ªçŽ¯å¼•ç”¨.å¯èƒ½æœ‰äººè¯´baré‡Œä¸ä½¿ç”¨console.log(a)ä¸å°±æ²¡æœ‰å¼•ç”¨äº†å—å°±ä¸ä¼šé€ æˆå†…å­˜æ³„éœ²äº†.NONONO,barä½œä¸ºä¸€ä¸ªé—­åŒ…,å³ä½¿å®ƒå†…éƒ¨ä»€ä¹ˆéƒ½æ²¡æœ‰,fooä¸­çš„æ‰€æœ‰å˜é‡éƒ½è¿˜æ˜¯éšä½¿åœ°è¢« baræ‰€å¼•ç”¨ã€‚è¿™ä¸ªçŸ¥è¯†ç‚¹æ˜¯æˆ‘å‰é¢å¿˜è®°æåˆ°çš„,ä¹Ÿæ˜¯ä¹¦ä¸­æ²¡æœ‰æåˆ°çš„.ç®—äº†æˆ‘çŽ°åœ¨åŠ åˆ°å‰é¢åŽ»å§.æ‰€ä»¥å³ä½¿barå†…ä»€ä¹ˆéƒ½æ²¡æœ‰è¿˜æ˜¯é€ æˆäº†å¾ªçŽ¯å¼•ç”¨,é‚£çœŸæ­£çš„è§£å†³åŠžæ³•å°±æ˜¯,ä¸è¦å°†a.fn = bar. 3,å°†é—­åŒ…å¼•ç”¨åˆ°å…¨å±€å˜é‡ä¸Š.å› ä¸ºå…¨å±€å˜é‡æ˜¯åªæœ‰å½“é¡µé¢è¢«å…³é—­çš„æ—¶å€™æ‰ä¼šè¢«å›žæ”¶. 4,åœ¨é—­åŒ…ä¸­å¯¹DOMè¿›è¡Œä¸å½“çš„å¼•ç”¨.è¿™ä¸ªå¸¸è§äºŽè€IEæµè§ˆå™¨,çŽ°ä»£æµè§ˆå™¨å·²ç»é•¿å¤§äº†,å·²ç»å­¦ä¼šäº†è‡ªå·±å¤„ç†è¿™ç§æƒ…å†µäº†.è¿™é‡Œå°±ä¸èµ˜è¿°äº†.æƒ³çŸ¥é“çš„å¯ä»¥è‡ªè¡Œé—®è°·å¨˜å’Œåº¦å¨˜. æ€»è€Œè¨€ä¹‹,è§£å†³åŠžæ³•å°±æ˜¯ä½¿é—­åŒ…çš„èƒ½æ­£å¸¸å¼•ç”¨,èƒ½è¢«æ­£å¸¸å›žæ”¶.å¦‚æžœå®žåœ¨ä¸è¡Œ,å°±æ˜¯åœ¨ä½¿ç”¨å®ŒåŽ,æ‰‹åŠ¨å°†å˜é‡èµ‹å€¼null,å¼ºè¡Œè¿›è¡Œåžƒåœ¾å›žæ”¶. 5.4 å¾ªçŽ¯å’Œé—­åŒ…çœ‹å¦‚ä¸‹ä¾‹å­:12345for (var i=1; i&lt;=5; i++) &#123; setTimeout( function timer() &#123; console.log( i ); &#125;, i*1000 );&#125; æˆ‘ä»¬æœŸæœ›çš„ç»“æžœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ä½†å®žé™…ç»“æžœæ˜¯,è¿™æ®µä»£ç åœ¨è¿è¡Œæ—¶ä¼šä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘çŽ‡è¾“å‡ºäº”æ¬¡ 6ã€‚(å…³äºŽä¹¦é‡Œçš„è§£é‡Š,æˆ‘è§‰å¾—æœ‰ç‚¹è¯´å¤æ‚äº†,æ²¡è¯´åˆ°ç‚¹å­ä¸Š,ä¸‹é¢æ˜¯æˆ‘çš„è§£é‡Š.)ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·çš„ç»“æžœ?timeræ¯«æ— ç–‘é—®æ˜¯ä¸€ä¸ªé—­åŒ…,å®ƒæ˜¯å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨çš„å˜é‡i.åœ¨è¿›è¡Œforå¾ªçŽ¯æ—¶,timer()ä¼šè¢«é‡å¤æ‰§è¡Œ5æ¬¡,ä¹Ÿå°±æ˜¯å®ƒä¼š console.log( i )5æ¬¡.(å…³é”®éƒ¨åˆ†æ¥äº†!)è¿™5æ¬¡iå…¶å®žæ˜¯åŒä¸€ä¸ªi.å®ƒæ˜¯æ¥è‡ªäºŽå¤–éƒ¨ä½œç”¨åŸŸ,å³foré‡Œé¢å£°æ˜Žçš„i.åœ¨è¯æ³•ä½œç”¨åŸŸä¸­å˜é‡iåªå¯èƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„å€¼,å³å˜é‡å’Œå®ƒçš„å€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„.ä¸ä¼šå˜åŒ–çš„.é‚£è¿™ä¸ªå€¼åˆ°åº•æ˜¯å¤šå°‘å‘¢?è¿™ä¸ªå€¼å°±æ˜¯æœ€ç»ˆå€¼! içš„æœ€ç»ˆå€¼å°±æ˜¯6å³forå¾ªçŽ¯å®ŒåŽiçš„å€¼.å½“å¼•æ“Žæ‰§è¡Œconsole.log( i )æ—¶,å®ƒä¼šè¯¢é—®iæ‰€å¯¹åº”çš„ä½œç”¨åŸŸ,é—®å®ƒiçš„å€¼æ˜¯å¤šå°‘.è¿™ä¸ªæ—¶å€™ä½œç”¨åŸŸè¿›è¡ŒRHSæŸ¥è¯¢å¾—åˆ°çš„ç»“æžœå°±æ˜¯æœ€ç»ˆå€¼6. ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šä»¥ä¸ºåˆ†åˆ«è¾“å‡º1~5?å› ä¸ºåœ¨forå¾ªçŽ¯ä¸­,æˆ‘ä»¬é”™ä»¥ä¸ºæ¯ä¸€æ¬¡å¾ªçŽ¯æ—¶,å‡½æ•°æ‰€è¾“å‡ºçš„iæ˜¯æ ¹æ®å¾ªçŽ¯åŠ¨æ€å˜åŒ–çš„.å³æ˜¯1~5ç´¯åŠ å˜åŒ–çš„.ä½†å®žé™…ä¸Šå®ƒæ‰€è®¿é—®çš„iæ˜¯åŒä¸€ä¸ªå›ºå®šä¸å˜çš„å€¼,å³æœ€ç»ˆå€¼6.å¯èƒ½ä½ ä¼šæœ‰è¿™æ ·çš„ç–‘æƒ‘,é‚£æˆ‘å¾ªçŽ¯è¿˜æœ‰æ„ä¹‰å—?iå…¶å®žä¸€å¼€å§‹å°±ç¡®å®šæ˜¯6äº†.æ²¡æœ‰å˜åŒ–è¿‡!é”™!iå˜åŒ–è¿‡,å®ƒçš„ç¡®æ˜¯ä»Ž1é€æ­¥å¢žåŠ åˆ°6çš„.åªæ˜¯å¤–éƒ¨ä½œç”¨åŸŸçš„iå€¼åªå¯èƒ½æ˜¯å¾ªçŽ¯å®ŒåŽçš„æœ€ç»ˆå€¼,å¹¶ä¸”å‡½æ•°timer()å¹¶æ²¡æœ‰ä¿å­˜æ¯æ¬¡iå˜åŒ–çš„å€¼.å®ƒåªæ˜¯è®¿é—®äº†å¤–éƒ¨ä½œç”¨åŸŸçš„iå€¼å³æœ€ç»ˆçš„å€¼6. OKæˆ‘ä»¬çŸ¥é“äº†å‡ºé”™çš„åœ°æ–¹,å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æŠŠæ¯æ¬¡içš„å€¼ä¿å­˜åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸä¸­.æŽ¥ä¸‹æ¥,çœ‹ä¸‹è¿™ä¸ªæ”¹è¿›çš„ä¾‹å­ç»“æžœæ˜¯å¤šå°‘.1234567for (var i=1; i&lt;=5; i++) &#123; (function() &#123; setTimeout( function timer() &#123; console.log( i ); &#125;, i*1000 ); &#125;)();&#125; å®ƒçš„æœ€ç»ˆå€¼ä»ç„¶æ˜¯5ä¸ª6.ä¸ºä»€ä¹ˆ?æˆ‘ä»¬æ¥åˆ†æžä¸‹,ä¸Šä¾‹ä¸­,å®ƒç”¨äº†ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹äº†å®šæ—¶å™¨,å¹¶ç«‹å³æ‰§è¡Œ.åœ¨è¿›è¡Œforå¾ªçŽ¯æ—¶,ä¼šåˆ›é€ 5ä¸ªç‹¬ç«‹çš„å‡½æ•°ä½œç”¨åŸŸ(ç”±åŒ¿åå‡½æ•°åˆ›å»ºçš„,å› ä¸ºå®ƒæ˜¯é—­åŒ…å‡½æ•°).ä½†æ˜¯è¿™5ä¸ªç‹¬ç«‹çš„å‡½æ•°ä½œç”¨åŸŸé‡Œçš„iä¹Ÿå…¨éƒ½æ˜¯å¯¹å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨.å³å®ƒä»¬è®¿é—®çš„éƒ½æ˜¯içš„æœ€ç»ˆå€¼6.è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„,æˆ‘ä»¬è¦çš„æ˜¯5ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,å¹¶ä¸”æ¯ä¸ªä½œç”¨åŸŸéƒ½ä¿å­˜ä¸€ä¸ªâ€å½“æ—¶â€içš„å€¼. è§£å†³åŠžæ³•:é‚£æˆ‘ä»¬è¿™æ ·æ”¹å†™.123456789for (var i=1; i&lt;=5; i++) &#123; (function () &#123; var j =i; setTimeout( function timer() &#123; console.log( j ); &#125;, j*1000 ); &#125;)();&#125;//è¿™æ¬¡ç»ˆäºŽç»“æžœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ è¿™æ ·æ”¹å†™åŽ,åŒ¿åå‡½æ•°æ¯æ¬¡éƒ½é€šè¿‡jä¿å­˜äº†æ¯æ¬¡iå€¼,è¿™æ ·iå€¼å°±é€šè¿‡jä¿å­˜åœ¨äº†ç‹¬ç«‹çš„ä½œç”¨åŸŸä¸­.æ³¨æ„æ­¤æ—¶ä¿å­˜çš„iå€¼æ˜¯â€™å½“æ—¶â€™çš„å€¼,å¹¶ä¸æ˜¯å¾ªçŽ¯å®ŒåŽçš„æœ€ç»ˆå€¼.è¿™æ ·å¾ªçŽ¯å®ŒåŽ,å®žé™…ä¸Šå°±åˆ›å»ºäº†5ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,æ¯ä¸ªä½œç”¨åŸŸéƒ½ä¿å­˜äº†ä¸€ä¸ªâ€™å½“æ—¶â€™içš„å€¼(é€šè¿‡j).å½“å¼•æ“Žæ‰§è¡Œconsole.log( j )è¯¢é—®å…¶å¯¹åº”çš„ç‹¬ç«‹ä½œç”¨åŸŸæ—¶,å¾—åˆ°çš„å€¼å°±æ˜¯â€™å½“æ—¶â€™ä¿å­˜çš„å€¼,å†ä¹Ÿä¸æ˜¯6äº†.æˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€å†™ä¸ºè¿™æ ·:12345678for (var i=1; i&lt;=5; i++) &#123; (function(j) &#123; setTimeout( function timer() &#123; console.log( j ); &#125;, j*1000 ); &#125;)(i);&#125;//ç»“æžœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ åˆ©ç”¨å—ä½œç”¨åŸŸè¿›è¡Œè§£å†³:åœ¨es6ä¸­,æˆ‘ä»¬ä¸ä»…å¯ä»¥ä½¿ç”¨å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨letå£°æ˜Žæ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å—ä½œç”¨åŸŸ(åœ¨{}å†…).æ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·æ”¹å†™:123456for (let i=1; i&lt;=5; i++) &#123; setTimeout( function timer() &#123; console.log( i ); &#125;, i*1000 );&#125;//ç»“æžœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ è¿™æ ·æ”¹å†™,åœ¨æ¯æ¬¡å¾ªçŽ¯æ—¶,letéƒ½ä¼šå¯¹iè¿›è¡Œå£°æ˜Ž.å¹¶é€šè¿‡å¾ªçŽ¯è‡ªå¸¦çš„{}åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å—ä½œç”¨åŸŸ.å¹¶ä¸”letå£°æ˜Žçš„i,ä¿å­˜äº†â€™å½“æ—¶â€™içš„å€¼åœ¨å½“å‰å—ä½œç”¨åŸŸé‡Œ.å› æ­¤å½“å¼•æ“Žæ‰§è¡Œconsole.log( i )æ—¶,å®ƒä¼šè¯¢é—®å¯¹åº”çš„å—ä½œç”¨åŸŸä¸Šiçš„å€¼,å¾—åˆ°çš„ç»“æžœå°±æ˜¯â€™å½“æ—¶â€™ä¿å­˜çš„å€¼. å»¶ä¼¸:å®žé™…ä¸Šå—ä½œç”¨åŸŸå¯ä»¥ç§°å¾—ä¸Šä¸€ä¸ªâ€™ä¼ªâ€™é—­åŒ…(ä¹‹æ‰€ä»¥æ˜¯ä¼ª,æ˜¯å› ä¸ºé—­åŒ…è§„å®šäº†åªèƒ½æ˜¯å‡½æ•°).å› ä¸ºå®ƒå‡ ä¹Žæ‹¥æœ‰é—­åŒ…çš„æ‰€æœ‰ç‰¹æ€§.å®ƒä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,åŒæ ·å¤–éƒ¨ä½œç”¨åŸŸä¸èƒ½è®¿é—®å—ä½œç”¨åŸŸçš„å˜é‡.ä½†å—ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸ.ä¸¾ä¸ªæ —å­:123456789function foo() &#123; var a = 2; &#123; //é€šè¿‡&#123;&#125; æ˜¾ç¤ºè¡¨ç¤ºå—ä½œç”¨åŸŸ let b = a; console.log('å—ä½œç”¨åŸŸå†…',b) //2 &#125; console.log('å—ä½œç”¨åŸŸå¤–',b) //b is not defined&#125;foo() è¯´äº†ç›¸åŒç‚¹,è¯´è¯´ä¸åŒç‚¹:1,ä¿å­˜å˜é‡åˆ°å—ä½œç”¨åŸŸ,å¿…é¡»é€šè¿‡letå£°æ˜Ž.2,å—ä½œç”¨åŸŸä¸èƒ½å’Œå‡½æ•°ä¸€æ ·æœ‰åç§°(å‡½æ•°å)å¾ˆå¤šä¸æ–¹ä¾¿ä½¿ç”¨é—­åŒ…æˆ–è€…æ¯”è¾ƒéº»çƒ¦çš„æ—¶å€™,æ˜¯å¯ä»¥è€ƒè™‘é€šè¿‡å—ä½œç”¨åŸŸè¿›è¡Œè§£å†³. æ€»ç»“ä¸€ä¸‹ä¸€èˆ¬ä»€ä¹ˆæ—¶å€™è€ƒè™‘ä½¿ç”¨é—­åŒ…:è¿™éƒ¨åˆ†ä¹Ÿæ˜¯è‡ªå·±å·¥ä½œä½¿ç”¨çš„æ€»ç»“,å¦‚æžœæœ‰è¡¥å……æˆ–è€…ä¸å¯¹çš„åœ°æ–¹,æ¬¢è¿Žç•™è¨€æŒ‡æ­£. 1,éœ€è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸå¹¶éšè—ä¸€äº›å˜é‡æˆ–å‡½æ•°,ä¸è¢«å¤–éƒ¨ä½¿ç”¨;æˆ–è€…æƒ³ä¿å­˜ä¸€äº›å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡æˆ–å‡½æ•°åˆ°è¿™ä¸ªç‹¬ç«‹ä½œç”¨åŸŸ. 2,åªæƒ³æš´éœ²ä¸€éƒ¨åˆ†è‡ªèº«ä½œç”¨åŸŸçš„å˜é‡æˆ–å‡½æ•°ç»™å¤–éƒ¨ä½¿ç”¨. 5.5 æ¨¡å—é¦–å…ˆçœ‹ä¸‹é¢çš„ä¾‹å­:123456789101112131415161718function CoolModule() &#123; var something = "cool"; var another = [1, 2, 3]; function doSomething() &#123; console.log( something ); &#125; function doAnother() &#123; console.log( another.join( " ! " ) ); &#125; return &#123; doSomething: doSomething, doAnother: doAnother &#125;; &#125;var foo = CoolModule(); foo.doSomething(); // coolfoo.doAnother(); // 1 ! 2 ! 3 é¦–å…ˆæˆ‘ä»¬å¯¹ä¸Šé¢è¿™æ®µä»£ç è¿›æˆåˆ†è¡Œåˆ†æž:ç§æœ‰æ•°æ®å˜é‡:something, anotherå†…éƒ¨å‡½æ•°:doSomething, doAnotherç›´æŽ¥è¯´ç»“è®º,ä¸Šé¢è¿™ä¸ªä¾‹å­å°±æ˜¯æ¨¡å—æ¨¡å¼.å®ƒreturnè¿”å›žçš„è¿™ä¸ªå¯¹è±¡ä¹Ÿå°±æ˜¯æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå…¬å…±API(è‡³å°‘ä¹¦ä¸­æ˜¯è¿™æ ·ç§°å‘¼çš„).CoolModule()å°±æ˜¯æ¨¡å—æž„é€ å™¨æˆ–è€…å«æ¨¡å—å‡½æ•°.æ³¨æ„: è¿™é‡Œçš„æ¨¡å—å’Œæˆ‘ä»¬æ‰€è¯´çš„æ¨¡å—åŒ–å¼€å‘ä¸æ˜¯å®Œå…¨ä¸€æ ·çš„! æ¨¡å—ä¸ä¸€å®šéžè¦æ˜¯æ ‡å‡†å¯¹è±¡,ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°,å‡½æ•°æœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹è±¡,å‡½æ•°ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„å±žæ€§. ä¹¦ä¸­æœ‰è¿™æ ·ä¸€å¥è¯CoolModule() åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»è¦é€šè¿‡è°ƒç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªæ¨¡å—å®žä¾‹ã€‚å¦‚æžœä¸æ‰§è¡Œå¤–éƒ¨å‡½æ•°ï¼Œå†…éƒ¨ä½œç”¨åŸŸå’Œé—­åŒ…éƒ½æ— æ³•è¢«åˆ›å»ºã€‚æˆ‘è§‰å¾—è¿™å¥è¯æœ‰å¿…è¦å»¶ä¼¸è¯´ä¸€ä¸‹.å‡½æ•°è°ƒç”¨ä¸€æ¬¡å°±ä¼šåˆ›å»ºä¸€ä¸ªè¯¥å‡½æ•°çš„ä½œç”¨åŸŸ(ä¸è°ƒç”¨å°±ä¸ä¼šåˆ›å»º),åŒ…æ‹¬åˆ›å»ºå®ƒé‡Œé¢çš„å˜é‡å’Œå‡½æ•°. æ¨¡å—æ¨¡å¼:æ¨¡å—æ¨¡å¼éœ€è¦å…·å¤‡ä»¥ä¸‹2ä¸ªæ¡ä»¶:(è¿™é‡Œç»“åˆä¸Šé¢çš„ä¾‹å­,å¯¹ä¹¦ä¸­çš„å®šä¹‰è¿›è¡Œè¯´æ˜Žæ–¹ä¾¿ç†è§£) 1, å¿…é¡»æœ‰å¤–éƒ¨çš„å°é—­å‡½æ•°(å³CoolModule)ï¼Œè¯¥å‡½æ•°å¿…é¡»è‡³å°‘è¢«è°ƒç”¨ä¸€æ¬¡(æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—å®žä¾‹â€“&gt;æ¨¡å—å®žä¾‹æŒ‡çš„å°±æ˜¯å‡½æ•°returnè¿”å›žçš„å¯¹è±¡)ã€‚ 2, å°é—­å‡½æ•°(å³CoolModule)å¿…é¡»è¿”å›žè‡³å°‘ä¸€ä¸ªå†…éƒ¨å‡½æ•°(å³doSomething, doAnother)ï¼Œè¿™æ ·å†…éƒ¨å‡½æ•°æ‰èƒ½åœ¨ç§æœ‰ä½œç”¨åŸŸä¸­å½¢æˆé—­åŒ…ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®æˆ–è€…ä¿®æ”¹ç§æœ‰çš„çŠ¶æ€(å³something, another)ã€‚ æ¨¡å—:è¡¨é¢ä¸Šçœ‹ç”±æ¨¡å—å‡½æ•°(ä¾‹å­ä¸­çš„CoolModule)æ‰€è¿”å›žçš„å¯¹è±¡å°±æ˜¯æ¨¡å—.ä½†æ¨¡å—è¿˜å¿…é¡»è¿˜åŒ…å«æ¨¡å—å‡½æ•°çš„å†…éƒ¨å‡½æ•°(å³é—­åŒ…å‡½æ•°).åªæœ‰åŒ…å«äº†æ‰èƒ½çœŸæ­£ç§°å¾—ä¸Šæ˜¯æ¨¡å—.æ‰å¼ºè°ƒä¸€æ¬¡è¿™é‡Œçš„æ¨¡å—ä¸Žæ¨¡å—åŒ–é‡Œçš„æ¨¡å—æ˜¯æœ‰åŒºåˆ«çš„,ä¹Ÿä¸æ˜¯nodejsé‡Œçš„æ¨¡å—. æ¨¡å—å‡½æ•°:æ¨¡å—å‡½æ•°ä¹Ÿå°±æ˜¯æ¨¡å—æž„é€ å™¨,ä¾‹å­ä¸­çš„CoolModule().ä¸€èˆ¬å®ƒæœ‰ä¸¤ä¸ªå¸¸è§ç”¨æ³•. é€šè¿‡æŽ¥å—å‚æ•°,å¯¹è¾“å‡ºçš„æ¨¡å—è¿›è¡Œä¿®æ”¹. é€šè¿‡æ·»åŠ æ¨¡å—é‡Œæ·»åŠ ç›¸å…³çš„å†…éƒ¨å‡½æ•°,å®žçŽ°å¯¹è¾“å‡ºæ¨¡å—æ•°æ®çš„å¢žåˆ æ”¹æŸ¥.(ä¹¦ä¸­ç”¨å‘½åå°†è¦ä½œä¸ºå…¬å…±APIè¿”å›žçš„å¯¹è±¡.æˆ‘è§‰å¾—å‘½ååº”è¯¥æ˜¯ç”¨é”™äº†,åº”è¯¥æ˜¯ä¿®æ”¹å³å¢žåˆ æ”¹æŸ¥æ›´å¥½) 5.5.1 çŽ°ä»£çš„æ¨¡å—æœºåˆ¶å¤§å¤šæ•°æ¨¡å—ä¾èµ–åŠ è½½å™¨ / ç®¡ç†å™¨æœ¬è´¨ä¸Šéƒ½æ˜¯å°†è¿™ç§æ¨¡å—å®šä¹‰å°è£…è¿›ä¸€ä¸ªå‹å¥½çš„ APIã€‚ä¸‹é¢å°±ä»‹ç»ä¸€ä¸ªç®€å•çš„æ¨¡å—ç®¡ç†å™¨å®žçŽ°ä¾‹å­(å¯¹ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œé€è¡Œè§£è¯»):1234567891011121314151617181920212223242526272829303132//é¦–å…ˆå®žä¾‹åŒ–æˆ‘ä»¬çš„æ¨¡å—ç®¡ç†å™¨,å–åmyModulesvar MyModules=(function Manager() &#123; //ä½œä¸ºæˆ‘ä»¬çš„æ¨¡å—æ± ,ä¿å­˜æ‰€æœ‰å®šä¹‰çš„æ¨¡å— var modules=&#123;&#125;; /** *ä½¿ç”¨ç±»ä¼¼AMDçš„æ–¹å¼å®šä¹‰æ–°æ¨¡å—ï¼ŒæŽ¥æ”¶3ä¸ªå‚æ•° *name:æ¨¡å—å *deps:æ•°ç»„å½¢å¼è¡¨ç¤ºæ‰€ä¾èµ–çš„å…¶ä»–æ¨¡å— *impl:æ¨¡å—åŠŸèƒ½çš„å®žçŽ° **/ function define(name,deps,impl) &#123; //éåŽ†ä¾èµ–æ¨¡å—æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œä»Žç¨‹åºæ± ä¸­å–å‡ºå¯¹åº”çš„æ¨¡å—,å¹¶èµ‹å€¼. //å¾ªçŽ¯å®ŒåŽ,depsç”±ä¿å­˜æ¨¡å—åçš„æ•°ç»„å˜æˆäº†ä¿å­˜å¯¹åº”æ¨¡å—çš„æ•°ç»„. for (var i=0;i&lt;deps.length;i++) &#123; deps[i]=modules[deps[i]]; &#125; //å°†æ–°æ¨¡å—å­˜å‚¨è¿›æ¨¡å—æ± ï¼Œå¹¶é€šè¿‡applyæ³¨å…¥å®ƒæ‰€ä¾èµ–çš„æ¨¡å—(å³éåŽ†åŽçš„deps,å®žé™…ä¸Šå°±æ˜¯ç”¨depsä½œä¸ºimplçš„å…¥å‚) modules[name]=impl.apply(impl,deps); &#125; //ä»Žæ¨¡å—æ± ä¸­å–å‡ºå¯¹åº”æ¨¡å— function get (name) &#123; return modules[name]; &#125; //æš´éœ²å®šä¹‰æ¨¡å—å’ŒèŽ·å–æ¨¡å—çš„ä¸¤ä¸ªapi return &#123; define: define, get: get &#125;&#125;)() è¯´æ˜Ž: åŽé¢ä¹¦ä¸­è¯´äº†è¿™ä¹ˆä¸€å¥ä¸ºäº†æ¨¡å—çš„å®šä¹‰å¼•å…¥äº†åŒ…è£…å‡½æ•°(å¯ä»¥ä¼ å…¥ä»»ä½•ä¾èµ–),è¿™é‡ŒåŒ…è£…å‡½æ•°æŒ‡çš„æ˜¯Manger(),åŒæ ·ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ŠèŠ‚æåˆ°çš„æ¨¡å—å‡½æ•°.é¦–å…ˆè¯´æ˜Žä¸‹ä»€ä¹ˆæ˜¯åŒ…è£…å‡½æ•°.ä¾‹å¦‚å‡½æ•°Aå½“ä¸­è¿˜æœ‰ä¸€ä¸ªå‡½æ•°B.å½“æˆ‘ä»¬æƒ³è¦è°ƒç”¨å‡½æ•°Bçš„æ—¶å€™,åˆ™éœ€è¦å…ˆè°ƒç”¨å‡½æ•°A.é‚£ä¹ˆå‡½æ•°Aå°±å«åšå‡½æ•°Bçš„åŒ…è£…å‡½æ•°.ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æƒ³è°ƒç”¨æŸä¸ªæ¨¡å—æ—¶,éœ€è¦å…ˆè°ƒç”¨å®ƒçš„åŒ…è£…å‡½æ•°å³è¿™é‡Œçš„Manger().æŽ¥ç€æ˜¯åŽé¢é‚£å¥å¹¶ä¸”å°†è¿”å›žå€¼ï¼Œä¹Ÿå°±æ˜¯æ¨¡å—çš„ APIï¼Œå‚¨å­˜åœ¨ä¸€ä¸ªæ ¹æ®åå­—æ¥ç®¡ç†çš„æ¨¡å—åˆ—è¡¨ä¸­ã€‚æ³¨æ„è¿™é‡Œçš„è¿”å›žå€¼æ˜¯æŒ‡implçš„è¿”å›žå€¼. æŽ¥ç€çœ‹é€šè¿‡ç®¡ç†å™¨æ¥å®šä¹‰å’Œä½¿ç”¨æ¨¡å— 123456789101112131415161718192021222324252627282930313233MyModules.define('bar',[],function () &#123; function hello (who) &#123; return "Let me introduce: " + who; &#125; //è¿”å›žå…¬å…±API å³æä¾›ä¸€ä¸ªhelloçš„æŽ¥å£ return &#123; hello:hello &#125;;&#125;);MyModules.define('foo',['bar'],function (bar) &#123; var hungry = "hippo"; functin awesome () &#123; //è¿™é‡Œçš„barä¸ºè¿”å›žæ¨¡å—barè¿”å›žçš„å…¬å…±API console.log( bar.hello( hungry ).toUpperCase() ); &#125; //è¿”å›žå…¬å…±API å³æä¾›ä¸€ä¸ªawesomeçš„æŽ¥å£ return &#123; awesome:awesome &#125;&#125;)var bar=MyModules.get('bar');//é€šè¿‡ç®¡ç†å™¨èŽ·å–æ¨¡å—'bar'var foo=MyModules.get('foo');//é€šè¿‡ç®¡ç†å™¨èŽ·å–æ¨¡å—'foo'console.log(//è°ƒç”¨æ¨¡å—barçš„helloæŽ¥å£ bar.hello( "hippo" ) ); // Let me introduce: hippo //è°ƒç”¨æ¨¡å—fooçš„awesomeæŽ¥å£foo.awesome(); // LET ME INTRODUCE: HIPPO è¿™èŠ‚çš„ä¸»è¦å†…å®¹è¿˜æ˜¯äº†è§£çŽ°åœ¨æ˜¯å¦‚ä½•å¯¹æ¨¡å—è¿›è¡Œä¸€ä¸ªè§„èŒƒå¤„ç†.ä¸»è¦æ˜¯ä¸¤éƒ¨åˆ†å†…å®¹,ä¸€ä¸ªæ˜¯é€šè¿‡åç§°å’Œä¾èµ–åˆç†å®šä¹‰æ¨¡å—å¹¶å‚¨å­˜.å¦ä¸€ä¸ªåˆ™æ˜¯é€šè¿‡åç§°å¯¹å­˜å‚¨çš„æ¨¡å—çš„è°ƒç”¨.å…¶å®žè¿˜å¯ä»¥å†å¢žåŠ ä¸€ä¸ªåˆ é™¤æ¨¡å—çš„æ–¹æ³•. 5.5.2 æœªæ¥çš„æ¨¡å—æœºåˆ¶ok,è¿™èŠ‚è¯´çš„æ¨¡å—,å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ¨¡å—åŒ–å¼€å‘.å¹¶ä¸”ä¸»è¦æåˆ°çš„å°±æ˜¯ES6é‡Œå¸¸ç”¨çš„import.æ²¡ä»€ä¹ˆå¥½è¯´çš„. 5.6 å°ç»“åæ§½: åŒä¸€ä¸ªå‡½æ•°æ¦‚å¿µåœ¨5.5è¿™ä¸€ä¸ªå°èŠ‚é‡Œ,å±…ç„¶æ¢ç€èŠ±æ ·è¹¦å‡ºäº†ä¸‰ä¸ªåå­—!ä¸€ä¼šå«æ¨¡å—æž„é€ å™¨!ä¸€ä¼šå«æ¨¡å—å‡½æ•°!ä»¥åŠæœ€åŽçš„åŒ…è£…å‡½æ•°!æ¯å˜åŒ–ä¸€æ¬¡,éƒ½å¾—æƒ³ä¸€éå®ƒæŒ‡çš„æ˜¯å•¥!çœŸçš„æ˜¯æ— åŠ›åæ§½äº†!!!! é—­åŒ…:å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸï¼Œå¹¶ä¸”å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œè¿™æ—¶ å°±äº§ç”Ÿäº†é—­åŒ…ã€‚ æ¨¡å—æœ‰ä¸¤ä¸ªä¸»è¦ç‰¹å¾: (1)ä¸ºåˆ›å»ºå†…éƒ¨ä½œç”¨åŸŸè€Œè°ƒç”¨äº†ä¸€ä¸ªåŒ…è£…å‡½æ•°(æ¨¡å—æž„é€ å™¨çš„å®žä¾‹åŒ–,ä¸æƒ³å¯¹é¢‘ç¹æ¢åå­—åæ§½äº†); (2)åŒ…è£…å‡½æ•°çš„è¿”å›žå€¼(ä¹Ÿå°±æ˜¯æ¨¡å—)å¿…é¡»è‡³å°‘åŒ…æ‹¬ä¸€ä¸ªå¯¹å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šåˆ›å»ºæ¶µç›–æ•´ä¸ªåŒ…è£…å‡½æ•°å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ã€‚ ç¬¬äºŒéƒ¨åˆ†ç¬¬ä¸€ç«  å…³äºŽthis1.1 ä¸ºä»€ä¹ˆè¦ç”¨thiså› ä¸ºthis æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥éšå¼â€œä¼ é€’â€ä¸€ä¸ªå¯¹è±¡(å³ä¸Šä¸‹æ–‡å¯¹è±¡)å¼•ç”¨ï¼Œå› æ­¤å¯ä»¥å°† API è®¾è®¡å¾—æ›´åŠ ç®€æ´å¹¶ä¸”æ˜“äºŽå¤ç”¨ã€‚ 1.2 è¯¯è§£ä¸‹é¢ä¸¤ç§å¸¸è§çš„å¯¹äºŽ this çš„è§£é‡Šéƒ½æ˜¯é”™è¯¯çš„(çœ‹çœ‹å°±å¥½,å°±ä¸è¿‡å¤šè§£è¯»äº†,ä»¥å…å¢žåŠ äº†å¯¹é”™è¯¯çš„å°è±¡)ã€‚ 1.2.1 æŒ‡å‘è‡ªèº«äººä»¬å¾ˆå®¹æ˜“æŠŠ this ç†è§£æˆæŒ‡å‘å‡½æ•°è‡ªèº«. å…·åå‡½æ•°ï¼Œå¯ä»¥åœ¨å®ƒå†…éƒ¨å¯ä»¥ä½¿ç”¨å‡½æ•°åæ¥å¼•ç”¨è‡ªèº«è¿›è¡Œé€’å½’,æ·»åŠ å±žæ€§ç­‰ã€‚(è¿™ä¸ªçŸ¥è¯†ç‚¹å…¶å®žåœ¨ç¬¬ä¸‰ç« æè¿‡,æ—¢ç„¶è¿™é‡Œåˆæäº†ä¸€é,æˆ‘ä¹Ÿå†è¯´ä¸€é.)ä¾‹å¦‚:123function foo() &#123; foo.count = 4; // foo æŒ‡å‘å®ƒè‡ªèº«&#125; åŒ¿åå‡½æ•°å¦‚æžœæƒ³è¦è°ƒç”¨è‡ªèº«åˆ™,éœ€è¦ä½¿ç”¨arguments.calleeä¸è¿‡è¿™ä¸ªå±žæ€§åœ¨ES5ä¸¥æ ¼æ¨¡å¼ä¸‹å·²ç»ç¦æ­¢äº†,ä¹Ÿä¸å»ºè®®ä½¿ç”¨.è¯¦æƒ…å¯ä»¥æŸ¥çœ‹MDNçš„è¯´æ˜Ž. 1.2.2 å®ƒçš„ä½œç”¨åŸŸåˆ‡è®°: this åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸æŒ‡å‘å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸã€‚ä½ ä¸èƒ½ä½¿ç”¨ this æ¥å¼•ç”¨ä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸå†…éƒ¨çš„ä¸œè¥¿ã€‚ è¿™éƒ¨åˆ†åªéœ€è®°ä½è¿™ä¸€æ®µè¯å°±è¡Œ. ç»ˆæžç–‘é—®: JavaScripté‡Œçš„ä½œç”¨åŸŸåˆ°åº•æ˜¯å¯¹è±¡å—?è¿™å°èŠ‚æœ€ä»¤æˆ‘åœ¨æ„çš„æ˜¯é‡Œé¢è¿™å¥è¯â€åœ¨ JavaScript å†…éƒ¨ï¼Œä½œç”¨åŸŸç¡®å®žå’Œå¯¹è±¡ç±»ä¼¼ï¼Œå¯è§çš„æ ‡è¯†ç¬¦éƒ½æ˜¯å®ƒçš„å±žæ€§ã€‚ä½†æ˜¯ä½œç”¨åŸŸâ€œå¯¹è±¡â€æ— æ³•é€šè¿‡ JavaScriptä»£ç è®¿é—®ï¼Œå®ƒå­˜åœ¨äºŽJavaScript å¼•æ“Žå†…éƒ¨ã€‚â€å®ƒè®©æˆ‘æƒ³èµ·äº†æœ€å¼€å§‹å­¦JSçš„ä¸€ä¸ªç–‘é—®,JavaScripté‡Œçš„ä½œç”¨åŸŸåˆ°åº•æ˜¯å¯¹è±¡å—.è™½ç„¶â€åœ¨JSé‡Œä¸‡ç‰©çš†å¯¹è±¡â€.ä½†æ˜¯ä½œç”¨åŸŸç»™äººçš„æ„Ÿè§‰å´ä¸åƒæ˜¯ä¸€ä¸ªå¯¹è±¡.æ›´åƒæ˜¯ä¸€ä¸ªèŒƒå›´,ç”±å‡½æ•°çš„{}å›´åŸŽçš„èŒƒå›´,é™åˆ¶äº†å…¶ä¸­å˜é‡çš„è®¿é—®.ä½†ç›´è§‰å‘Šè¯‰æˆ‘å®ƒå’Œå¯¹è±¡è¿˜æ˜¯åº”è¯¥æœ‰ç‚¹è”ç³»çš„.ç›´åˆ°è¯»åˆ°ä¹¦ä¸­çš„è¿™æ®µè¯,æ›´åŠ å°è¯äº†æˆ‘çš„æ„Ÿè§‰.åœ¨JavaScripté‡Œ,ä½œç”¨åŸŸå…¶å®žæ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å¯¹è±¡,ä½œç”¨åŸŸé‡Œæ‰€æœ‰å¯è§çš„æ ‡è¯†ç¬¦éƒ½æ˜¯å®ƒçš„å±žæ€§.åªæ˜¯ä½œç”¨åŸŸå¯¹è±¡å¹¶ä¸èƒ½é€šè¿‡JavaScriptä»£ç è¢«æˆ‘ä»¬è®¿é—®,å®ƒåªå­˜åœ¨äºŽJavaScriptå¼•æ“Žå†…éƒ¨.æ‰€ä»¥ä½œç”¨åŸŸä½œä¸ºä¸€ä¸ªâ€å¯¹è±¡â€æ˜¯ç»å¸¸è¢«æˆ‘ä»¬å¿½ç•¥. 1.3 thisåˆ°åº•æ˜¯ä»€ä¹ˆthis æ˜¯åœ¨è¿è¡Œæ—¶(runtime)è¿›è¡Œç»‘å®šçš„ï¼Œå¹¶ä¸æ˜¯åœ¨ç¼–å†™æ—¶ç»‘å®šï¼Œå®ƒçš„ä¸Šä¸‹æ–‡(å¯¹è±¡)å–å†³äºŽå‡½æ•°è°ƒç”¨æ—¶çš„å„ç§æ¡ä»¶ã€‚this çš„ç»‘å®šå’Œå‡½æ•°å£°æ˜Žçš„ä½ç½®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªå–å†³äºŽå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚ å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ´»åŠ¨è®°å½•(æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡)ã€‚è¿™ä¸ªè®°å½•ä¼šåŒ…å«å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨(è°ƒç”¨æ ˆ)ã€å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ã€ä¼ å…¥çš„å‚æ•°ç­‰ä¿¡æ¯ã€‚this å°±æ˜¯è®°å½•çš„å…¶ä¸­ä¸€ä¸ªå±žæ€§ï¼Œä¼šåœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç”¨åˆ°ã€‚(PS:æ‰€ä»¥thiså¹¶ä¸ç­‰ä»·äºŽæ‰§è¡Œä¸Šä¸‹æ–‡) 1.4 å°ç»“ å­¦ä¹  this çš„ç¬¬ä¸€æ­¥æ˜¯æ˜Žç™½ this æ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ä¹Ÿä¸æŒ‡å‘å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ this å®žé™…ä¸Šæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶å‘ç”Ÿçš„ç»‘å®šï¼Œå®ƒæŒ‡å‘ä»€ä¹ˆå®Œå…¨å–å†³äºŽå‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨(å…³äºŽthisä½ å¿…é¡»è®°ä½çš„è¯)ã€‚ ç¬¬äºŒç«  thiså…¨é¢è§£æž2.1 è°ƒç”¨ä½ç½®é€šè¿‡ä¸ŠèŠ‚æˆ‘ä»¬çŸ¥é“,thisçš„ç»‘å®šä¸Žå‡½æ•°çš„è°ƒç”¨ä½ç½®æœ‰å…³.é‚£è°ƒç”¨ä½ç½®æ˜¯ä»€ä¹ˆ.è°ƒç”¨ä½ç½®å°±æ˜¯å‡½æ•°åœ¨ä»£ç ä¸­è¢«è°ƒç”¨çš„ä½ç½®(è€Œä¸æ˜¯å£°æ˜Žçš„ä½ç½®)ã€‚ è¦å¯»æ‰¾è°ƒç”¨ä½ç½®,æœ€é‡è¦çš„æ˜¯è¦åˆ†æžè°ƒç”¨æ ˆ(å°±æ˜¯ä¸ºäº†åˆ°è¾¾å½“å‰æ‰§è¡Œä½ç½®æ‰€è°ƒç”¨çš„æ‰€æœ‰å‡½æ•°)ã€‚æˆ‘ä»¬å…³å¿ƒçš„è°ƒç”¨ä½ç½®å°±åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„å‰ä¸€ä¸ªè°ƒç”¨ä¸­ã€‚PS:è°ƒç”¨æ ˆå…¶å®žæ˜¯ä¸€ä¸ªè§£é‡Šèµ·æ¥æœ‰ç‚¹å¤æ‚çš„æ¦‚å¿µ.è¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šè§£é‡Š,è¿™é‡ŒæŽ¨èä¸€ç¯‡æ–‡ç« ,è§£é‡Šå¾—ä¸é”™. è¿™èŠ‚ä¹¦é‡Œçš„ä¾‹å­è§£é‡Šå¾—ä¸é”™,è¿™é‡Œå°±ä¸å¤åˆ¶ä»£ç äº†.å…¶å®žåˆ†æžè°ƒç”¨æ ˆåªæ˜¯ä¸ºäº†åœ¨è¿è¡Œæ—¶æ‰¾åˆ°æˆ‘ä»¬å…³å¿ƒçš„å‡½æ•°åˆ°åº•åœ¨å“ªé‡Œå’Œè¢«è°è°ƒç”¨äº†. ä½†æ˜¯å®žé™…åˆ«å†™ä»£ç æ—¶,å…¶å®žå¹¶ä¸ä¼šåˆ†æžå¾—è¿™ä¹ˆæ¸…æ¥šçš„,æˆ‘ä»¬è¿˜æ˜¯åªéœ€è®°ä½thisçš„æŒ‡å‘å°±æ˜¯æˆ‘ä»¬è°ƒç”¨è¯¥å‡½æ•°çš„ä¸Šä¸‹æ–‡å¯¹è±¡.æ„æ€å°±æ˜¯æˆ‘ä»¬åœ¨å“ªé‡Œè°ƒç”¨è¯¥å‡½æ•°,thiså°±æŒ‡å‘å“ªé‡Œ.å¹¶ä¸”æŸ¥çœ‹è°ƒç”¨æ ˆè¿˜å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·,åªéœ€åœ¨ç–‘æƒ‘çš„ä»£ç ä¸Šä¸€è¡ŒåŠ ä¸Šdebuggerå³å¯.æµè§ˆå™¨åœ¨è°ƒè¯•æ¨¡å¼æ—¶,æˆ‘ä»¬å°±å¯ä»¥åœ¨è°ƒç”¨åˆ—è¡¨é‡ŒæŸ¥çœ‹è°ƒç”¨æ ˆ.æˆ‘ä»¬ä¸€èˆ¬ä¹Ÿä»…åœ¨æŸ¥æ‰¾bugæ—¶,ä¼šä½¿ç”¨è¯¥æ–¹æ³•. 2.2 ç»‘å®šè§„åˆ™åœ¨æ‰¾åˆ°è°ƒç”¨ä½ç½®åŽ,åˆ™éœ€è¦åˆ¤å®šä»£ç å±žäºŽä¸‹é¢å››ç§ç»‘å®šè§„åˆ™ä¸­çš„å“ªä¸€ç§.ç„¶åŽæ‰èƒ½å¯¹thisè¿›è¡Œç»‘å®š.æ³¨æ„: thisç»‘å®šçš„æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡,å¹¶ä¸æ˜¯å‡½æ•°è‡ªèº«ä¹Ÿä¸æ˜¯å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ 2.2.1 é»˜è®¤ç»‘å®šä»€ä¹ˆæ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨:å¯¹å‡½æ•°ç›´æŽ¥ä½¿ç”¨è€Œä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°å¼•ç”¨è¿›è¡Œè°ƒç”¨.ç®€å•ç‚¹ä¸€ä¸ªå‡½æ•°ç›´æŽ¥æ˜¯func()è¿™æ ·è°ƒç”¨,å‰é¢ä»€ä¹ˆéƒ½æ²¡æœ‰.ä¸åŒäºŽé€šè¿‡å¯¹è±¡å±žæ€§è°ƒç”¨ä¾‹å¦‚obj.func(),ä¹Ÿæ²¡æœ‰é€šè¿‡newå…³é”®å­—new Function();ä¹Ÿæ²¡æœ‰é€šè¿‡apply,bind,callå¼ºåˆ¶æ”¹å˜thisæŒ‡å‘.é»˜è®¤ç»‘å®š: å½“è¢«ç”¨ä½œç‹¬ç«‹å‡½æ•°è°ƒç”¨æ—¶ï¼ˆä¸è®ºè¿™ä¸ªå‡½æ•°åœ¨å“ªè¢«è°ƒç”¨,ä¸ç®¡å…¨å±€è¿˜æ˜¯å…¶ä»–å‡½æ•°å†…ï¼‰ï¼Œthisé»˜è®¤æŒ‡å‘åˆ°windowï¼›æ³¨æ„: å¦‚æžœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼(strict mode)ï¼Œé‚£ä¹ˆå…¨å±€å¯¹è±¡å°†æ— æ³•ä½¿ç”¨é»˜è®¤ç»‘å®šï¼Œå› æ­¤ this ä¼šç»‘å®šåˆ° undefined. 2.2.2 éšå¼ç»‘å®šéšå¼ç»‘å®š: å‡½æ•°è¢«æŸä¸ªå¯¹è±¡æ‹¥æœ‰æˆ–è€…åŒ…å«.ä¹Ÿå°±æ˜¯å‡½æ•°è¢«ä½œä¸ºå¯¹è±¡çš„å±žæ€§æ‰€å¼•ç”¨.ä¾‹å¦‚obj.func().æ­¤æ—¶thisä¼šç»‘å®šåˆ°è¯¥å¯¹è±¡ä¸Š.éšå¼ä¸¢å¤±: ä¸ç®¡æ˜¯é€šè¿‡å‡½æ•°åˆ«åæˆ–æ˜¯å°†å‡½æ•°ä½œä¸ºå…¥å‚é€ æˆçš„éšå¼ä¸¢å¤±.åªéœ€æ‰¾åˆ°å®ƒçœŸæ­£çš„è°ƒç”¨ä½ç½®,å¹¶ä¸”å‡½æ•°å‰æ²¡æœ‰ä»»ä½•ä¿®é¥°ä¹Ÿæ²¡æœ‰æ˜¾å¼ç»‘å®š(ä¸‹èŠ‚ä¼šè®²åˆ°)(éžä¸¥æ ¼æ¨¡å¼ä¸‹).é‚£ä¹ˆthisåˆ™ä¼šè¿›è¡Œé»˜è®¤ç»‘å®š,æŒ‡å‘window.æ³¨æ„: å®žé™…å·¥ä½œä¸­,å¤§éƒ¨åˆ†thisä½¿ç”¨é”™è¯¯éƒ½æ˜¯ç”±å¯¹éšå¼ä¸¢å¤±çš„ä¸ç†è§£é€ æˆçš„.è®°ä½å‡½æ•°è°ƒç”¨å‰æ²¡æœ‰ä»»ä½•ä¿®é¥°å’Œæ˜¾å¼ç»‘å®š(å…¶å®žå°±æ˜¯callã€applyã€bind),thiså°±æŒ‡å‘window 2.2.3 æ˜¾å¼ç»‘å®šåœ¨åˆ†æžéšå¼ç»‘å®šæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä¸€ä¸ªå¯¹è±¡å†…éƒ¨åŒ…å«ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„å±žæ€§ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå±žæ€§é—´æŽ¥å¼•ç”¨å‡½æ•°ï¼Œä»Žè€ŒæŠŠ this é—´æŽ¥(éšå¼)ç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚å¦‚æžœæˆ‘ä»¬ä¸æƒ³åœ¨å¯¹è±¡å†…éƒ¨åŒ…å«å‡½æ•°å¼•ç”¨ï¼Œè€Œæƒ³åœ¨æŸä¸ªå¯¹è±¡ä¸Šå¼ºåˆ¶è°ƒç”¨å‡½æ•°ï¼Œæ­¤æ—¶åˆ™éœ€è¦æ˜¾å¼ç»‘å®š.æ˜¾å¼ç»‘å®š: å¯ä»¥ç›´æŽ¥æŒ‡å®š this çš„ç»‘å®šå¯¹è±¡ï¼Œè¢«ç§°ä¹‹ä¸ºæ˜¾å¼ç»‘å®šã€‚åŸºæœ¬ä¸Šå°±æ˜¯æˆ‘ä»¬å¸¸ä½¿ç”¨çš„callã€applyã€bindæ–¹æ³•éƒ½æ˜¯æ˜¾å¼ç»‘å®š.(å¦‚æžœè¿™ä¸‰ä¸ªæ–¹æ³•ä¸èƒ½ç†Ÿç»ƒä½¿ç”¨çš„,å»ºè®®æ‰¾åº¦å¨˜æˆ–è€…è°·å¨˜å­¦ä¹ åŽ,å†çœ‹è¿™èŠ‚.)æ³¨æ„:å¦‚æžœä½ ä¼ å…¥äº†ä¸€ä¸ªåŽŸå§‹å€¼(å­—ç¬¦ä¸²ç±»åž‹ã€å¸ƒå°”ç±»åž‹æˆ–è€…æ•°å­—ç±»åž‹)æ¥å½“ä½œ this çš„ç»‘å®šå¯¹ è±¡ï¼Œè¿™ä¸ªåŽŸå§‹å€¼ä¼šè¢«è½¬æ¢æˆå®ƒçš„å¯¹è±¡å½¢å¼(ä¹Ÿå°±æ˜¯new String(..)ã€new Boolean(..)æˆ–è€… new Number(..))ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œè£…ç®±â€ã€‚ ç¡¬ç»‘å®š: ä½¿ç”¨callã€applyã€bindæ–¹æ³•å¼ºåˆ¶æ˜¾å¼åœ°å°†thisè¿›è¡Œç»‘å®š,ç§°ä¹‹ä¸ºç¡¬ç»‘å®šã€‚ç¡¬ç»‘å®šçš„å…¸åž‹åº”ç”¨åœºæ™¯å°±æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…è£¹å‡½æ•°(å…¶å®žå°±æ˜¯å¸¸è¯´çš„å°è£…å‡½æ•°)ï¼Œä¼ å…¥æ‰€æœ‰çš„å‚æ•°å¹¶è¿”å›žæŽ¥æ”¶åˆ°çš„æ‰€æœ‰å€¼.åœ¨å°è£…å‡½æ•°ä¸­,æˆ‘ä»¬å¸¸ä½¿ç”¨apply.ä¸€æ–¹é¢æ˜¯å› ä¸ºå®ƒå¯ä»¥æ‰‹åŠ¨ç»‘å®šthis,æ›´é‡è¦çš„æ˜¯å› ä¸ºå¯ä»¥ç”¨applyçš„ç¬¬äºŒä¸ªå‚æ•°,æ–¹ä¾¿åœ°æ³¨å…¥æ‰€æœ‰ä¼ å…¥çš„å‚æ•°.ä¾‹å¦‚ä¹‹å‰æåˆ°çš„modules[name]=impl.apply(impl,deps).å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ä¼ å…¥çš„å‚æ•°æœ‰å¤šå°‘ä¸ª,ä½†æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ä¸€ä¸ªdepså°†å…¶å…¨éƒ¨æ³¨å…¥.å¦ä¸€ä¸ªå¸¸ç”¨çš„æ˜¯foo.apply( null,argue)å½“æˆ‘ä»¬å°†applyçš„ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸ºnullæ—¶,æ­¤æ—¶thiså°±ä¼šé»˜è®¤ç»‘å®šåˆ°window.åˆ‡è®°ä½¿ç”¨è¿™ç§ç”¨æ³•æ—¶ç¡®ä¿å‡½æ•°fooå†…æ²¡æœ‰ä½¿ç”¨this. å¦åˆ™å¾ˆå¯èƒ½ä¼šé€ æˆå…¨å±€æ±¡æŸ“.å¦‚æžœæ˜¯ç¬¬ä¸‰æ–¹åº“çš„å‡½æ•°å°±å»ºè®®ä¸è¦ä½¿ç”¨äº†,å› ä¸ºä½ ä¸çŸ¥é“åˆ«äººçš„å‡½æ•°æ˜¯å¦ä½¿ç”¨äº†this(å…³äºŽè¿™éƒ¨åˆ†å†…å®¹,ä¸‹èŠ‚ä¼šç»§ç»­æåˆ°).è¿˜æœ‰ä¸€ç§å¸¸ç”¨å°±æ˜¯foo.call( this).è¿™æ ·fooé‡Œçš„thiséƒ½ä¼šæŒ‡å‘å½“å‰è°ƒç”¨çš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒ. APIè°ƒç”¨çš„â€œä¸Šä¸‹æ–‡â€: ç¬¬ä¸‰æ–¹åº“çš„è®¸å¤šå‡½æ•°ï¼Œä»¥åŠ JavaScript è¯­è¨€å’Œå®¿ä¸»çŽ¯å¢ƒä¸­è®¸å¤šæ–°çš„å†…ç½®å‡½æ•°ï¼Œéƒ½æä¾›äº†ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œä¸Šä¸‹æ–‡â€(context)ï¼Œå…¶ä½œç”¨å’Œ bind(..) ä¸€æ ·ï¼Œç¡®ä¿ä½ çš„å›žè°ƒå‡½æ•°ä½¿ç”¨æŒ‡å®šçš„ thisã€‚ 2.2.4 newç»‘å®šJavaScript ä¸­ new çš„æœºåˆ¶å®žé™…ä¸Šå’Œé¢å‘ç±»çš„è¯­è¨€å®Œå…¨ä¸åŒã€‚åœ¨ JavaScript ä¸­ï¼Œæž„é€ å‡½æ•°åªæ˜¯ä¸€äº› ä½¿ç”¨ new æ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸ä¼šå±žäºŽæŸä¸ªç±»ï¼Œä¹Ÿä¸ä¼šå®žä¾‹åŒ–ä¸€ä¸ªç±»ã€‚å®žé™…ä¸Šï¼Œ å®ƒä»¬ç”šè‡³éƒ½ä¸èƒ½è¯´æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ç±»åž‹ï¼Œå®ƒä»¬åªæ˜¯è¢« new æ“ä½œç¬¦è°ƒç”¨çš„æ™®é€šå‡½æ•°è€Œå·²ã€‚å®žé™…ä¸Šå¹¶ä¸å­˜åœ¨æ‰€è°“çš„â€œæž„é€ å‡½æ•°â€ï¼Œåªæœ‰å¯¹äºŽå‡½æ•°çš„â€œæž„é€ è°ƒç”¨â€ã€‚ ä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…è¯´å‘ç”Ÿæž„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œã€‚ 1,åˆ›å»º(æˆ–è€…è¯´æž„é€ )ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚ 2,è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ[[åŽŸåž‹]]è¿žæŽ¥ã€‚ 3,è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„thisã€‚ 4,å¦‚æžœå‡½æ•°æ²¡æœ‰è¿”å›žå…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›žè¿™ä¸ªæ–°å¯¹è±¡ã€‚ ç¤ºä¾‹:12345function foo(a) &#123; this.a = a;&#125;var bar = new foo(2); console.log( bar.a ); // 2 ä½¿ç”¨ new æ¥è°ƒç”¨ foo(..) æ—¶ï¼Œæˆ‘ä»¬ä¼šæž„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒç»‘å®šåˆ° foo(..) è°ƒç”¨ä¸­çš„ this ä¸Šã€‚è¯´æ˜Ž:å¯¹äºŽä¸Šé¢è¿™å¥è¯è¿›è¡Œè§£é‡Šä¸‹,å¦‚æžœåœ¨ä¸€ä¸ªå‡½æ•°å‰é¢å¸¦ä¸Š new å…³é”®å­—æ¥è°ƒç”¨ï¼Œ é‚£ä¹ˆèƒŒåœ°é‡Œå°†ä¼šåˆ›å»ºä¸€ä¸ªè¿žæŽ¥åˆ°è¯¥å‡½æ•°çš„ prototype çš„æ–°å¯¹è±¡ï¼Œthiså°±æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ï¼› 2.3 ä¼˜å…ˆçº§ç›´æŽ¥ä¸Šç»“è®º:newç»‘å®š=æ˜¾ç¤ºç»‘å®š&gt;éšå¼ç»‘å®š&gt;é»˜è®¤ç»‘å®šè¯´æ˜Ž: newç»‘å®šä¸Žæ˜¾ç¤ºç»‘å®šæ˜¯ä¸èƒ½ç›´æŽ¥è¿›è¡Œæµ‹è¯•æ¯”è¾ƒ,ä½†é€šè¿‡åˆ†æžå‘çŽ°newç»‘å®šå†…éƒ¨å…¶å®žæ˜¯ä½¿ç”¨äº†ç¡¬ç»‘å®š(æ˜¾ç¤ºç»‘å®šçš„ä¸€ç§),æ‰€ä»¥newç»‘å®šå’Œæ˜¾ç¤ºç»‘å®šä¼˜å…ˆçº§åº”è¯¥å·®ä¸å¤š.ä½†è¯è¯´å›žæ¥,ä¸€èˆ¬å®žé™…ä½¿ç”¨æ—¶,ä¸ä¼šè¿™ç§å¤æ‚çš„äº¤é”™ç»‘å®š.æ‰€ä»¥åªéœ€è®°ä½ä¸‹é¢çš„åˆ¤å®šå³å¯. åˆ¤æ–­this:çŽ°åœ¨æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¼˜å…ˆçº§æ¥åˆ¤æ–­å‡½æ•°åœ¨æŸä¸ªè°ƒç”¨ä½ç½®åº”ç”¨çš„æ˜¯å“ªæ¡è§„åˆ™ã€‚å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ¥è¿›è¡Œåˆ¤æ–­: 1,å‡½æ•°æ˜¯å¦åœ¨newä¸­è°ƒç”¨(newç»‘å®š)?å¦‚æžœæ˜¯çš„è¯thisç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ var bar = new foo() 2,å‡½æ•°æ˜¯å¦é€šè¿‡callã€apply(æ˜¾å¼ç»‘å®š)æˆ–è€…ç¡¬ç»‘å®šè°ƒç”¨?å¦‚æžœæ˜¯çš„è¯ï¼Œthisç»‘å®šçš„æ˜¯ æŒ‡å®šçš„å¯¹è±¡ã€‚var bar = foo.call(obj2) 3,å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š)?å¦‚æžœæ˜¯çš„è¯ï¼Œthis ç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Š ä¸‹æ–‡å¯¹è±¡ã€‚var bar = obj1.foo() 4,å¦‚æžœéƒ½ä¸æ˜¯çš„è¯ï¼Œä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æžœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ° å…¨å±€å¯¹è±¡ã€‚var bar = foo()å°±æ˜¯è¿™æ ·ã€‚å¯¹äºŽæ­£å¸¸çš„å‡½æ•°è°ƒç”¨æ¥è¯´ï¼Œç†è§£äº†è¿™äº›çŸ¥è¯†ä½ å°±å¯ä»¥æ˜Žç™½ this çš„ç»‘å®šåŽŸç†äº†ã€‚ 2.4 ç»‘å®šä¾‹å¤–2.4.1 è¢«å¿½ç•¥çš„thiså¦‚æžœä½ æŠŠ null æˆ–è€… undefined ä½œä¸º this çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ callã€apply æˆ–è€… bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®žé™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™,thisä¼šç»‘å®šåˆ°windowä¸Š.ä½¿ç”¨æƒ…æ™¯:ä¸€ç§éžå¸¸å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨ apply(..) æ¥â€œå±•å¼€â€ä¸€ä¸ªæ•°ç»„(ä¹Ÿå¯ä»¥ç”¨æ¥æ–¹ä¾¿åœ°å‚æ•°æ³¨å…¥)ï¼Œå¹¶å½“ä½œå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°ã€‚ç±»ä¼¼åœ°ï¼Œbind(..) å¯ä»¥å¯¹å‚æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–(é¢„å…ˆè®¾ç½®ä¸€äº›å‚æ•°).é€šè¿‡è‡ªå¸¦bindæ–¹æ³•å®žçŽ°æŸ¯é‡ŒåŒ–æ˜¯å¾ˆæ–¹ä¾¿çš„,æ¯”è‡ªå·±å†™è¦ç®€åŒ–å¥½å¤š. æ³¨æ„: åœ¨ ES6 ä¸­ï¼Œå¯ä»¥ç”¨ â€¦ æ“ä½œç¬¦ä»£æ›¿ apply(..) æ¥â€œå±• å¼€â€æ•°ç»„ï¼Œfoo(â€¦[1,2]) å’Œ foo(1,2)æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦çš„ this ç»‘å®šã€‚å¯æƒœï¼Œåœ¨ ES6 ä¸­æ²¡æœ‰æŸ¯é‡ŒåŒ–çš„ç›¸å…³è¯­æ³•ï¼Œå› æ­¤è¿˜æ˜¯éœ€è¦ä½¿ç”¨ bind(..)ã€‚ å½“ä½¿ç”¨nullæˆ–è€…undefinedè¿›è¡Œç»‘å®šæ—¶,è¦ç¡®ä¿è¯¥å‡½æ•°å†…æ²¡æœ‰ä½¿ç”¨this,å¦åˆ™æ­¤æ—¶å¾ˆå®¹æ˜“å¯¹å…¨å±€å˜é‡é€ æˆç ´å!å°¤å…¶æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ–¹æ³•! æ›´å®‰å…¨çš„thiså¦‚æžœå‡½æ•°å†…ä½¿ç”¨äº†this,ç›´æŽ¥ä½¿ç”¨nullåˆ™å¯èƒ½ä¼šå¯¹å…¨å±€é€ æˆç ´å.å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªâ€œDMZâ€(demilitarized zoneï¼Œéžå†›äº‹åŒº)å¯¹è±¡â€”â€”å®ƒå°±æ˜¯ä¸€ä¸ªç©ºçš„éžå§”æ‰˜çš„å¯¹è±¡(å§”æ‰˜åœ¨ç¬¬ 5 ç« å’Œç¬¬ 6 ç« ä»‹ç»)ã€‚è®©thisç»‘å®šåˆ°è¿™ä¸ªâ€DMZä¸Š.è¿™æ ·å°±ä¸ä¼šå¯¹å…¨å±€é€ æˆç ´å.æ€Žä¹ˆåˆ›å»ºDMZå‘¢.å°±æ˜¯é€šè¿‡Object.create(null) åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡.è¿™ç§æ–¹æ³•å’Œ {} å¾ˆåƒï¼Œä½†æ˜¯å¹¶ä¸ä¼šåˆ›å»º Object.prototype è¿™ä¸ªå§”æ‰˜ï¼Œæ‰€ä»¥å®ƒæ¯” {}â€œæ›´ç©ºâ€æ›´åŠ å®‰å…¨. PS:å®žé™…ä½¿ç”¨ä¸€èˆ¬ä¸ä¼šé‡åˆ°è¿™ç§æƒ…å†µ(ä¹Ÿå¯èƒ½æ˜¯æˆ‘å¤ªèœ,æ²¡é‡åˆ°),å¦‚æžœå‡½æ•°å†…æœ‰this,é‚£è‚¯å®šæ˜¯æœ‰éœ€è¦è°ƒç”¨çš„å˜é‡æˆ–å‡½æ•°,ç›´æŽ¥æŠŠå®ƒç»‘å®šåˆ°ä¸€ä¸ªç©ºå¯¹è±¡ä¸Š.é‚£ä»€ä¹ˆéƒ½å–ä¸åˆ°,è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰?æ‰€ä»¥å‡½æ•°æ²¡æœ‰thiså°±ä¼ å…¥null.å¦‚æžœæœ‰thiså°±æŠŠå®ƒç»‘å®šåˆ°çœŸæ­£éœ€è¦å®ƒçš„å¯¹è±¡ä¸Š,è€Œä¸æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ä¸Š.è¿™äº›æ˜¯æˆ‘è‡ªå·±çš„è§è§£,å¦‚æžœæœ‰ä¸å¦¥çš„,æ¬¢è¿Žç•™è¨€æŒ‡æ­£. 2.4.2 é—´æŽ¥å¼•ç”¨12345678function foo() &#123; console.log( this.a );&#125;var a = 2;var o = &#123; a: 3, foo: foo &#125;; var p = &#123; a: 4 &#125;;o.foo(); // 3(p.foo = o.foo)(); // 2 å…¶å®žå°±æ˜¯foo() æ­¤æ—¶thisé»˜è®¤ç»‘å®šåˆ°window ä¾‹å­ä¸­çš„é—´æŽ¥å¼•ç”¨å…¶å®žæ˜¯å¯¹å‡½æ•°çš„ç†è§£ä¸æ·±é€ æˆçš„.å…¶å®ž(p.foo = o.foo)()å°±æ˜¯(foo)(),è¿™æ ·å°±æ˜¯å…¨å±€è°ƒç”¨foo()æ‰€ä»¥thisé»˜è®¤å°±ç»‘å®šåˆ°äº†windowä¸Š.æ³¨æ„:å¯¹äºŽé»˜è®¤ç»‘å®šæ¥è¯´ï¼Œå†³å®š this ç»‘å®šå¯¹è±¡çš„å¹¶ä¸æ˜¯è°ƒç”¨ä½ç½®æ˜¯å¦å¤„äºŽä¸¥æ ¼æ¨¡å¼ï¼Œè€Œæ˜¯ å‡½æ•°ä½“æ˜¯å¦å¤„äºŽä¸¥æ ¼æ¨¡å¼ã€‚å¦‚æžœå‡½æ•°ä½“å¤„äºŽä¸¥æ ¼æ¨¡å¼ï¼Œthis ä¼šè¢«ç»‘å®šåˆ° undefinedï¼Œå¦åˆ™ this ä¼šè¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚(å¯¹äºŽè¿™æ®µè¯å…¶å®žåœ¨2.2.1èŠ‚å°±åº”è¯¥è¯´äº†!) 2.4.3 è½¯ç»‘å®šç¡¬ç»‘å®šä¼šå¤§å¤§é™ä½Žå‡½æ•°çš„çµæ´»æ€§ï¼Œä½¿ç”¨ç¡¬ç»‘å®šä¹‹åŽå°±æ— æ³•ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šæ¥ä¿®æ”¹ thisã€‚è¿™æ—¶å€™åˆ™éœ€è¦ä½¿ç”¨è½¯ç»‘å®š.Tips: è¿™é‡Œç»™çš„è½¯ç»‘å®šæ–¹æ³•è¿˜æ˜¯æŒºå¥½çš„.ä½†æ˜¯å»ºè®®è¿˜æ˜¯åœ¨è‡ªå·±çš„ä»£ç é‡Œä½¿ç”¨,å¹¶æ³¨é‡Šæ¸…é™¤.ä»¥å…åˆ«äººä½¿ç”¨,å¯¹thisé”™è¯¯çš„åˆ¤æ–­. 2.5 thisè¯æ³• ES6 ä¸­ä»‹ç»äº†ä¸€ç§æ— æ³•ä½¿ç”¨ä¸Šé¢å››æ¡è§„åˆ™çš„ç‰¹æ®Šå‡½æ•°ç±»åž‹:ç®­å¤´å‡½æ•°ã€‚ ç®­å¤´å‡½æ•°ä¸ä½¿ç”¨ this çš„å››ç§æ ‡å‡†è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚(å‡½æ•°æˆ–è€…å…¨å±€)ä½œç”¨åŸŸæ¥å†³å®š thisã€‚(è€Œä¼ ç»Ÿçš„thisä¸Žå‡½æ•°ä½œç”¨åŸŸæ²¡æœ‰ä»»ä½•å…³ç³»,å®ƒåªä¸Žè°ƒç”¨ä½ç½®çš„ä¸Šä¸‹æ–‡å¯¹è±¡æœ‰å…³.è¿™ç‚¹åœ¨æœ¬ç« å¼€å¤´å°±å·²ç»åå¤å¼ºè°ƒäº†.) é‡è¦: ç®­å¤´å‡½æ•°æœ€å¸¸ç”¨äºŽå›žè°ƒå‡½æ•°ä¸­ï¼Œä¾‹å¦‚äº‹ä»¶å¤„ç†å™¨æˆ–è€…å®šæ—¶å™¨. ç®­å¤´å‡½æ•°å¯ä»¥åƒ bind(..) ä¸€æ ·ç¡®ä¿å‡½æ•°çš„ this è¢«ç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡ ç®­å¤´å‡½æ•°ç”¨æ›´å¸¸è§çš„è¯æ³•ä½œç”¨åŸŸå–ä»£äº†ä¼ ç»Ÿçš„ this æœºåˆ¶ã€‚ æ³¨æ„: è¿™ç§æƒ…å†µ:1234567891011function module() &#123; return this.x;&#125;var foo = &#123; x: 99, bar:module.bind(this) //æ­¤æ—¶bindç»‘å®šçš„thisä¸ºwindow. &#125;var x="window"console.log(foo.bar())//window åœ¨ ES6 ä¹‹å‰æˆ‘ä»¬å°±å·²ç»åœ¨ä½¿ç”¨ä¸€ç§å‡ ä¹Žå’Œç®­å¤´å‡½æ•°å®Œå…¨ä¸€æ ·çš„æ¨¡å¼:12345678910function foo() &#123;var self = this; // lexical capture of this setTimeout( function()&#123; console.log( self.a ); &#125;, 100 ); &#125;var obj = &#123; a: 2&#125;;foo.call( obj ); // 2 è™½ç„¶ self = this å’Œç®­å¤´å‡½æ•°çœ‹èµ·æ¥éƒ½å¯ä»¥å–ä»£ bind(..)ï¼Œä½†æ˜¯ä»Žæœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒä»¬æƒ³æ›¿ä»£çš„æ˜¯ this æœºåˆ¶ã€‚(çš„ç¡®æ˜¯è¿™æ ·,æˆ‘ä¸€èˆ¬ä¼šç”¨meæ›¿ä»£self.å› ä¸ºå°‘ä¸¤ä¸ªå•è¯=.=) å…³äºŽthisçš„ç¼–ç è§„èŒƒå»ºè®®: åªä½¿ç”¨è¯æ³•ä½œç”¨åŸŸå¹¶å®Œå…¨æŠ›å¼ƒé”™è¯¯thisé£Žæ ¼çš„ä»£ç ; å®Œå…¨é‡‡ç”¨ this é£Žæ ¼ï¼Œåœ¨å¿…è¦æ—¶ä½¿ç”¨ bind(..)ï¼Œå°½é‡é¿å…ä½¿ç”¨ self = this å’Œç®­å¤´å‡½æ•°ã€‚ åœ¨è‡ªå·±å®žé™…å·¥ä½œä¸­,å…¶å®žæ˜¯ä¸¤ç§æ··ç”¨çš„,ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨è¯æ³•ä½œç”¨åŸŸé£Žæ ¼.å› ä¸ºæœ‰æ—¶å€™ä½ çœŸçš„å¾ˆéš¾åšåˆ°å®Œå…¨ç»Ÿä¸€.æˆ‘çŽ°åœ¨çš„ä¹ æƒ¯æ˜¯,åœ¨å†™ä»»ä½•å‡½æ•°æ—¶,å¼€å¤´ç¬¬ä¸€ä¸ªå°±æ˜¯var me =this;è¿™æ ·åœ¨çœ‹åˆ°å‡½æ•°ç¬¬ä¸€çœ¼,å°±çŸ¥é“:å“¦,è¿™ä¸ªå‡½æ•°æ˜¯ç”¨è¯æ³•ä½œç”¨åŸŸé£Žæ ¼çš„.å°¤å…¶å‡½æ•°å†…æ¶‰åŠåˆ°å›žè°ƒ.è¿™æ ·å°±é¿å…äº†å†™ç€å†™ç€å‘çŽ°thisç»‘å®šåˆ°å…¶ä»–åœ°æ–¹åŽ»äº†,ä¸€ä¸ªå‡½æ•°é‡Œé¢thisä¸ç»Ÿä¸€çš„æƒ…å†µ. 2.6 å°ç»“(è¿™é‡Œæ€»ç»“å¾—å¾ˆå¥½,æˆ‘å°±å…¨éƒ¨copyäº†)å¦‚æžœè¦åˆ¤æ–­ä¸€ä¸ªè¿è¡Œä¸­å‡½æ•°çš„ this ç»‘å®šï¼Œå°±éœ€è¦æ‰¾åˆ°è¿™ä¸ªå‡½æ•°çš„ç›´æŽ¥è°ƒç”¨ä½ç½®ã€‚æ‰¾åˆ°ä¹‹åŽå°±å¯ä»¥é¡ºåºåº”ç”¨ä¸‹é¢è¿™å››æ¡è§„åˆ™æ¥åˆ¤æ–­ this çš„ç»‘å®šå¯¹è±¡ã€‚ ç”±newè°ƒç”¨?ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ ç”±callæˆ–è€…apply(æˆ–è€…bind)è°ƒç”¨?ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ã€‚ ç”±ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨?ç»‘å®šåˆ°é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ é»˜è®¤:åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚ ä¸€å®šè¦æ³¨æ„ï¼Œæœ‰äº›è°ƒç”¨å¯èƒ½åœ¨æ— æ„ä¸­ä½¿ç”¨é»˜è®¤ç»‘å®šè§„åˆ™ã€‚å¦‚æžœæƒ³â€œæ›´å®‰å…¨â€åœ°å¿½ç•¥ this ç»‘å®šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª DMZ å¯¹è±¡ï¼Œæ¯”å¦‚ Ã¸ = Object.create(null)ï¼Œä»¥ä¿æŠ¤å…¨å±€å¯¹è±¡ã€‚ ES6 ä¸­çš„ç®­å¤´å‡½æ•°å¹¶ä¸ä¼šä½¿ç”¨å››æ¡æ ‡å‡†çš„ç»‘å®šè§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å½“å‰çš„è¯æ³•ä½œç”¨åŸŸæ¥å†³å®š thisï¼Œå…·ä½“æ¥è¯´ï¼Œç®­å¤´å‡½æ•°ä¼šç»§æ‰¿å¤–å±‚å‡½æ•°è°ƒç”¨çš„ this ç»‘å®š(æ— è®º this ç»‘å®šåˆ°ä»€ä¹ˆ)ã€‚è¿™å…¶å®žå’Œ ES6 ä¹‹å‰ä»£ç ä¸­çš„ self = this æœºåˆ¶ä¸€æ ·ã€‚ ç‰¹åˆ«æ³¨æ„: å…¶ä¸­æœ€éœ€è¦æ³¨æ„çš„å°±æ˜¯å½“ä½ ä½¿ç”¨jqueryæˆ–vueæ—¶,æ­¤æ—¶thisæ˜¯è¢«åŠ¨æ€ç»‘å®šäº†çš„.å¤§å¤šæ•° jQuery æ–¹æ³•å°† this è®¾ç½®ä¸ºå·²é€‰æ‹©çš„ dom å…ƒç´ ã€‚ä½¿ç”¨ Vue.jsæ—¶ï¼Œåˆ™æ–¹æ³•å’Œè®¡ç®—å‡½æ•°é€šå¸¸å°† this è®¾ç½®ä¸º Vue ç»„ä»¶å®žä¾‹ã€‚vueæ–‡æ¡£ä¸­æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­è‡ªåŠ¨ç»‘å®š this ä¸Šä¸‹æ–‡åˆ°å®žä¾‹ä¸­ï¼Œå› æ­¤ä½ å¯ä»¥è®¿é—®æ•°æ®ï¼Œå¯¹å±žæ€§å’Œæ–¹æ³•è¿›è¡Œè¿ç®—ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• (ä¾‹å¦‚ created: () =&gt; this.fetchTodos())ã€‚è¿™æ˜¯å› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº†çˆ¶ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ this ä¸Žä½ æœŸå¾…çš„ Vue å®žä¾‹ä¸åŒï¼Œthis.fetchTodos çš„è¡Œä¸ºæœªå®šä¹‰ã€‚ ä¹ŸåŒ…æ‹¬ä½¿ç”¨ç¬¬ä¸‰æ–¹ajaxæ—¶,ä¾‹å¦‚axios.è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•,è¦ä¹ˆä½¿ç”¨ä¼ ç»Ÿçš„functionæˆ–è€…ä½¿ç”¨let _this=thisè¿›è¡ŒæŽ¥ç®¡.å…¶å®žå½“ä½ ä½¿ç”¨vueæ—¶,ä½ é»˜è®¤çš„æ€æƒ³å°±æ˜¯thisæŒ‡çš„å°±æ˜¯vueå®žä¾‹.æ‰€ä»¥é™¤äº†é’©å­å‡½æ•°å’Œaxiosé‡Œä¼šæœ‰ç‚¹å½±å“å¤–,å…¶ä½™è¿˜å¥½. PS è¿™é‡Œå†è¡¥å……è¯´æ˜Žä¸Šä¸‹æ–‡(å¯¹è±¡)ä¸Žå‡½æ•°ä½œç”¨åŸŸçš„åŒºåˆ«äºŽè”ç³»: ä¸Šä¸‹æ–‡ï¼š å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½å‚¨å­˜åœ¨é‡Œé¢.ä¸Šä¸‹æ–‡çŽ¯å¢ƒæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨å¹¶è¢«å¼•æ“Žæ‰§è¡Œæ—¶åˆ›å»ºçš„.å¦‚æžœä½ æ²¡è°ƒç”¨,é‚£ä¹ˆå°±æ²¡æœ‰ä¸Šä¸‹æ–‡. ä½œç”¨åŸŸï¼š é™¤äº†å…¨å±€ä½œç”¨åŸŸï¼Œåªæœ‰å‡½æ•°å’ŒES6æ–°å¢žçš„let,constæ‰èƒ½åˆ›å»ºä½œç”¨åŸŸ.åˆ›å»ºä¸€ä¸ªå‡½æ•°å°±åˆ›å»ºäº†ä¸€ä¸ªä½œç”¨åŸŸï¼Œæ— è®ºä½ è°ƒç”¨ä¸è°ƒç”¨ï¼Œå‡½æ•°åªè¦åˆ›å»ºäº†ï¼Œå®ƒå°±æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸ.ä½œç”¨åŸŸæŽ§åˆ¶ç€è¢«è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡è®¿é—®. ä¸¤è€…: ä½œç”¨åŸŸæ˜¯åŸºäºŽå‡½æ•°çš„ï¼Œè€Œä¸Šä¸‹æ–‡æ˜¯åŸºäºŽå¯¹è±¡çš„ã€‚ä½œç”¨åŸŸæ¶‰åŠåˆ°æ‰€è¢«è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡è®¿é—®ï¼Œå¹¶ä¸”ä¸åŒçš„è°ƒç”¨åœºæ™¯æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸Šä¸‹æ–‡å§‹ç»ˆæ˜¯thiså…³é”®å­—æœ‰å…³ï¼Œ å®ƒæŽ§åˆ¶ç€thisçš„å¼•ç”¨ã€‚ä¸€ä¸ªä½œç”¨åŸŸä¸‹å¯èƒ½åŒ…å«å¤šä¸ªä¸Šä¸‹æ–‡ã€‚æœ‰å¯èƒ½ä»Žæ¥æ²¡æœ‰è¿‡ä¸Šä¸‹æ–‡ï¼ˆå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼‰ï¼›æœ‰å¯èƒ½æœ‰è¿‡ï¼ŒçŽ°åœ¨å‡½æ•°è¢«è°ƒç”¨å®Œæ¯•åŽï¼Œä¸Šä¸‹æ–‡çŽ¯å¢ƒè¢«é”€æ¯äº†(åžƒåœ¾å›žæ”¶)ï¼›æœ‰å¯èƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªï¼ˆé—­åŒ…ï¼‰ã€‚ ç¬¬ä¸‰ç«  å¯¹è±¡3.1 è¯­æ³•å¯¹è±¡å¯ä»¥é€šè¿‡ä¸¤ç§å½¢å¼å®šä¹‰:å£°æ˜Ž(æ–‡å­—)å½¢å¼(å°±æ˜¯å¸¸è¯´çš„å¯¹è±¡å­—é¢é‡)å’Œæž„é€ å½¢å¼ã€‚ å£°æ˜Žå½¢å¼(å¯¹è±¡å­—é¢é‡):1234 var myObj = &#123; key: value // ... &#125;; æž„é€ å½¢å¼:12var myObj = new Object(); myObj.key = value; æž„é€ å½¢å¼å’Œæ–‡å­—å½¢å¼ç”Ÿæˆçš„å¯¹è±¡æ˜¯ä¸€æ ·çš„ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œåœ¨æ–‡å­—å£°æ˜Žä¸­ä½ å¯ä»¥æ·»åŠ å¤šä¸ª é”® / å€¼å¯¹ï¼Œä½†æ˜¯åœ¨æž„é€ å½¢å¼ä¸­ä½ å¿…é¡»é€ä¸ªæ·»åŠ å±žæ€§ã€‚PS:å…¶å®žæˆ‘ä»¬ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨å¯¹è±¡å­—é¢é‡å½¢å¼åˆ›å»ºå¯¹è±¡. 3.2 ç±»åž‹åœ¨JavaScriptä¸­ä¸€å…±æœ‰6ä¸­ä¸»è¦ç±»åž‹(æœ¯è¯­æ˜¯â€è¯­è¨€ç±»åž‹â€) string number boolean null undefined object ç®€å•æ•°æ®ç±»åž‹:å…¶ä¸­stringã€booleanã€numberã€null å’Œ undefinedå±žäºŽç®€å•åŸºæœ¬ç±»åž‹,å¹¶ä¸å±žäºŽå¯¹è±¡.null æœ‰æ—¶ä¼šè¢«å½“ä½œä¸€ç§å¯¹è±¡ç±»åž‹ï¼Œä½†æ˜¯è¿™å…¶å®žåªæ˜¯è¯­è¨€æœ¬èº«çš„ä¸€ä¸ª bugï¼Œå³å¯¹ null æ‰§è¡Œtypeof null æ—¶ä¼šè¿”å›žå­—ç¬¦ä¸² â€œobjectâ€ã€‚å®žé™…ä¸Šï¼Œnull æœ¬èº«æ˜¯åŸºæœ¬ç±»åž‹ã€‚PS: åŽŸå› æ˜¯è¿™æ ·çš„ï¼Œä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ï¼Œåœ¨ JavaScript ä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½éƒ½ä¸º 0 çš„è¯ä¼šè¢«åˆ¤ æ–­ä¸º object ç±»åž‹ï¼Œnull çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯å…¨ 0ï¼Œè‡ªç„¶å‰ä¸‰ä½ä¹Ÿæ˜¯ 0ï¼Œæ‰€ä»¥æ‰§è¡Œ typeof æ—¶ä¼šè¿”å›žâ€œobjectâ€ã€‚ å¯¹è±¡:å¯¹è±¡é™¤äº†æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åˆ›å»ºçš„,JavaScriptå…¶å®žå†…ç½®äº†å¾ˆå¤šå¯¹è±¡,ä¹Ÿå¯ä»¥è¯´æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»åž‹.å†…ç½®å¯¹è±¡: String Number Boolean Object Function Array Date RegExp Error åœ¨ JavaScript ä¸­ï¼Œè¿™äº›å†…ç½®å¯¹è±¡å®žé™…ä¸Šåªæ˜¯ä¸€äº›å†…ç½®å‡½æ•°ã€‚è¿™äº›å†…ç½®å‡½æ•°å¯ä»¥å½“ä½œæž„é€ å‡½æ•°(ç”± new äº§ç”Ÿçš„å‡½æ•°è°ƒç”¨â€”â€”å‚è§ç¬¬ 2 ç« )æ¥ä½¿ç”¨.å‡ ç‚¹è¯´æ˜Ž: å‡½æ•°å°±æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»åž‹(ä»ŽæŠ€æœ¯è§’åº¦æ¥è¯´å°±æ˜¯â€œå¯è°ƒç”¨çš„å¯¹è±¡â€)ã€‚JavaScript ä¸­çš„å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šå’Œæ™®é€šçš„å¯¹è±¡ä¸€æ ·(åªæ˜¯å¯ä»¥è°ƒç”¨)ï¼Œæ‰€ä»¥å¯ä»¥åƒæ“ä½œå…¶ä»–å¯¹è±¡ä¸€æ ·æ“ä½œå‡½æ•°(æ¯”å¦‚å½“ä½œå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°)ã€‚ é€šè¿‡å­—é¢é‡å½¢å¼åˆ›å»ºå­—ç¬¦ä¸²,æ•°å­—,å¸ƒå°”æ—¶,å¼•æ“Žä¼šè‡ªåŠ¨æŠŠå­—é¢é‡è½¬æ¢æˆ String å¯¹è±¡,Numberå¯¹è±¡,Booleanå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å¯ä»¥è®¿å¯¹åº”å¯¹è±¡å†…ç½®çš„é—®å±žæ€§å’Œæ–¹æ³•ã€‚ null å’Œ undefined æ²¡æœ‰å¯¹åº”çš„æž„é€ å½¢å¼ï¼Œå®ƒä»¬åªæœ‰æ–‡å­—å½¢å¼ã€‚ç›¸åï¼ŒDate åªæœ‰æž„é€ ï¼Œæ²¡æœ‰æ–‡å­—å½¢å¼ã€‚ å¯¹äºŽ Objectã€Arrayã€Function å’Œ RegExp(æ­£åˆ™è¡¨è¾¾å¼)æ¥è¯´ï¼Œæ— è®ºä½¿ç”¨æ–‡å­—å½¢å¼è¿˜æ˜¯æž„é€ å½¢å¼ï¼Œå®ƒä»¬éƒ½æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯å­—é¢é‡(è¿™æ˜¯è‚¯å®šçš„,å› ä¸ºä¸ç®¡å“ªç§å½¢å¼ä¸€åˆ›å»ºå‡ºæ¥å°±æ˜¯å¯¹è±¡ç±»åž‹,ä¸å¯èƒ½æ˜¯å…¶ä»–ç±»åž‹,å®žé™…ä¸Šæ˜¯ä¸å­˜åœ¨å­—é¢é‡è¿™ä¸€è¯´çš„)ã€‚ä½†æ˜¯ä½¿ç”¨æž„é€ å½¢å¼å¯ä»¥æä¾›ä¸€äº›é¢å¤–é€‰é¡¹(å†…ç½®)ã€‚ Error å¯¹è±¡å¾ˆå°‘åœ¨ä»£ç ä¸­æ˜¾å¼åˆ›å»ºï¼Œä¸€èˆ¬æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸æ—¶è¢«è‡ªåŠ¨åˆ›å»ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ new Error(..) è¿™ç§æž„é€ å½¢å¼æ¥åˆ›å»ºï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´ç”¨ä¸ç€ã€‚ 3.3 å†…å®¹å¯¹è±¡å±žæ€§:ç”±ä¸€äº›å­˜å‚¨åœ¨ç‰¹å®šå‘½åä½ç½®çš„(ä»»æ„ç±»åž‹çš„)å€¼.å±žæ€§å:å­˜å‚¨åœ¨å¯¹è±¡å®¹å™¨å†…éƒ¨çš„å±žæ€§çš„åç§°.å±žæ€§å€¼å¹¶ä¸ä¼šå­˜åœ¨å¯¹è±¡å†….è€Œæ˜¯é€šè¿‡å±žæ€§å(å°±åƒæŒ‡é’ˆ,ä»ŽæŠ€æœ¯è§’åº¦æ¥è¯´å°±æ˜¯å¼•ç”¨)æ¥æŒ‡å‘è¿™äº›å€¼çœŸæ­£çš„å­˜å‚¨ä½ç½®(å°±åƒæˆ¿é—¨å·ä¸€æ ·).å±žæ€§åçš„ä¸¤ç§å½¢å¼: ä½¿ç”¨.æ“ä½œç¬¦.ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„å½¢å¼.å®ƒé€šå¸¸è¢«ç§°ä¸ºâ€å±žæ€§è®¿é—®â€. . æ“ä½œç¬¦ä¼šè¦æ±‚å±žæ€§åæ»¡è¶³æ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒ. ä½¿ç”¨[&quot;..&quot;]è¯­æ³•è¿›è¡Œè®¿é—®.è¿™ä¸ªé€šå¸¸è¢«ç§°ä¸ºâ€é”®è®¿é—®â€.[&quot;..&quot;]è¯­æ³•å¯ä»¥æŽ¥å—ä»»æ„UTF-8/Unicode å­—ç¬¦ä¸²ä½œä¸ºå±žæ€§åã€‚å¹¶ä¸”[&quot;..&quot;]è¯­æ³•ä½¿ç”¨å­—ç¬¦ä¸²æ¥è®¿é—®å±žæ€§,å¦‚æžœä½ çš„å±žæ€§åæ˜¯ä¸€ä¸ªå˜é‡,åˆ™å¯ä»¥ä½¿ç”¨ä¹¦ä¸­çš„ä¾‹å­myObject[idx]å½¢å¼è¿›è¡Œè®¿é—®.è¿™ä¹Ÿæ˜¯æœ€å¸¸ä½¿ç”¨â€é”®è®¿é—®â€çš„æƒ…å†µ.ä½†å¦‚æžœidxæ˜¯å±žæ€§ååˆ™è¿˜æ˜¯éœ€å†™æˆmyObject[&quot;idx&quot;]å­—ç¬¦ä¸²å½¢å¼. æ³¨æ„: åœ¨å¯¹è±¡ä¸­ï¼Œå±žæ€§åæ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚å¦‚æžœä½ ä½¿ç”¨ string(å­—é¢é‡)ä»¥å¤–çš„å…¶ä»–å€¼ä½œä¸ºå±žæ€§ åï¼Œé‚£å®ƒé¦–å…ˆä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å³ä½¿æ˜¯æ•°å­—ä¹Ÿä¸ä¾‹å¤–ï¼Œè™½ç„¶åœ¨æ•°ç»„ä¸‹æ ‡ä¸­ä½¿ç”¨çš„çš„ ç¡®æ˜¯æ•°å­—ï¼Œä½†æ˜¯åœ¨å¯¹è±¡å±žæ€§åä¸­æ•°å­—ä¼šè¢«è½¬æ¢æˆå­—ç¬¦ä¸² . è¡¥å……: è¿™é‡Œæˆ‘åœ¨ä¹¦ä¸­çš„ä¾‹å­åŸºç¡€ä¸Šè¿›è¡Œäº†ä¿®æ”¹,å¾—åˆ°è¿™ä¸ªä¾‹å­:123456789var myObject = &#123; a:2, idx:111&#125;;var idx="a";console.log( myObject[idx] ); //2console.log( myObject["idx"] ); //111console.log( myObject[this.idx] ); // 2 æ­¤æ—¶thisæ˜¯æŒ‡å‘window.[]é‡Œçš„thisåŒæ ·ç¬¦åˆä¸Šä¸€ç« æ‰€è®²çš„è§„åˆ™//ç»“æžœæ˜¯å¦å’Œä½ æ‰€æƒ³å¾—ä¸€æ ·å‘¢? 3.3.1 å¯è®¡ç®—å±žæ€§åES6 å¢žåŠ äº†å¯è®¡ç®—å±žæ€§åï¼Œå¯ä»¥åœ¨æ–‡å­—å½¢å¼ä¸­ä½¿ç”¨ [] åŒ…è£¹ä¸€ä¸ªè¡¨è¾¾å¼æ¥å½“ä½œå±žæ€§å:12345678var prefix = "foo";var myObject = &#123; [prefix + "bar"]:"hello", [prefix + "baz"]: "world"&#125;;myObject["foobar"]; // hellomyObject["foobaz"]; // world 3.3.2 å±žæ€§ä¸Žæ–¹æ³• æˆ‘ä»¬ç»å¸¸æŠŠå¯¹è±¡å†…éƒ¨å¼•ç”¨çš„å‡½æ•°ç§°ä¸ºâ€œæ–¹æ³•â€(çš„ç¡®å¦‚æ­¤). å®žé™…ä¸Šå‡½æ•°å¹¶ä¸å±žäºŽè¯¥å¯¹è±¡,å®ƒä¸è¿‡æ˜¯å¯¹å‡½æ•°çš„å¼•ç”¨ç½¢äº†.å¯¹è±¡å±žæ€§è®¿é—®è¿”å›žçš„å‡½æ•°å’Œå…¶ä»–å‡½æ•°æ²¡æœ‰ä»»ä½•åŒºåˆ«(é™¤äº†å¯èƒ½å‘ç”Ÿçš„éšå¼ç»‘å®šthisåˆ°è¯¥å¯¹è±¡)ã€‚ å³ä½¿ä½ åœ¨å¯¹è±¡çš„æ–‡å­—å½¢å¼ä¸­å£°æ˜Žä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿä¸ä¼šâ€œå±žäºŽâ€è¿™ä¸ªå¯¹è±¡â€”â€” å®ƒä»¬åªæ˜¯å¯¹äºŽç›¸åŒå‡½æ•°å¯¹è±¡çš„å¤šä¸ªå¼•ç”¨ã€‚ 3.3.3 æ•°ç»„ æ•°ç»„æ”¯æŒ[]å½¢å¼è®¿é—®å‚¨å­˜çš„å€¼,å…¶ä¸­[]å†…çš„å€¼é»˜è®¤å½¢å¼ä¸ºæ•°å€¼ä¸‹æ ‡(ä¸ºä»Ž0å¼€å§‹çš„æ•´æ•°,ä¹Ÿå°±æ˜¯å¸¸è¯´çš„ç´¢å¼•).ä¾‹å¦‚myArray[0] æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥è™½ç„¶æ¯ä¸ªä¸‹æ ‡éƒ½æ˜¯æ•´æ•°ï¼Œä½ ä»ç„¶å¯ä»¥ç»™æ•°ç»„æ·»åŠ å±žæ€§.ä¾‹å¦‚myArray.baz = &quot;baz&quot;.æ³¨æ„:æ·»åŠ æ–°å±žæ€§åŽ,è™½ç„¶å¯ä»¥è®¿é—®,ä½†æ•°ç»„çš„ length å€¼ä¸ä¼šæ”¹å˜. æ•°ç»„å¯ä»¥é€šè¿‡myArray[1]=11;myArray[&quot;2&quot;]=22;è¿™ç§å½¢å¼å¯¹æ•°ç»„å†…å®¹è¿›è¡Œä¿®æ”¹,æ·»åŠ . è™½ç„¶æ•°ç»„ä¹Ÿå¯ä»¥å’Œå¯¹è±¡ä¸€æ ·é€šè¿‡é”®/å€¼ å¯¹ å½¢å¼æ¥ä½¿ç”¨.ä½†JSå·²ç»å¯¹æ•°ç»„çš„è¡Œä¸ºå’Œç”¨é€”è¿›è¡Œäº†ä¼˜åŒ–.æ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½¿ç”¨é»˜è®¤çš„ä¸‹æ ‡/å€¼ å¯¹ å½¢å¼æ¥ä½¿ç”¨. 3.3.4 å¤åˆ¶å¯¹è±¡ å¤åˆ¶åˆ†ä¸ºæµ…æ‹·è´å’Œæ·±æ‹·è´.æµ…æ‹·è´ä¼šå¯¹å¯¹è±¡ä¸­çš„åŸºæœ¬æ•°æ®ç±»åž‹è¿›è¡Œå¤åˆ¶(åœ¨å†…å­˜ä¸­å¼€è¾Ÿæ–°çš„åŒºåŸŸ),å¯¹äºŽå¯¹è±¡åˆ™æ˜¯ç»§ç»­å¼•ç”¨.è€Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªâ€ä¸€æ ·çš„â€å¯¹è±¡.æ·±æ‹·è´åˆ™æ˜¯å¯¹å…¶ä¸­çš„æ‰€æœ‰å†…(å®¹åŒ…æ‹¬å¯¹è±¡)è¿›è¡Œæ·±å±‚æ¬¡çš„å¤åˆ¶. ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡JSONæ¥å¤åˆ¶å¯¹è±¡.var newObj = JSON.parse( JSON.stringify( someObj ) );.ä½†éœ€è¦æŒ‡å‡ºçš„æ˜¯è¿™ç§æ–¹æ³•å¯¹äºŽåŒ…å«functionå‡½æ•°æˆ–è€…Dateç±»åž‹çš„å¯¹è±¡åˆ™ä¸ç®¡ç”¨! ES6 å®šä¹‰äº† Object.assign(..) æ–¹æ³•æ¥å®žçŽ°æµ…å¤åˆ¶ã€‚å…·ä½“ç”¨æ³•åœ¨è¿™å°±ä¸èµ˜è¿°äº†. 3.3.5 å±žæ€§æè¿°ç¬¦ä»Ž ES5 å¼€å§‹ï¼Œæ‰€æœ‰çš„å±žæ€§éƒ½å…·å¤‡äº†å±žæ€§æè¿°ç¬¦ã€‚ æŸ¥çœ‹å±žæ€§æè¿°ç¬¦: å¯ä»¥ä½¿ç”¨Object.getOwnPropertyDescriptor( myObject, â€œaâ€ );æ–¹æ³•æŸ¥çœ‹myObjectå¯¹è±¡é‡Œå±žæ€§açš„å±žæ€§æè¿°ç¬¦. é…ç½®å±žæ€§æè¿°ç¬¦: å¯ä»¥ä½¿ç”¨Object.defineProperty(..)æ–¹æ³•å¯¹å±žæ€§çš„å±žæ€§æè¿°ç¬¦å°±åƒé…ç½®.ä¸¾ä¸ªä¾‹å­:123456789 var myObject = &#123;&#125;;Object.defineProperty( myObject, "a", &#123; value: 2, writable: true, configurable: true, enumerable: true &#125; );myObject.a; // 2//è¯¥æ–¹æ³•å¯ä»¥é…ç½®å››ä¸ªå±žæ€§æè¿°ç¬¦ æ³¨æ„: ä¹¦ä¸­å…³äºŽå±žæ€§æè¿°ç¬¦ä¹Ÿè¢«ç§°ä¸ºâ€œæ•°æ®æè¿°ç¬¦â€å…¶å®žæ˜¯ä¸å¤Ÿå‡†ç¡®çš„.å¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±žæ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼šæ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ã€‚æ•°æ®æè¿°ç¬¦æ˜¯ä¸€ä¸ªå…·æœ‰å€¼çš„å±žæ€§ï¼Œè¯¥å€¼å¯èƒ½æ˜¯å¯å†™çš„ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯å¯å†™çš„ã€‚å­˜å–æè¿°ç¬¦æ˜¯ç”±getterå’Œsetterå‡½æ•°å¯¹æè¿°çš„å±žæ€§ã€‚æè¿°ç¬¦å¿…é¡»æ˜¯è¿™ä¸¤ç§å½¢å¼ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…ã€‚(getterå’Œsetteræ˜¯åŽé¢é©¬ä¸Šè¦è®²åˆ°çš„ä¸¤ä¸ªæè¿°ç¬¦)å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹:(è¯¦æƒ…å¯ä»¥æŸ¥çœ‹MDNçš„è§£é‡Š) configurable enumerable value writable get set æ•°æ®æè¿°ç¬¦ Yes Yes Yes Yes No No å­˜å–æè¿°ç¬¦ Yes Yes No No Yes Yes å¦‚æžœä¸€ä¸ªæè¿°ç¬¦ä¸å…·æœ‰value,writable,get å’Œ set ä»»æ„ä¸€ä¸ªå…³é”®å­—ï¼Œé‚£ä¹ˆå®ƒå°†è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®æè¿°ç¬¦ã€‚å¦‚æžœä¸€ä¸ªæè¿°ç¬¦åŒæ—¶æœ‰(valueæˆ–writable)å’Œ(getæˆ–set)å…³é”®å­—ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚ valueå°±æ˜¯è¯¥å±žæ€§å¯¹åº”çš„å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»å‰©ä¸‹çš„ä¸‰ä¸ªå±žæ€§æè¿°ç¬¦é”®å€¼: 1. Writable å†³å®šæ˜¯å¦å¯ä»¥ä¿®æ”¹å±žæ€§çš„å€¼ã€‚å½“è¢«è®¾ç½®ä¸ºfalseåŽ,å†å¯¹å±žæ€§å€¼è¿›è¡Œä¿®æ”¹,åˆ™ä¼šé™é»˜å¤±è´¥(silently failed,ä¿®æ”¹ä¸æˆåŠŸ,ä¹Ÿä¸æŠ¥é”™)äº†ã€‚å¦‚æžœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ä¼šæŠ¥å‡ºTypeErroré”™è¯¯. 2. Configurable å†³å®šå±žæ€§æè¿°ç¬¦æ˜¯å¦å¯é…ç½®.å¦‚æžœä¸ºtrue,å°±å¯ä»¥ä½¿ç”¨ defineProperty(..) æ–¹æ³•æ¥ä¿®æ”¹å±žæ€§æè¿°ç¬¦.æ³¨æ„:ä¸ç®¡æ˜¯ä¸æ˜¯å¤„äºŽä¸¥æ ¼æ¨¡å¼ï¼Œä¿®æ”¹ä¸€ä¸ªä¸å¯é…ç½®çš„å±žæ€§æè¿°ç¬¦éƒ½ä¼šå‡ºé”™ã€‚å¹¶ä¸”æŠŠ configurable ä¿®æ”¹æˆ false æ˜¯å•å‘æ“ä½œï¼Œæ— æ³•æ’¤é”€! ä½†æ˜¯æœ‰ä¸ªä¾‹å¤–å³ä¾¿å±žæ€§æ˜¯ configurable:falseï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ æŠŠ writable çš„çŠ¶æ€ç”± true æ”¹ä¸º falseï¼Œä½†æ˜¯æ— æ³•ç”± false æ”¹ä¸º trueã€‚é™¤äº†æ— æ³•ä¿®æ”¹ï¼Œconfigurable:false è¿˜ä¼šç¦æ­¢åˆ é™¤è¿™ä¸ªå±žæ€§. 3. Enumerable å†³å®šè¯¥å±žæ€§æ˜¯å¦ä¼šå‡ºçŽ°åœ¨å¯¹è±¡çš„å±žæ€§æžšä¸¾ä¸­.æ¯”å¦‚è¯´ for..in å¾ªçŽ¯ã€‚å¦‚æžœæŠŠ enumerable è®¾ç½®æˆ falseï¼Œè¿™ä¸ªå±žæ€§å°±ä¸ä¼šå‡ºçŽ°åœ¨æžšä¸¾ä¸­ï¼Œè™½ç„¶ä»ç„¶å¯ä»¥æ­£å¸¸è®¿é—®å®ƒã€‚ç›¸å¯¹åœ°ï¼Œè®¾ç½®æˆ true å°±ä¼šè®©å®ƒå‡ºçŽ°åœ¨æžšä¸¾ä¸­ã€‚ 3.3.6 ä¸å˜æ€§é™¤äº†ä¸Šé¢æåˆ°çš„Object.defineProperty(..),ES5è¿˜å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹æ³•æ¥å®žçŽ°å±žæ€§æˆ–è€…å¯¹è±¡çš„ä¸å¯å˜.æ³¨æ„: è¿™äº›æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åªèƒ½æµ…ä¸å˜,å¦‚æžœç›®æ ‡å¯¹è±¡å¼•ç”¨äº†å…¶ä»–å¯¹è±¡(æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ï¼Œç­‰)ï¼Œå…¶ä»–å¯¹è±¡çš„å†…å®¹ä¸å—å½±å“ï¼Œä»ç„¶æ˜¯å¯å˜çš„.ç±»ä¼¼äºŽæµ…æ‹·è´. è¯´æ˜Ž: åœ¨ JavaScript ç¨‹åºä¸­å¾ˆå°‘éœ€è¦æ·±ä¸å¯å˜æ€§ã€‚ æœ‰äº›ç‰¹æ®Šæƒ…å†µå¯èƒ½éœ€è¦è¿™æ ·åšï¼Œä½†æ˜¯æ ¹æ®é€šç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚æžœä½ å‘çŽ°éœ€è¦å¯†å°æˆ–è€…å†»ç»“æ‰€æœ‰çš„å¯¹è±¡ï¼Œé‚£ä½ æˆ–è®¸åº”å½“é€€ä¸€æ­¥ï¼Œé‡æ–°æ€è€ƒä¸€ä¸‹ç¨‹åºçš„è®¾è®¡ï¼Œè®©å®ƒèƒ½æ›´å¥½åœ°åº”å¯¹å¯¹è±¡å€¼çš„æ”¹å˜ã€‚ æ–¹æ³•: 1. å¯¹è±¡å¸¸é‡(ä¸å¯æ”¹) ç»“åˆ writable:false å’Œ configurable:false å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªçœŸæ­£çš„å¸¸é‡å±žæ€§(ä¸å¯ä¿®æ”¹ã€é‡å®šä¹‰æˆ–è€…åˆ é™¤) 2. ç¦æ­¢æ‰©å±•(ä¸å¯å¢ž) ä½¿ç”¨ Object.prevent Extensions(myObject),å¯ä»¥ç¦æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±žæ€§å¹¶ä¸”ä¿ç•™å·²æœ‰å±žæ€§.åœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ›å»ºå±žæ€§ b ä¼šé™é»˜å¤±è´¥ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°†ä¼šæŠ›å‡º TypeError é”™è¯¯ã€‚ 3. å¯†å°(ä¸å¯é…ç½®,ä½†å¯ä¿®æ”¹) ä½¿ç”¨Object.seal(..) ä¼šåˆ›å»ºä¸€ä¸ªâ€œå¯†å°â€çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®žé™…ä¸Šä¼šåœ¨ä¸€ä¸ªçŽ°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨Object.preventExtensions(..) å¹¶æŠŠæ‰€æœ‰çŽ°æœ‰å±žæ€§æ ‡è®°ä¸º configurable:falseã€‚å¯†å°ä¹‹åŽä¸ä»…ä¸èƒ½æ·»åŠ æ–°å±žæ€§ï¼Œä¹Ÿä¸èƒ½é‡æ–°é…ç½®æˆ–è€…åˆ é™¤ä»»ä½•çŽ°æœ‰å±žæ€§(è™½ç„¶å¯ä»¥ä¿®æ”¹å±žæ€§çš„å€¼)ã€‚ 4. å†»ç»“(ä¸å¯é…ç½®,ä¹Ÿä¸å¯ä¿®æ”¹) Object.freeze(..) ä¼šåˆ›å»ºä¸€ä¸ªå†»ç»“å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®žé™…ä¸Šä¼šåœ¨ä¸€ä¸ªçŽ°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨ Object.seal(..) å¹¶æŠŠæ‰€æœ‰â€œæ•°æ®è®¿é—®â€å±žæ€§æ ‡è®°ä¸º writable:falseï¼Œè¿™æ ·å°±æ— æ³•ä¿®æ”¹å®ƒä»¬çš„å€¼ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä½ å¯ä»¥åº”ç”¨åœ¨å¯¹è±¡ä¸Šçš„çº§åˆ«æœ€é«˜çš„ä¸å¯å˜æ€§ï¼Œå®ƒä¼šç¦æ­¢å¯¹äºŽå¯¹è±¡æœ¬èº«åŠå…¶ä»»æ„ç›´æŽ¥å±žæ€§çš„ä¿®æ”¹(ä¸è¿‡å°±åƒæˆ‘ä»¬ä¹‹å‰è¯´è¿‡çš„ï¼Œè¿™ä¸ªå¯¹è±¡å¼•ç”¨çš„å…¶ä»–å¯¹è±¡æ˜¯ä¸å—å½±å“çš„)ã€‚ æ³¨æ„: ä½ å¯ä»¥â€œæ·±åº¦å†»ç»“â€ä¸€ä¸ªå¯¹è±¡(è¿žå¼•ç”¨çš„å¯¹è±¡ä¹Ÿå†»ç»“)ï¼Œå…·ä½“æ–¹æ³•ä¸ºï¼Œé¦–å…ˆåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ Object.freeze(..)ï¼Œ ç„¶åŽéåŽ†å®ƒå¼•ç”¨çš„æ‰€æœ‰å¯¹è±¡å¹¶åœ¨è¿™äº›å¯¹è±¡ä¸Šè°ƒç”¨ Object.freeze(..)ã€‚ä½†æ˜¯ä¸€å®šè¦è°¨æ…Ž!å› ä¸ºä½ å¼•ç”¨çš„å¯¹è±¡å¯èƒ½ä¼šåœ¨å…¶ä»–åœ°å‘ä¹Ÿè¢«å¼•ç”¨. è¯´æ˜Ž: åœ¨ JavaScript ç¨‹åºä¸­å¾ˆå°‘éœ€è¦æ·±ä¸å¯å˜æ€§ã€‚æœ‰äº›ç‰¹æ®Šæƒ…å†µå¯èƒ½éœ€è¦è¿™æ ·åšï¼Œ ä½†æ˜¯æ ¹æ®é€šç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚æžœä½ å‘çŽ°éœ€è¦å¯†å°æˆ–è€…å†»ç»“æ‰€æœ‰çš„å¯¹è±¡ï¼Œé‚£ä½ æˆ–è®¸åº”å½“é€€ä¸€æ­¥ï¼Œé‡æ–°æ€è€ƒä¸€ä¸‹ç¨‹åºçš„è®¾è®¡ï¼Œè®©å®ƒèƒ½æ›´å¥½åœ°åº”å¯¹å¯¹è±¡å€¼çš„æ”¹å˜ã€‚ 3.3.7 [[Get]]1234var myObject = &#123; a: 2&#125;;myObject.a; // 2 myObject.aæ˜¯æ€Žä¹ˆå–åˆ°å€¼2çš„?myObject.a é€šè¿‡å¯¹è±¡é»˜è®¤å†…ç½®çš„[[Get]] æ“ä½œ(æœ‰ç‚¹åƒå‡½æ•°è°ƒç”¨:[Get]).é¦–å…ˆå®ƒä¼šåœ¨å¯¹è±¡ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åç§°ç›¸åŒçš„å±žæ€§ï¼Œ å¦‚æžœæ‰¾åˆ°å°±ä¼šè¿”å›žè¿™ä¸ªå±žæ€§çš„å€¼ã€‚å¦‚æžœæ²¡æœ‰æ‰¾åˆ°åç§°ç›¸åŒçš„å±žæ€§ï¼ŒæŒ‰ç…§ [[Get]] ç®—æ³•çš„å®šä¹‰ä¼šæ‰§è¡Œå¦å¤–ä¸€ç§éžå¸¸é‡è¦çš„è¡Œä¸ºã€‚å…¶å®žå°±æ˜¯éåŽ†å¯èƒ½å­˜åœ¨çš„ [[Prototype]] é“¾ï¼Œä¹Ÿå°±æ˜¯åœ¨åŽŸåž‹é“¾ä¸Šå¯»æ‰¾è¯¥å±žæ€§ã€‚å¦‚æžœä»ç„¶éƒ½æ²¡æœ‰æ‰¾åˆ°åç§°ç›¸åŒçš„å±žæ€§ï¼Œé‚£ [[Get]] æ“ä½œä¼šè¿”å›žå€¼ undefined. æ³¨æ„: å¦‚æžœä½ å¼•ç”¨äº†ä¸€ä¸ªå½“å‰è¯æ³•ä½œç”¨åŸŸä¸­ä¸å­˜åœ¨çš„å˜é‡ï¼Œå¹¶ä¸ä¼šåƒå¯¹è±¡å±žæ€§ä¸€æ ·è¿”å›ž undefinedï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºä¸€ä¸ª ReferenceError å¼‚å¸¸. 3.3.8 [[Put]]æ—¢ç„¶æœ‰å¯ä»¥èŽ·å–å±žæ€§å€¼çš„ [[Get]] æ“ä½œï¼Œå°±ä¸€å®šæœ‰å¯¹åº”çš„ [[Put]] æ¥è®¾ç½®æˆ–è€…åˆ›å»ºå±žæ€§. [[Put]] è¢«è§¦å‘æ—¶çš„æ“ä½œåˆ†ä¸ºä¸¤ä¸ªæƒ…å†µ:1. å¯¹è±¡ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå±žæ€§ 2. å¯¹è±¡ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±žæ€§. å¦‚æžœå¯¹è±¡ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå±žæ€§,[[Put]] ç®—æ³•å¤§è‡´ä¼šæ£€æŸ¥ä¸‹é¢è¿™äº›å†…å®¹: å±žæ€§æ˜¯å¦æ˜¯è®¿é—®æè¿°ç¬¦(å‚è§ä¸‹ä¸€èŠ‚)?å¦‚æžœæ˜¯å¹¶ä¸”å­˜åœ¨setterå°±è°ƒç”¨setterã€‚ å±žæ€§çš„æ•°æ®æè¿°ç¬¦ä¸­writableæ˜¯å¦æ˜¯false?å¦‚æžœæ˜¯ï¼Œåœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹é™é»˜å¤±è´¥ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡º TypeError å¼‚å¸¸ã€‚ å¦‚æžœéƒ½ä¸æ˜¯ï¼Œå°†è¯¥å€¼è®¾ç½®ä¸ºå±žæ€§çš„å€¼ã€‚ å¦‚æžœå¯¹è±¡ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±žæ€§ï¼Œ[[Put]] æ“ä½œä¼šæ›´åŠ å¤æ‚ã€‚ä¼šåœ¨ç¬¬ 5 ç« è®¨è®º [[Prototype]] æ—¶è¯¦ç»†è¿›è¡Œä»‹ç»ã€‚ 3.3.9 Getterå’ŒSetterå¯¹è±¡é»˜è®¤çš„ [[Put]] å’Œ [[Get]] æ“ä½œåˆ†åˆ«å¯ä»¥æŽ§åˆ¶å±žæ€§å€¼çš„è®¾ç½®å’ŒèŽ·å–ã€‚ç›®å‰æˆ‘ä»¬è¿˜æ— æ³•æ“ä½œ[[Get]] å’Œ [[Put]]æ¥æ”¹å†™æ•´ä¸ªå¯¹è±¡ ,ä½†æ˜¯åœ¨ES5ä¸­å¯ä»¥ä½¿ç”¨ getter å’Œ setter æ”¹å†™éƒ¨åˆ†é»˜è®¤æ“ä½œ,åªèƒ½åº”ç”¨åœ¨å•ä¸ªå±žæ€§ä¸Šï¼Œæ— æ³•åº”ç”¨åœ¨æ•´ä¸ªå¯¹è±¡ä¸Šã€‚ æ³¨æ„: ä¹¦ä¸­åŽé¢è¯´çš„è®¿é—®æè¿°ç¬¦å°±æ˜¯å­˜å–æè¿°ç¬¦.å…³äºŽå±žæ€§æè¿°ç¬¦,å­˜å–æè¿°ç¬¦åŠæ•°æ®æè¿°ç¬¦å¯ä»¥æŸ¥çœ‹MDNçš„è§£é‡Š) getter:getter æ˜¯ä¸€ä¸ªéšè—å‡½æ•°ï¼Œä¼šåœ¨èŽ·å–å±žæ€§å€¼æ—¶è°ƒç”¨ã€‚åŒæ—¶ä¼šè¦†ç›–è¯¥å•ä¸ªå±žæ€§é»˜è®¤çš„ [[Get]]æ“ä½œ.å½“ä½ è®¾ç½®getteræ—¶,ä¸èƒ½åŒæ—¶å†è®¾ç½®valueæˆ–writable,å¦åˆ™å°±ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸.å¹¶ä¸”å½“ä½ è®¾ç½®getteræˆ–setteræ—¶,JavaScript ä¼šå¿½ç•¥å®ƒä»¬çš„ value å’Œ writable ç‰¹æ€§. è¯­æ³•: {get prop() { ... } }æˆ–{get [expression]() { ... } }.å…¶ä¸­prop:è¦è®¾ç½®çš„å±žæ€§å. expression:ä»Ž ECMAScript 2015 å¼€å§‹å¯ä»¥ä½¿ç”¨è®¡ç®—å±žæ€§å.ä½¿ç”¨æ–¹å¼:123456789101112131415161718192021222324var myObject = &#123; a: 1111, //åœ¨åŽé¢ä¼šå‘çŽ°myObject.aä¸º2,è¿™æ˜¯å› ä¸ºè®¾ç½®äº†getteræ‰€ä»¥å¿½ç•¥äº†valueç‰¹æ€§. //æ–¹å¼ä¸€:åœ¨æ–°å¯¹è±¡åˆå§‹åŒ–æ—¶å®šä¹‰ä¸€ä¸ªgetter get a() &#123; return 2 &#125;&#125;;Object.defineProperty( myObject, // ç›®æ ‡å¯¹è±¡ "b", // å±žæ€§å &#123; // æ–¹å¼äºŒ:ä½¿ç”¨definePropertyåœ¨çŽ°æœ‰å¯¹è±¡ä¸Šå®šä¹‰ getter get: function()&#123; return this.a * 2 &#125;, // ç¡®ä¿ b ä¼šå‡ºçŽ°åœ¨å¯¹è±¡çš„å±žæ€§åˆ—è¡¨ä¸­ enumerable: true &#125;);myObject.a = 3; //å› ä¸ºè®¾ç½®äº†getteræ‰€ä»¥å¿½ç•¥äº†writableç‰¹æ€§.æ‰€ä»¥è¿™é‡Œèµ‹å€¼æ²¡æˆåŠŸmyObject.a; // 2myObject.b; // 4delete myObject.a;//å¯ä»¥ä½¿ç”¨deleteæ“ä½œç¬¦åˆ é™¤ setter:setter æ˜¯ä¸€ä¸ªéšè—å‡½æ•°ï¼Œä¼šåœ¨èŽ·å–å±žæ€§å€¼æ—¶è°ƒç”¨ã€‚åŒæ—¶ä¼šè¦†ç›–è¯¥å•ä¸ªå±žæ€§é»˜è®¤çš„ [[Put]]æ“ä½œ(ä¹Ÿå°±æ˜¯èµ‹å€¼æ“ä½œ).å½“ä½ è®¾ç½®setteræ—¶,ä¸èƒ½åŒæ—¶å†è®¾ç½®valueæˆ–writable,å¦åˆ™å°±ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸.å¹¶ä¸”å½“ä½ è®¾ç½®getteræˆ–setteræ—¶,JavaScript ä¼šå¿½ç•¥å®ƒä»¬çš„ value å’Œ writable ç‰¹æ€§. è¯­æ³•: {set prop(val) { . . . }}æˆ–{set [expression](val) { . . . }}.å…¶ä¸­prop:è¦è®¾ç½®çš„å±žæ€§å. val:ç”¨äºŽä¿å­˜å°è¯•åˆ†é…ç»™propçš„å€¼çš„å˜é‡çš„ä¸€ä¸ªåˆ«åã€‚expression:ä»Ž ECMAScript 2015 å¼€å§‹å¯ä»¥ä½¿ç”¨è®¡ç®—å±žæ€§å.ä½¿ç”¨æ–¹å¼:1234567891011121314151617181920212223242526272829303132var myObject = &#123; //æ³¨æ„:é€šå¸¸æ¥è¯´ getter å’Œ setter æ˜¯æˆå¯¹å‡ºçŽ°çš„(åªå®šä¹‰ä¸€ä¸ªçš„è¯ é€šå¸¸ä¼šäº§ç”Ÿæ„æ–™ä¹‹å¤–çš„è¡Œä¸º): //æ–¹å¼ä¸€:åœ¨æ–°å¯¹è±¡åˆå§‹åŒ–æ—¶å®šä¹‰ä¸€ä¸ªsetter set a(val) &#123; this._a_ = val * 2 &#125;, get a() &#123; return this._a_ &#125;&#125;;Object.defineProperty( myObject, // ç›®æ ‡å¯¹è±¡ "b", // å±žæ€§å &#123; set: function(val)&#123; this._b_ = val * 3 &#125;, // æ–¹å¼äºŒ:ä½¿ç”¨definePropertyåœ¨çŽ°æœ‰å¯¹è±¡ä¸Šå®šä¹‰ setter get: function()&#123; return this._b_ &#125;, // ç¡®ä¿ b ä¼šå‡ºçŽ°åœ¨å¯¹è±¡çš„å±žæ€§åˆ—è¡¨ä¸­ enumerable: true &#125;);myObject.a = 2; myObject.b = 3; console.log(myObject.a); //4console.log(myObject.b);//9console.log(myObject._a_);//4console.log(myObject._b_);//9delete myObject.a;//å¯ä»¥ä½¿ç”¨deleteæ“ä½œç¬¦åˆ é™¤ 3.3.10 å­˜åœ¨æ€§å±žæ€§å­˜åœ¨æ€§:å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±žæ€§(å‡†ç¡®æ¥è¯´æ˜¯æ£€æŸ¥è¿™ä¸ªå±žæ€§åæ˜¯å¦å­˜åœ¨),è¿™æ—¶å°±éœ€è¦ç”¨åˆ°: inæ“ä½œç¬¦in æ“ä½œç¬¦ä¼šæ£€æŸ¥å±žæ€§æ˜¯å¦åœ¨å¯¹è±¡åŠå…¶ [[Prototype]] åŽŸåž‹é“¾ä¸­(å‚è§ç¬¬ 5 ç« )ã€‚ hasOwnProperty(..)hasOwnProperty(..) åªä¼šæ£€æŸ¥å±žæ€§æ˜¯å¦åœ¨ myObject å¯¹è±¡ä¸­ï¼Œä¸ä¼šæ£€æŸ¥ [[Prototype]] é“¾ã€‚ æ³¨æ„: 1.å¦‚æžœæœ‰çš„å¯¹è±¡å¯èƒ½æ²¡æœ‰è¿žæŽ¥åˆ° Object.prototype( é€šè¿‡Object. create(null) æ¥åˆ›å»ºâ€”â€”å‚è§ç¬¬ 5 ç« )ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½¢å¦‚myObejct.hasOwnProperty(..) å°±ä¼šå¤±è´¥ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´åŠ å¼ºç¡¬çš„æ–¹æ³•æ¥è¿›è¡Œåˆ¤æ–­:Object.prototype.hasOwnProperty. call(myObject,â€aâ€)ï¼Œå®ƒå€Ÿç”¨åŸºç¡€çš„ hasOwnProperty(..) æ–¹æ³•å¹¶æŠŠå®ƒæ˜¾å¼ç»‘å®š(å‚è§ç¬¬2ç« )åˆ° myObject ä¸Šã€‚ 2.å¯¹äºŽæ•°ç»„æ¥è¯´,ä¸è¦ä½¿ç”¨inæ“ä½œç¬¦,å› ä¸ºå®ƒæ£€æŸ¥çš„æ˜¯å±žæ€§å,åœ¨æ•°ç»„ä¸­å±žæ€§åå°±æ˜¯ç´¢å¼•,å®ƒå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€å…³æ³¨çš„é‡ç‚¹.å¯¹äºŽæ•°ç»„æˆ‘ä»¬æ›´å…³æ³¨çš„æ˜¯å®ƒæ‰€å­˜çš„å€¼,æ‰€ä»¥å¯¹äºŽæ•°ç»„æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦å­˜åœ¨è¿˜æ˜¯é‡‡ç”¨indexOfæ–¹æ³•. å±žæ€§å¯æžšä¸¾æ€§:å¦‚æžœä¸€ä¸ªå±žæ€§å­˜åœ¨,ä¸”å®ƒçš„enumerable å±žæ€§æè¿°ç¬¦ä¸ºtrueæ—¶.åˆ™å®ƒæ˜¯å¯æžšä¸¾çš„.å¹¶ä¸”å¯ä»¥è¢«for..in å¾ªçŽ¯.ä¸€ä¸ªå±žæ€§ä¸ä»…ä»…éœ€è¦å­˜åœ¨,è¿˜éœ€è¦å®ƒçš„enumerable ä¸ºtrueæ‰æ˜¯å¯æžšä¸¾çš„,æ‰èƒ½è¢«forâ€¦inéåŽ†åˆ°.æ³¨æ„: forâ€¦inä¸é€‚åˆå¯¹æ•°ç»„è¿›è¡ŒéåŽ†,å¯¹æ•°ç»„çš„éåŽ†è¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„forå¾ªçŽ¯. å¯¹å±žæ€§çš„å¯æžšä¸¾æ€§åˆ¤æ–­,åˆ™éœ€è¦ç”¨åˆ°ä»¥ä¸‹å‡ ç§æ–¹æ³•: propertyIsEnumerable(..) ä¼šæ£€æŸ¥ç»™å®šçš„å±žæ€§åæ˜¯å¦ç›´æŽ¥å­˜åœ¨äºŽå¯¹è±¡ä¸­(è€Œä¸æ˜¯åœ¨åŽŸåž‹é“¾ä¸Š)å¹¶ä¸”æ»¡è¶³ enumerable:trueã€‚ Object.keys(..) ä¼šè¿”å›žä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å¯æžšä¸¾å±žæ€§. Object.getOwnPropertyNames(..)ä¼šè¿”å›žä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å±žæ€§ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦å¯æžšä¸¾ã€‚ 3.4 éåŽ†å…³äºŽè¿™èŠ‚æˆ‘è§‰å¾—è¿˜æ˜¯ä»¥ç†æ¸…for..inå’Œfor..ofä¸ºä¸».åŽé¢å»¶ä¼¸çš„@@iteratoråŠSymbol.iteratorçš„ä½¿ç”¨,æ²¡å¿…è¦è¿‡äºŽæ·±ç©¶.æ³¨æ„ä¹¦ä¸­123é¡µç¬¬äºŒè¡Œdone æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è¿˜æœ‰å¯ä»¥éåŽ†çš„å€¼ã€‚æœ‰ä¸ªé”™è¯¯,åº”è¯¥æ”¹æˆdone æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéåŽ†æ˜¯å¦ç»“æŸã€‚å¦åˆ™ä½ åœ¨çœ‹åŽé¢å®ƒçš„è¯´æ˜Žæ—¶ä¼šæ„Ÿè§‰åˆ°è‡ªç›¸çŸ›ç›¾.è¿™é‡Œæˆ‘ä¹Ÿæ˜¯ä»¥for..inå’Œfor..ofä¸ºä¸»è¿›è¡Œè¯´æ˜Ž,ä¹Ÿæ›´è´´è¿‘æˆ‘ä»¬å®žé™…ä½¿ç”¨. for..in for..in å¾ªçŽ¯å¯ä»¥ç”¨æ¥éåŽ†å¯¹è±¡çš„å¯æžšä¸¾å±žæ€§åˆ—è¡¨(åŒ…æ‹¬ [[Prototype]] é“¾)ã€‚ å®žé™…ä¸Šfor..inéåŽ†çš„å¹¶ä¸æ˜¯å±žæ€§å€¼,è€Œæ˜¯å±žæ€§å(å³é”®å key).æ‰€ä»¥ä½ æƒ³èŽ·å–å±žæ€§å€¼è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨ä½¿ç”¨obj[key]æ¥èŽ·å–. ä¸€èˆ¬åœ¨éåŽ†å¯¹è±¡æ—¶,æŽ¨èä½¿ç”¨for..in.å½“ç„¶æ•°ç»„ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨for..inçš„.åœ¨éåŽ†æ•°ç»„æ—¶,æŽ¨èè¿˜æ˜¯ä½¿ç”¨for..of. for..of ES6 å¢žåŠ äº†ä¸€ç§ç”¨æ¥éåŽ†æ•°ç»„çš„ for..of å¾ªçŽ¯è¯­æ³•(å¦‚æžœå¯¹è±¡æœ¬èº«å®šä¹‰äº†è¿­ä»£å™¨çš„è¯ä¹Ÿå¯ä»¥éåŽ†å¯¹è±¡) for..ofä¸Žfor..inæœ€å¤§çš„ä¸åŒç‚¹æ˜¯,å®ƒå¾ªçŽ¯çš„æ˜¯å±žæ€§å€¼,è€Œä¸æ˜¯å±žæ€§å.ä¸è¿‡å®ƒåªå¾ªçŽ¯æ•°ç»„é‡Œå­˜æ”¾çš„å€¼,ä¸ä¼šæ¶‰åŠåˆ°å¯¹è±¡é‡Œçš„key.(å…³äºŽè¿™ä¸ªæˆ‘åŽé¢çš„ä¾‹å­é‡Œä¼šè¯´å…·ä½“å¯¹æ¯”æ˜Žçš„) for..of å¾ªçŽ¯é¦–å…ˆä¼šå‘è¢«è®¿é—®å¯¹è±¡è¯·æ±‚ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç„¶åŽé€šè¿‡è°ƒç”¨è¿­ä»£å™¨å¯¹è±¡çš„next() æ–¹æ³•æ¥éåŽ†æ‰€æœ‰è¿”å›žå€¼ã€‚æ•°ç»„æœ‰å†…ç½®çš„ @@iteratorï¼Œ(å¯¹è±¡æ²¡æœ‰,æ‰€ä»¥ä¸èƒ½ä½¿ç”¨for..of,é™¤éžæˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ª)å› æ­¤ for..of å¯ä»¥ç›´æŽ¥åº”ç”¨åœ¨æ•°ç»„ä¸Šã€‚ ä¾‹å­æ¯”è¾ƒ1234567891011let arr = ['shotCat',111,&#123;a:'1',b:'2'&#125;]arr.say="IG niu pi!"//ä½¿ç”¨for..inå¾ªçŽ¯for(let index in arr)&#123; console.log(arr[index]);//shotCat 111 &#123;a:'1',b:'2'&#125; IG niu pi!&#125;//ä½¿ç”¨for..ofå¾ªçŽ¯for(var value of arr)&#123; console.log(value);//shotCat 111 &#123;a:'1',b:'2'&#125;&#125;//æ³¨æ„ for..ofå¹¶æ²¡æœ‰éåŽ†å¾—åˆ°` IG niu pi!`.åŽŸå› æˆ‘å‰é¢è¯´è¿‡`å®ƒåªå¾ªçŽ¯æ•°ç»„é‡Œå­˜æ”¾çš„å€¼,ä¸ä¼šæ¶‰åŠåˆ°å¯¹è±¡é‡Œçš„key.`æ›´ä¸ç”¨è¯´ [[Prototype]] é“¾.(for..inåˆ™ä¼š) å¦‚ä½•è®©å¯¹è±¡ä¹Ÿèƒ½ä½¿ç”¨for..of ?ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¹¦ä¸­çš„è‡ªå·±é€šè¿‡Object.defineProperty()å®šä¹‰ä¸€ä¸ªSymbol.iteratorå±žæ€§æ¥å®žçŽ°.è¿™é‡Œæˆ‘å°±ä¸èµ˜è¿°äº†.ä¹Ÿæ˜¯æœ€æŽ¥è¿‘åŽŸç”Ÿä½¿ç”¨æ„Ÿå—çš„.ä¸è¿‡æˆ‘è¿™é‡Œè¦ä»‹ç»ä¸€ä¸ªç¨å¾®ç®€å•ç‚¹çš„æ–¹æ³•æ¥å®žçŽ°.å°±æ˜¯ä½¿ç”¨ä¸ŠèŠ‚è®²åˆ°çš„Object.keys()æ­é…ä½¿ç”¨.ä¸¾ä¸ªä¾‹å­:12345678910111213var shotCat=&#123; name:'shotCat', age:'forever18', info:&#123; sex:'true man', city:'wuhan', girlFriend:'æ–°åž£ç»“è¡£!' &#125;&#125;for(var key of Object.keys(shotCat))&#123; //ä½¿ç”¨Object.keys()æ–¹æ³•èŽ·å–å¯¹è±¡keyçš„æ•°ç»„ console.log(key+": "+shotCat[key]);&#125; 3.5 å°ç»“ä¹¦ä¸­å°ç»“æ€»ç»“å¾—æŒºå…¨çš„,è¿™é‡Œæˆ‘å°±æ¬è¿ä¸‹ JavaScript ä¸­çš„å¯¹è±¡æœ‰å­—é¢å½¢å¼(æ¯”å¦‚ var a = { .. })å’Œæž„é€ å½¢å¼(æ¯”å¦‚ var a = new Array(..))ã€‚å­—é¢å½¢å¼æ›´å¸¸ç”¨ï¼Œä¸è¿‡æœ‰æ—¶å€™æž„é€ å½¢å¼å¯ä»¥æä¾›æ›´å¤šé€‰é¡¹ã€‚ å¯¹è±¡æ˜¯ 6 ä¸ª(æˆ–è€…æ˜¯ 7 ä¸ªï¼Œå–å†³äºŽä½ çš„è§‚ç‚¹)åŸºç¡€ç±»åž‹ä¹‹ä¸€ã€‚å¯¹è±¡æœ‰åŒ…æ‹¬ function åœ¨å†…çš„å­ç±»åž‹ï¼Œä¸åŒå­ç±»åž‹å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œæ¯”å¦‚å†…éƒ¨æ ‡ç­¾ [object Array] è¡¨ç¤ºè¿™æ˜¯å¯¹è±¡çš„å­ç±»åž‹æ•°ç»„ã€‚ å¯¹è±¡å°±æ˜¯é”® / å€¼å¯¹çš„é›†åˆã€‚å¯ä»¥é€šè¿‡ .propName æˆ–è€… [â€œpropNameâ€] è¯­æ³•æ¥èŽ·å–å±žæ€§å€¼ã€‚è®¿é—®å±žæ€§æ—¶ï¼Œå¼•æ“Žå®žé™…ä¸Šä¼šè°ƒç”¨å†…éƒ¨çš„é»˜è®¤ [[Get]] æ“ä½œ(åœ¨è®¾ç½®å±žæ€§å€¼æ—¶æ˜¯ [[Put]])ï¼Œ [[Get]] æ“ä½œä¼šæ£€æŸ¥å¯¹è±¡æœ¬èº«æ˜¯å¦åŒ…å«è¿™ä¸ªå±žæ€§ï¼Œå¦‚æžœæ²¡æ‰¾åˆ°çš„è¯å®ƒè¿˜ä¼šæŸ¥æ‰¾ [[Prototype]] é“¾(å‚è§ç¬¬ 5 ç« )ã€‚ å±žæ€§çš„ç‰¹æ€§å¯ä»¥é€šè¿‡å±žæ€§æè¿°ç¬¦æ¥æŽ§åˆ¶ï¼Œæ¯”å¦‚ writable å’Œ configurableã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨ Object.preventExtensions(..)ã€Object.seal(..) å’Œ Object.freeze(..) æ¥è®¾ç½®å¯¹è±¡(åŠå…¶å±žæ€§)çš„ä¸å¯å˜æ€§çº§åˆ«ã€‚ å±žæ€§ä¸ä¸€å®šåŒ…å«å€¼â€”â€”å®ƒä»¬å¯èƒ½æ˜¯å…·å¤‡ getter/setter çš„â€œè®¿é—®æè¿°ç¬¦â€ã€‚æ­¤å¤–ï¼Œå±žæ€§å¯ä»¥æ˜¯å¯æžšä¸¾æˆ–è€…ä¸å¯æžšä¸¾çš„ï¼Œè¿™å†³å®šäº†å®ƒä»¬æ˜¯å¦ä¼šå‡ºçŽ°åœ¨ for..in å¾ªçŽ¯ä¸­ã€‚ å¯ä»¥ä½¿ç”¨ ES6 çš„ for..of è¯­æ³•æ¥éåŽ†æ•°æ®ç»“æž„(æ•°ç»„ã€å¯¹è±¡ï¼Œç­‰ç­‰)ä¸­çš„å€¼ï¼Œfor..of ä¼šå¯»æ‰¾å†…ç½®æˆ–è€…è‡ªå®šä¹‰çš„ @@iterator å¯¹è±¡å¹¶è°ƒç”¨å®ƒçš„ next() æ–¹æ³•æ¥éåŽ†æ•°æ®å€¼ã€‚ ç¬¬å››ç«  æ··åˆå¯¹è±¡â€ç±»â€æ³¨æ„: æ­£å¦‚ä¹¦ä¸­æç¤ºçš„é‚£æ ·,æ•´ç« ä¸€åŠä»¥ä¸Šå‡ ä¹Žéƒ½æ˜¯è®²é¢å‘å¯¹è±¡å’Œç±»çš„æ¦‚å¿µ.ä¼šè¯»å¾—äººäº‘é‡Œé›¾é‡Œ,ç»™äººå“¦,ä¹Ÿè®¸å¤§æ¦‚å°±æ˜¯è¿™æ ·å­çš„æ„Ÿè§‰.åŽé¢æˆ‘è¿˜æ˜¯ä¼šå¯¹é‚£äº›æŠ½è±¡çš„æ¦‚å¿µæ‰¾åˆ°åœ¨JavaScripté‡Œå¯¹åº”çš„â€ç«‹è¶³ç‚¹â€,ä¸è‡³äºŽå¯¹è¿™äº›æ¦‚å¿µå¤ªâ€é£˜â€. 4.1 ç±»ç†è®ºè¯´æ˜Ž: ç±»å…¶æ˜¯æè¿°äº†ä¸€ç§ä»£ç çš„ç»„ç»‡ç»“æž„å½¢å¼. åœ¨jsä¸­ç±»å¸¸è§çš„å°±æ˜¯æž„é€ å‡½æ•°,ä¹Ÿå¯ä»¥æ˜¯é€šè¿‡ES6æä¾›çš„classå…³é”®å­—;ç»§æ‰¿å°±æ˜¯å‡½æ•°;å®žä¾‹åŒ–å°±æ˜¯å¯¹è±¡,å¸¸è§çš„å°±æ˜¯é€šè¿‡newæž„é€ å‡½æ•°å®žçŽ°çš„. æ³¨æ„: Javascriptè¯­è¨€ä¸æ”¯æŒâ€œç±»â€ï¼Œæ‰€è°“çš„â€ç±»â€ä¹Ÿæ˜¯æ¨¡æ‹Ÿå‡ºçš„â€œç±»â€ã€‚å³ä½¿æ˜¯ES6å¼•å…¥çš„â€ç±»â€å®žè´¨ä¸Šä¹Ÿæ˜¯ JavaScript çŽ°æœ‰çš„åŸºäºŽåŽŸåž‹çš„ç»§æ‰¿çš„è¯­æ³•ç³–ã€‚ 4.1.1 â€œç±»â€è®¾è®¡æ¨¡å¼ä¸€å¥è¯:ç±»å…¶å®žä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼! ç±»å¹¶ä¸æ˜¯å¿…é¡»çš„ç¼–ç¨‹åŸºç¡€,è€Œæ˜¯ä¸€ç§å¯é€‰çš„ä»£ç æŠ½è±¡. æœ‰äº›è¯­è¨€(æ¯”å¦‚ Java)å¹¶ä¸ä¼šç»™ä½ é€‰æ‹©çš„æœºä¼šï¼Œç±»å¹¶ä¸æ˜¯å¯é€‰çš„â€”â€”ä¸‡ç‰©çš†æ˜¯ç±»ã€‚ å…¶ä»–è¯­è¨€(æ¯”å¦‚ C/C++ æˆ–è€… PHP)ä¼šæä¾›è¿‡ç¨‹åŒ–å’Œé¢å‘ç±»è¿™ä¸¤ç§è¯­æ³•ï¼Œå¼€å‘è€…å¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ç§é£Žæ ¼æˆ–è€…æ··ç”¨ä¸¤ç§é£Žæ ¼ã€‚ 4.1.2 JavaScriptä¸­çš„â€œç±»â€JavaScript åªæœ‰ä¸€äº›è¿‘ä¼¼ç±»çš„è¯­æ³•å…ƒç´  (æ¯”å¦‚ new å’Œ instanceof)ï¼Œä¸è¿‡åœ¨åŽæ¥çš„ ES6 ä¸­æ–°å¢žäº†ä¸€äº›å…ƒç´ ï¼Œæ¯”å¦‚ class å…³é”®å­—,å…¶å®žè´¨ä¸Šä¹Ÿæ˜¯ JavaScript çŽ°æœ‰çš„åŸºäºŽåŽŸåž‹çš„ç»§æ‰¿çš„è¯­æ³•ç³–ã€‚ä¹Ÿä¸æ˜¯çœŸæ­£çš„ç±». 4.2 ç±»çš„æœºåˆ¶è¿™éƒ¨åˆ†ä¹¦ä¸­çš„æè¿°,æˆ‘ç†è§£èµ·æ¥ä¹Ÿæ¯”è¾ƒè´¹åŠ²,ä¸»è¦æ˜¯å®ƒæåˆ°çš„æ ˆ,å †ä¸Žæˆ‘ç†è§£ä¸­å†…å­˜é‡Œçš„æ ˆ,å †ç›¸å†²çªäº†.è¿™é‡Œç®€å•è¯´ä¸‹æˆ‘çš„ç†è§£,å¦‚æœ‰è¯¯,æ„Ÿæ¿€æŒ‡æ­£. stackç±»å…¶å®žæ˜¯ä¸€ç§æ•°æ®ç»“æž„.å®ƒå¯ä»¥å‚¨å­˜æ•°æ®,å¹¶æä¾›ä¸€äº›å…¬ç”¨çš„æ–¹æ³•(è¿™å’Œä¸Šé¢æåˆ°çš„ç±»å¾ˆç›¸ä¼¼).ä½†æ˜¯stackç±»å…¶å®žåªæ˜¯ä¸€ä¸ªæŠ½è±¡çš„è¡¨ç¤º,ä½ æƒ³å¯¹å®ƒè¿›è¡Œæ“ä½œ,å°±éœ€è¦å…ˆå¯¹å®ƒè¿›è¡Œå®žä¾‹åŒ–. 4.2.1 å»ºé€ è¿™èŠ‚ä¸»è¦å°±æ˜¯è¯´æ˜Žâ€ç±»â€å’Œâ€å®žä¾‹â€çš„å…³ç³».åœ¨JavaScripté‡Œâ€ç±»â€ä¸»è¦æ˜¯æž„é€ å‡½æ•°,â€å®žä¾‹â€å°±æ˜¯å¯¹è±¡. ä¸€ä¸ªç±»å°±åƒä¸€å¼ è“å›¾ã€‚ä¸ºäº†èŽ·å¾—çœŸæ­£å¯ä»¥äº¤äº’çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‰ç…§ç±»æ¥å®žä¾‹åŒ–ä¸€ä¸ªä¸œè¥¿ï¼Œè¿™ä¸ªä¸œè¥¿(å¯¹è±¡)é€šå¸¸è¢«ç§°ä¸ºå®žä¾‹ï¼Œæœ‰éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥åœ¨å®žä¾‹ä¸Šè°ƒç”¨æ–¹æ³•å¹¶è®¿é—®å…¶æ‰€æœ‰å…¬æœ‰æ•°æ®å±žæ€§ã€‚ æ€»è€Œè¨€ä¹‹:ç±»é€šè¿‡å®žä¾‹åŒ–å¾—åˆ°å®žä¾‹å¯¹è±¡. 4.2.2 æž„é€ å‡½æ•° ç±»å®žä¾‹æ˜¯ç”±ä¸€ä¸ªç‰¹æ®Šçš„ç±»æ–¹æ³•æž„é€ çš„ï¼Œè¿™ä¸ªæ–¹æ³•åé€šå¸¸å’Œç±»åç›¸åŒï¼Œè¢«ç§°ä¸ºæž„é€ å‡½æ•°ã€‚ å®žä¾‹å°±æ˜¯ç”±æž„é€ å‡½æ•°å®žä¾‹åŒ–çš„: new æž„é€ å‡½æ•°. æž„é€ å‡½æ•°å¤§å¤šéœ€è¦ç”¨ new æ¥è°ƒï¼Œè¿™æ ·è¯­è¨€å¼•æ“Žæ‰çŸ¥é“ä½ æƒ³è¦æž„é€ ä¸€ä¸ªæ–°çš„ç±»å®žä¾‹ã€‚ æž„é€ å‡½æ•°ä¼šè¿”å›žä¸€ä¸ªå¯¹è±¡,è¿™ä¸ªå¯¹è±¡å°±æ˜¯å®žä¾‹.è¿™ä¸ªå¯¹è±¡å¯ä»¥è°ƒç”¨ç±»çš„æ–¹æ³•. 4.3 ç±»çš„ç»§æ‰¿åœ¨é¢å‘ç±»çš„è¯­è¨€ä¸­ï¼Œä½ å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åŽå®šä¹‰ä¸€ä¸ªç»§æ‰¿å‰è€…çš„ç±»ã€‚åŽè€…é€šå¸¸è¢«ç§°ä¸ºâ€œå­ç±»â€ï¼Œå‰è€…é€šå¸¸è¢«ç§°ä¸ºâ€œçˆ¶ç±»â€ã€‚å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„è¡Œä¸º,å¹¶ä¸”å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚,ä¿®æ”¹ç»§æ‰¿çš„è¡Œä¸º(ä¸€èˆ¬å¹¶ä¸ä¼šä¿®æ”¹çˆ¶ç±»çš„è¡Œä¸º).æ³¨æ„:æˆ‘ä»¬è®¨è®ºçš„çˆ¶ç±»å’Œå­ç±»å¹¶ä¸æ˜¯å®žä¾‹,åœ¨JavaScripté‡Œç±»ä¸€èˆ¬éƒ½æ˜¯æž„é€ å‡½æ•°ã€‚ 4.3.1 å¤šæ€å¤§æ¦‚ä½ çœ‹äº†å®ƒçš„â€è§£é‡Šâ€,å¯¹å¤šæ€è¿˜æ˜¯æ‡µæ‡µæ‡‚æ‡‚.è¿™é‡Œæˆ‘å†è§£é‡Šä¸‹:ä»€ä¹ˆæ˜¯å¤šæ€?åŒä¸€ä¸ªæ“ä½œï¼Œä½œç”¨äºŽä¸åŒçš„å¯¹è±¡ï¼Œä¼šäº§ç”Ÿä¸åŒçš„ç»“æžœã€‚å‘å‡ºä¸€ä¸ªç›¸åŒçš„æŒ‡ä»¤åŽï¼Œä¸åŒçš„å¯¹è±¡ä¼šå¯¹è¿™ä¸ªæŒ‡ä»¤æœ‰ä¸åŒçš„ååº”ï¼Œæ•…ç§°ä¸ºå¤šæ€ã€‚è¯´æ˜Ž: ä¹¦ä¸­ä¾‹å­ä¸­çš„inheritedå…¶å®žå°±æ˜¯ç›¸å½“äºŽsuper.å¹¶ä¸”æ³¨æ„ä¹¦ä¸­çš„è¿™äº›ä¾‹å­éƒ½æ˜¯ä¼ªä»£ç ! å¹¶ä¸æ˜¯çœŸçš„åœ¨JavaScripté‡Œå°±æ˜¯è¿™æ ·å®žçŽ°çš„.è¡¥å……:è¿™é‡Œæ˜¯å…³äºŽsuperçš„mdné“¾æŽ¥. å¤šæ€: ç›¸å¯¹æ€§: å…¶å®žç›¸å¯¹æ€§å°±æ˜¯å­ç±»ç›¸å¯¹äºŽçˆ¶ç±»çš„å¼•ç”¨(ä¾‹å¦‚ä½¿ç”¨superå®žçŽ°å¼•ç”¨),å¹¶ä¸”å­ç±»å¯¹çˆ¶ç±»çš„å¼•ç”¨å¹¶ä¸ä¼šå¯¹çˆ¶ç±»çš„è¡Œä¸ºé€ æˆä»»ä½•å½±å“(å¹¶ä¸ä¼šå¯¹çˆ¶ç±»è‡ªèº«çš„è¡Œä¸ºè¿›è¡Œé‡æ–°å®šä¹‰),ä¾‹å¦‚ä¹¦ä¸­ä¾‹å­å­ç±»å¯¹drive()çš„å¼•ç”¨. å¯é‡å¤å®šä¹‰: å­ç±»ç»§æ‰¿çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•,å¹¶å¯ä»¥å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œå†æ¬¡å®šä¹‰,ä¾‹å¦‚ä¹¦ä¸­å­ç±»å¯¹drive()ä¸­çš„outputè¿›è¡Œä¿®æ”¹.å½“è°ƒç”¨æ–¹æ³•æ—¶ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å®šä¹‰,è¿™å¥è¯æ€Žä¹ˆç†è§£,å½“å­ç±»å®žä¾‹åŒ–åŽ,æ‰§è¡Œdrive()æ–¹æ³•æ—¶,å®ƒå¹¶ä¸ä¼šç›´æŽ¥åŽ»æ‰§è¡Œçˆ¶ç±»çš„drive().è€Œæ˜¯å­ç±»ä¸Šçš„drive().ç®€å•æ¥è¯´å°±æ˜¯å®žä¾‹æ¥æºäºŽé‚£ä¸ªç±»,å®ƒå°±ä½¿ç”¨é‚£ä¸ªç±»çš„æ–¹æ³•. è¯´æ˜Ž: åœ¨ JavaScript ä¸­â€œç±»â€æ˜¯å±žäºŽæž„é€ å‡½æ•°çš„(ç±»ä¼¼ Foo.prototypeâ€¦ è¿™æ ·çš„ç±»åž‹å¼•ç”¨)ã€‚ç”±äºŽ JavaScriptä¸­çˆ¶ç±»å’Œå­ç±»çš„å…³ç³»åªå­˜åœ¨äºŽä¸¤è€…æž„é€ å‡½æ•°å¯¹åº”çš„ .prototype å¯¹è±¡ä¸­ï¼Œå› æ­¤å®ƒä»¬çš„æž„é€ å‡½æ•°ä¹‹é—´å¹¶ä¸å­˜åœ¨ç›´æŽ¥è”ç³»ï¼Œä»Žè€Œæ— æ³•ç®€å•åœ°å®žçŽ°ä¸¤è€…çš„ç›¸å¯¹å¼•ç”¨(åœ¨ ES6 çš„ç±»ä¸­å¯ä»¥é€šè¿‡ superæ¥â€œè§£å†³â€è¿™ä¸ªé—®é¢˜ï¼Œå‚è§é™„å½• A)ã€‚ å¤šæ€å¹¶ä¸è¡¨ç¤ºå­ç±»å’Œçˆ¶ç±»æœ‰å…³è”ï¼Œå­ç±»å¾—åˆ°çš„åªæ˜¯çˆ¶ç±»çš„ä¸€ä»½å‰¯æœ¬ã€‚ç±»çš„ç»§æ‰¿å…¶å®žå°±æ˜¯å¤åˆ¶ã€‚ å…¶å®žè¿™é‡Œè®¨è®ºçš„è¿™äº›æ¦‚å¿µå…¶å®žåœ¨æˆ‘ä»¬å®žé™…å·¥ä½œä¸­,å·²ç»ä½¿ç”¨äº†æ— æ•°æ¬¡,åªæ˜¯çŽ°åœ¨ä½ éœ€è¦ç†è§£â€åŽŸæ¥ä½ æ˜¯å«è¿™ä¸ªåå­—å•Š!â€ 4.3.2 å¤šé‡ç»§æ‰¿å¤šé‡ç»§æ‰¿: ä¸€ä¸ªå­ç±»å¯ä»¥ç»§æ‰¿æ¥è‡ªå¤šä¸ªçˆ¶ç±»çš„æ–¹æ³•.å¤šé‡ç»§æ‰¿å¼•å‘çš„é—®é¢˜: å¤šé‡ç»§æ‰¿å¯èƒ½ä¼šå‡ºçŽ°,å¤šä¸ªçˆ¶ç±»ä¸­æ–¹æ³•åå†²çªçš„é—®é¢˜,è¿™æ ·å­ç±»åˆ°åº•å¼•ç”¨å“ªä¸ªæ–¹æ³•?å¤šé‡ç»§æ‰¿ä¸ŽJavaScript: JavaScriptæœ¬èº«å¹¶æ²¡æœ‰æä¾›å¤šé‡ç»§æ‰¿åŠŸèƒ½.ä½†å®ƒå¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•æ¥è¾¾åˆ°å¤šé‡ç»§æ‰¿çš„æ•ˆæžœ. 4.4 æ··å…¥JavaScript ä¸­åªæœ‰å¯¹è±¡ï¼Œå¹¶ä¸å­˜åœ¨å¯ä»¥è¢«å®žä¾‹åŒ–çš„â€œç±»â€ã€‚ä¸€ä¸ªå¯¹è±¡å¹¶ä¸ä¼šè¢«å¤åˆ¶åˆ°å…¶ä»–å¯¹è±¡ï¼Œå®ƒä»¬ä¼šè¢«å…³è”èµ·æ¥(å‚è§ç¬¬ 5 ç« )(å…¶å®žå°±æ˜¯å¼•ç”¨,æ‰€ä»¥å®ƒçš„å¤šæ€æ˜¯â€ç›¸å¯¹â€çš„)ã€‚ç”±äºŽåœ¨å…¶ä»–è¯­è¨€ä¸­ç±»è¡¨çŽ°å‡ºæ¥çš„éƒ½æ˜¯å¤åˆ¶è¡Œä¸ºï¼Œå› æ­¤ JavaScript å¼€å‘è€…ä¹Ÿæƒ³å‡ºäº†ä¸€ä¸ªæ–¹æ³•æ¥æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æ··å…¥(å°±æ˜¯é€šè¿‡æ··å…¥æ¥æ¨¡æ‹Ÿå®žçŽ°ç±»çš„å¤šé‡ç»§æ‰¿)ã€‚ 4.4.1 æ˜¾å¼æ··å…¥éƒ‘é‡æé†’: ä¹¦ä¸­è¿™é‡Œçš„ç±»éƒ½æ˜¯å¯¹è±¡å½¢å¼çš„.ä¾‹å­é‡Œçš„sourceObj, targetObj,è¿™å°±å¯èƒ½é€ æˆä¸€ä¸ªâ€è¯¯å¯¼â€,åœ¨JavaScripté‡Œæ˜¯æ²¡æœ‰çœŸæ­£çš„ç±»,æ‰€è°“çš„ç±»ä¹Ÿä¸è¿‡æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºæ¥çš„â€ç±»â€,ä¸è¿‡æ˜¯ä¸€ç§è¯­æ³•ç³–(åŒ…æ‹¬ES6é‡Œçš„class).åœ¨JavaScripté‡Œâ€æ‰€è°“çš„ç±»â€ç»å¸¸æ˜¯ä¸€ä¸ªæž„é€ å‡½æ•°,ä½ å¹¶ä¸èƒ½è¿™æ ·è¿›è¡ŒéåŽ†,åªèƒ½å¯¹å®ƒçš„å®žä¾‹å¯¹è±¡è¿›è¡Œè¿™ç§æ“ä½œ.ä¸è¦è¢«ä¹¦ä¸­ä¾‹å­å¸¦è¿›åŽ»äº†,ä¸è¦æ··æ·†,æ¯•ç«Ÿæˆ‘ä»¬æœ€ç»ˆä½¿ç”¨çš„æ˜¯JavaScript(è€Œä¸æ˜¯å…¶ä»–é¢å‘å¯¹è±¡çš„è¯­è¨€.),å®ƒé‡Œé¢çš„ç±»å¸¸å¸¸å¹¶ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡! æ˜¾å¼æ··å…¥: ä¹¦ä¸­æ²¡æœ‰ç»™å‡ºæ˜Žç¡®çš„æ˜¾å¼æ··å…¥çš„å®šä¹‰,ä½†æ˜¯è¯»å®Œæ•´ç« .åŸºæœ¬å°±çŸ¥é“ä»€ä¹ˆæ˜¯æ˜¾å¼æ··å…¥äº†.æ˜¾å¼æ··å…¥å°±æ˜¯é€šè¿‡ç±»ä¼¼mixin()æ–¹æ³•,æ˜¾å¼åœ°å°†çˆ¶å¯¹è±¡å±žæ€§é€ä¸€å¤åˆ¶,æˆ–è€…æœ‰é€‰æ‹©åœ°å¤åˆ¶(å³ä¾‹å­ä¸­çš„å­˜åœ¨æ€§æ£€æŸ¥)åˆ°å­å¯¹è±¡ä¸Š. æ˜¾å¼æ··å…¥å¸¸ç”¨æ–¹æ³•: å°±æ˜¯ä¹¦ä¸­çš„ä¾‹å­, é¦–å…ˆæœ‰å­å¯¹è±¡,å¹¶å¯¹å…¶è¿›è¡Œç‰¹æ®ŠåŒ–(å®šä¹‰è‡ªå·±çš„å±žæ€§æˆ–æ–¹æ³•).ç„¶åŽå†é€šè¿‡mixin()æ–¹æ³•å°†çˆ¶å¯¹è±¡æœ‰é€‰æ‹©åœ°å¤åˆ¶(å³å­˜åœ¨æ€§æ£€æŸ¥,è¿‡æ»¤å­å¯¹è±¡å·²æœ‰çš„å±žæ€§,é¿å…å†²çª)åˆ°å­å¯¹è±¡ä¸Š. æ˜¾å¼æ··å…¥æ³¨æ„ç‚¹:æ˜¾å¼æ··å…¥æ—¶,åˆ‡è®°ä¸€ç‚¹ä½ è¦é¿å…çˆ¶å¯¹è±¡çš„å±žæ€§ä¸Žå­å¯¹è±¡ç‰¹æ®ŠåŒ–çš„å±žæ€§å†²çª.è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¾‹å­ä¸­è¦è¿›è¡Œå­˜åœ¨æ€§æ£€æŸ¥,ä»¥åŠåŽé¢è¦è¯´çš„æ··åˆå¤åˆ¶,å¯èƒ½å­˜åœ¨çš„é‡å†™é£Žé™©. 1. å†è¯´å¤šæ€(å…¶å®žè¯´çš„å°±æ˜¯jsé‡Œçš„å¤šæ€)æ˜¾å¼å¤šæ€: å°†çˆ¶å¯¹è±¡é‡Œçš„æ–¹æ³•é€šè¿‡æ˜¾å¼ç»‘å®šåˆ°å­å¯¹è±¡ä¸Š.å°±æ˜¯æ˜¾å¼å¤šæ€.ä¾‹å¦‚ä¹¦ä¸­çš„ä¾‹å­:Vehicle.drive.call( this )ã€‚æ˜¾å¼å¤šæ€ä¹Ÿæ˜¯ä¸ºäº†JSæ¥æ¨¡æ‹Ÿå®žçŽ°å¤šé‡ç»§æ‰¿çš„!è¯´æ˜Ž: åœ¨ES6ä¹‹å‰æ˜¯æ²¡æœ‰ç›¸å¯¹å¤šæ€çš„æœºåˆ¶ã€‚æ‰€ä»¥å°±ä½¿ç”¨callè¿™ç§è¿›è¡Œæ˜¾å¼ç»‘å®šå®žçŽ°æ˜¾å¼åŠ¨æ€.æ³¨æ„JavaScripté‡Œå®žçŽ°å¤šæ€çš„æ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºâ€ä¼ªå¤šæ€â€.æ‰€ä»¥ä¸è¦å¯¹åŽé¢çªç„¶å†’å‡ºçš„ä¼ªå¤šæ€æ¦‚å¿µè€Œä¸€è„¸æ‡µé€¼(å…¶å®žæ•´æœ¬ä¹¦ç»å¸¸åšè¿™æ ·çš„äº‹) æ˜¾å¼å¤šæ€(ä¼ªå¤šæ€)çš„ç¼ºé™·: å› ä¸ºåœ¨JavaScript ä¸­å­˜åœ¨å±è”½(å®žé™…æ˜¯å‡½æ•°å¼•ç”¨çš„ä¸Šä¸‹æ–‡ä¸åŒ),æ‰€ä»¥åœ¨å¼•ç”¨çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨æ˜¾å¼ä¼ªå¤šæ€çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå‡½æ•°å…³è”. è¿™äº›éƒ½ä¼šå¢žåŠ ä»£ç çš„å¤æ‚åº¦å’Œç»´æŠ¤éš¾åº¦(è¿‡å¤šçš„thisç»‘å®š,çœŸçš„ä¼šè®©ä»£ç å¾ˆéš¾è¯»)ã€‚ 2. æ··åˆå¤åˆ¶(æ˜¾å¼æ··å…¥å¦ä¸€ç§ä¸å¸¸ç”¨æ–¹æ³•)å‰é¢çš„æ˜¾å¼æ··å…¥çš„æ–¹æ³•æ˜¯å…ˆæœ‰å­å¯¹è±¡å¹¶è¿›è¡Œç‰¹æ®ŠåŒ–,ç„¶åŽå†æœ‰é€‰æ‹©åœ°å¤åˆ¶çˆ¶å¯¹è±¡å±žæ€§.è¿™ä¸ªä¸å¸¸ç”¨çš„æ–¹æ³•åˆ™æ˜¯åè¿‡æ¥çš„,ç»“åˆä¹¦ä¸­ä¾‹å­,å®ƒå…ˆç”¨ä¸€ä¸ªç©ºå¯¹è±¡å®Œå…¨å¤åˆ¶çˆ¶å¯¹è±¡çš„å±žæ€§,ç„¶åŽè¯¥å¯¹è±¡å¤åˆ¶ç‰¹æ®ŠåŒ–å¯¹è±¡çš„å±žæ€§,æœ€åŽå¾—åˆ°å­å¯¹è±¡.è¿™ç§æ–¹æ³•æ˜Žæ˜¾æ˜¯æ¯”ç¬¬ä¸€ç§éº»çƒ¦çš„,å¹¶ä¸”åœ¨å¤åˆ¶ç‰¹æ®ŠåŒ–å¯¹è±¡æ—¶,å¯èƒ½ä¼šå¯¹ä¹‹å‰é‡åçš„å±žæ€§(å³å¤åˆ¶å¾—åˆ°çš„çˆ¶å¯¹è±¡å±žæ€§)è¿›è¡Œé‡å†™è¦†ç›–.æ‰€ä»¥è¿™ç§æ–¹æ³•æ˜¯å­˜åœ¨é£Žé™©,ä¸”æ•ˆçŽ‡ä½Žä¸‹çš„. æ˜¾å¼æ··å…¥çš„ç¼ºé™·: æ— æ³•åšåˆ°çœŸæ­£çš„å¤åˆ¶: å¦‚æžœå¤åˆ¶çš„å¯¹è±¡ä¸­å­˜åœ¨å¯¹å‡½æ•°çš„å¼•ç”¨,é‚£ä¹ˆå­å¯¹è±¡å¾—åˆ°çš„æ˜¯å’Œçˆ¶å¯¹è±¡ä¸€æ ·çš„,å¯¹åŒä¸€ä¸ªå‡½æ•°çš„å¼•ç”¨.å¦‚æžœæŸä¸ªå­å¯¹è±¡å¯¹å‡½æ•°è¿›è¡Œäº†ä¿®æ”¹,é‚£ä¹ˆçˆ¶å¯¹è±¡åŠå…¶ä»–å­å¯¹è±¡éƒ½ä¼šå—åˆ°å½±å“.å¾ˆæ˜Žæ˜¾è¿™æ˜¯ä¸å®‰å…¨çš„.åŽŸå› æ˜¯JavaScript ä¸­çš„å‡½æ•°æ— æ³•è¿›è¡ŒçœŸæ­£åœ°å¤åˆ¶ï¼Œä½ åªèƒ½å¤åˆ¶å¯¹å…±äº«å‡½æ•°å¯¹è±¡çš„å¼•ç”¨. å‡½æ•°åå’Œå±žæ€§ååŒå: å¦‚æžœæ··å…¥å¤šä¸ªå¯¹è±¡,åˆ™å¯èƒ½ä¼šå‡ºçŽ°è¿™ç§æƒ…å†µ.ç›®å‰çŽ°åœ¨ä»æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹å¼æ¥å¤„ç†å‡½æ•°å’Œå±žæ€§çš„åŒåé—®é¢˜(æé—®:è¿™ç§æƒ…å†µä¸‹è°çš„ä¼˜å…ˆçº§æ›´é«˜?æ»‘ç¨½è„¸)ã€‚ 3. å¯„ç”Ÿç»§æ‰¿æ˜¾å¼æ··å…¥æ¨¡å¼çš„ä¸€ç§å˜ä½“è¢«ç§°ä¸ºâ€œå¯„ç”Ÿç»§æ‰¿â€ï¼Œå®ƒæ—¢æ˜¯æ˜¾å¼çš„åˆæ˜¯éšå¼çš„.é¦–å…ˆä¼šå¤åˆ¶ä¸€ä»½çˆ¶ç±»(å¯¹è±¡)çš„å®šä¹‰ï¼Œç„¶åŽæ··å…¥å­ç±»(å¯¹è±¡)çš„å®šä¹‰(å¦‚æžœéœ€è¦çš„è¯ä¿ç•™åˆ°çˆ¶ç±»çš„ç‰¹æ®Šå¼•ç”¨)ï¼Œç„¶åŽç”¨è¿™ä¸ªå¤åˆå¯¹è±¡æž„å»ºå®žä¾‹ã€‚è¯´æ˜Ž: å¯„ç”Ÿç»§æ‰¿ä¸Žæ··åˆå¤åˆ¶æ˜¯å¾ˆç›¸ä¼¼çš„,æœ€å¤§çš„åŒºåˆ«æ˜¯å¯„ç”Ÿç»§æ‰¿æ˜¯é€šè¿‡å®žä¾‹åŒ–æž„é€ å‡½æ•°(JSä¸­çš„â€ç±»â€)æ¥å®žçŽ°å¤åˆ¶çš„. 4.4.2 éšå¼æ··å…¥éšå¼æ··å…¥: å®ƒä¸Žæ˜¾ç¤ºæ··å…¥æœ€å¤§çš„åŒºåˆ«,å°±æ˜¯å®ƒæ²¡æœ‰æ˜Žæ˜¾çš„å¯¹çˆ¶ç±»(å¯¹è±¡)å±žæ€§è¿›è¡Œå¤åˆ¶çš„è¿‡ç¨‹.å®ƒæ˜¯é€šè¿‡åœ¨æž„é€ å‡½æ•°è°ƒç”¨æˆ–è€…æ–¹æ³•è°ƒç”¨ä¸­ä½¿ç”¨æ˜¾å¼ç»‘å®šä¾‹å¦‚: Something.cool.call( this)æ¥å®žçŽ°æ··å…¥(å¤šé‡ç»§æ‰¿).å…¶æœ¬è´¨å°±æ˜¯é€šè¿‡æ”¹å˜thisæŒ‡å‘æ¥å®žçŽ°æ··å…¥. 4.5 å°ç»“æ•´ç« çš„é‡ç‚¹å…¶å®žå°±æ˜¯è®©ä½ ç†è§£ä»€ä¹ˆå«ç±».é™¤äº†æœ€åŽä¸€å°èŠ‚çš„æ··å…¥å’ŒJavaScriptæœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹å…³ç³».å…¶ä½™çš„å°ç»“å’ŒJavaScriptéƒ½æ²¡ä»€ä¹ˆå…³ç³».é‡è¦çš„æ˜¯ç†è§£ç±»è¿™ç§æ€æƒ³å’Œè®¾è®¡æ¨¡å¼.é‡ç‚¹: 1.ç±»æ„å‘³ç€å¤åˆ¶! ä¼ ç»Ÿçš„ç±»è¢«å®žä¾‹åŒ–æ—¶ï¼Œå®ƒçš„è¡Œä¸ºä¼šè¢«å¤åˆ¶åˆ°å®žä¾‹ä¸­ã€‚ç±»è¢«ç»§æ‰¿æ—¶ï¼Œè¡Œä¸ºä¹Ÿä¼šè¢«å¤åˆ¶åˆ°å­ç±»ä¸­ã€‚ å¤šæ€(åœ¨ç»§æ‰¿é“¾çš„ä¸åŒå±‚æ¬¡åç§°ç›¸åŒä½†æ˜¯åŠŸèƒ½ä¸åŒçš„å‡½æ•°)çœ‹èµ·æ¥ä¼¼ä¹Žæ˜¯ä»Žå­ç±»å¼•ç”¨çˆ¶ç±»ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå¼•ç”¨çš„å…¶å®žæ˜¯å¤åˆ¶çš„ç»“æžœã€‚ JavaScript å¹¶ä¸ä¼š(åƒç±»é‚£æ ·)è‡ªåŠ¨åˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ã€‚(ä½ åªèƒ½è‡ªå·±æ‰‹åŠ¨å¤åˆ¶,è€Œä¸”å¤åˆ¶çš„è¿˜ä¸å½»åº•!) æ··å…¥æ¨¡å¼(æ— è®ºæ˜¾å¼è¿˜æ˜¯éšå¼)å¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œä½†æ˜¯é€šå¸¸ä¼šäº§ç”Ÿä¸‘é™‹å¹¶ä¸”è„†å¼±çš„è¯­æ³•ï¼Œæ¯”å¦‚æ˜¾å¼ä¼ªå¤šæ€(OtherObj.methodName.call(this, â€¦))ï¼Œè¿™ä¼šè®©ä»£ç æ›´åŠ éš¾ æ‡‚å¹¶ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ æ˜¾å¼æ··å…¥å®žé™…ä¸Šæ— æ³•å®Œå…¨æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œå› ä¸ºå¯¹è±¡(å’Œå‡½æ•°!åˆ«å¿˜äº†å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡)åªèƒ½å¤åˆ¶å¼•ç”¨ï¼Œæ— æ³•å¤åˆ¶è¢«å¼•ç”¨çš„å¯¹è±¡æˆ–è€…å‡½æ•°æœ¬èº«ã€‚å¿½è§†è¿™ä¸€ç‚¹ä¼šå¯¼è‡´è®¸å¤šé—®é¢˜ã€‚ åœ¨ JavaScript ä¸­æ¨¡æ‹Ÿç±»æ˜¯å¾—ä¸å¿å¤±çš„ï¼Œè™½ç„¶èƒ½è§£å†³å½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯å¯èƒ½ä¼šåŸ‹ä¸‹æ›´å¤šçš„éšæ‚£ã€‚(ä½†å®žé™…,æˆ‘ä»¬ç”¨å¾—å´å¾ˆå¤š) ç¬¬äº”ç«  åŽŸåž‹æ³¨æ„:æœ¬ç« çš„å‰ææ˜¯ä½ å·²ç»æ¯”è¾ƒç†Ÿæ‚‰åŽŸåž‹åŠåŽŸåž‹é“¾.ä¸å¤ªç†Ÿæˆ–è€…ä¸çŸ¥é“çš„å¯ä»¥,é€šè¿‡è¿™ç¯‡æ–‡ç« ç†Ÿæ‚‰ä¸‹. 5.1 [[Prototype]]JavaScript ä¸­çš„å¯¹è±¡æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ [[Prototype]] å†…ç½®å±žæ€§ï¼Œå…¶å®žå°±æ˜¯å¯¹äºŽå…¶ä»–å¯¹è±¡çš„å¼•ç”¨(ä¸€èˆ¬å°±æ˜¯å…¶æž„é€ å‡½æ•°prototypeå±žæ€§çš„å¼•ç”¨)ã€‚å‡ ä¹Žæ‰€æœ‰çš„å¯¹è±¡åœ¨åˆ›å»ºæ—¶ [[Prototype]] å±žæ€§éƒ½ä¼šè¢«èµ‹äºˆä¸€ä¸ªéžç©ºçš„å€¼ã€‚åæ§½: ä¹¦ä¸­æœ‰è¿™æ ·ä¸€å¥è¯ â€œæ³¨æ„:å¾ˆå¿«æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ï¼Œå¯¹è±¡çš„ [[Prototype]] é“¾æŽ¥å¯ä»¥ä¸ºç©ºï¼Œè™½ç„¶å¾ˆå°‘è§ã€‚â€æˆ‘å‰å‰åŽåŽçœ‹äº†ä¸‰ééƒ½æ²¡æ‰¾åˆ°å®ƒæ‰€è¯´çš„å¯¹è±¡çš„ [[Prototype]] é“¾æŽ¥å¯ä»¥ä¸ºç©º.çš„æƒ…å†µ!åº”è¯¥æ˜¯ä½œè€…å†™å¿˜è®°äº†.ok,è¿™é‡Œæˆ‘æ¥è¯´ä¸‹å¯¹è±¡çš„ [[Prototype]] é“¾æŽ¥å¯ä»¥ä¸ºç©ºçš„æƒ…å†µ.å°±æ˜¯é€šè¿‡Object.create(null)å¾—åˆ°çš„å¯¹è±¡.å®ƒçš„ [[Prototype]] æ˜¯ä¸ºç©ºçš„.åº”è¯¥è¯´å®ƒçš„æ‰€æœ‰éƒ½æ˜¯ç©ºçš„.ä¸ºä»€ä¹ˆ?å› ä¸ºnullæ˜¯åŽŸåž‹é“¾çš„é¡¶ç«¯.å®ƒæ˜¯æ²¡æœ‰[[Prototype]]çš„.å¯¹åº”çš„å¯ä»¥å¯¹æ¯”ä¸‹console.log(Object.create({}))å’Œconsole.log(Object.create(null)) [[Prototype]]æœ‰ä»€ä¹ˆç”¨?æˆ‘åŽŸä»¥ä¸ºä½œè€…ä¼šè¯´å¯ä»¥ä½œä¸ºå­˜æ”¾å®žä¾‹å¯¹è±¡çš„å…¬å…±å±žæ€§,ç„¶åŽåƒç±»ä¸€æ ·è®²å¾—æ›´æ·±åˆ»ç‚¹.ä¸è¿‡è¿™æ¬¡åªæ˜¯è¯´äº†å®ƒè¡¨æ˜Žçš„ä½œç”¨. ä½œç”¨: å°±æ˜¯å­˜æ”¾å“ªäº›ä¸åœ¨å¯¹è±¡è‡ªèº«çš„å±žæ€§. å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±žæ€§æ—¶,æ­¤æ—¶å¯¹è±¡çš„å†…éƒ¨é»˜è®¤æ“ä½œ[[Get]],é¦–å…ˆä¼šæ£€æŸ¥å¯¹è±¡æœ¬èº«æ˜¯å¦æœ‰è¿™ä¸ªå±žæ€§ï¼Œå¦‚æžœæœ‰çš„è¯å°±ä½¿ç”¨å®ƒã€‚å¦‚æžœæ²¡æœ‰çš„è¯,[[Get]] å°±ä¼šç»§ç»­è®¿é—®å¯¹è±¡çš„ [[Prototype]] é“¾.([[Prototype]]å…¶å®žå°±æ˜¯å…¶æž„é€ å‡½æ•°çš„prototypeå±žæ€§.ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡.)å¦‚æžœæ‰¾åˆ°,å°±è¿”å›žè¯¥å±žæ€§å€¼.å¦‚æžœæ²¡æœ‰å°±ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ª[[Prototype]]é“¾.ç›´åˆ°æ‰¾å®Œæ•´æ¡[[Prototype]]é“¾.è¿˜æ˜¯æ²¡æœ‰çš„è¯,[[Get]] å°±ä¼šè¿”å›žundefined. è¡¥å……: ä½¿ç”¨ for..in éåŽ†å¯¹è±¡æ—¶ ä»»ä½•å¯ä»¥é€šè¿‡åŽŸåž‹é“¾è®¿é—®åˆ° (å¹¶ä¸”æ˜¯ enumerable:true)çš„å±žæ€§éƒ½ä¼šè¢«æžšä¸¾ã€‚(å…¶å®žè¿™ä¸ªåœ¨ç¬¬ä¸‰ç« é‡Œæˆ‘è¯´è¿‡) ä½¿ç”¨ in æ“ä½œç¬¦ åŒæ ·ä¼šæŸ¥æ‰¾å¯¹è±¡çš„æ•´æ¡åŽŸåž‹é“¾(æ— è®ºå±žæ€§æ˜¯å¦å¯æžšä¸¾) 5.1.1 Object.prototypeæ‰€æœ‰æ™®é€šçš„ [[Prototype]] é“¾æœ€ç»ˆéƒ½ä¼šæŒ‡å‘å†…ç½®çš„ Object.prototypeã€‚(Object.prototypeçš„[[Prototype]] æœ€ç»ˆä¼šæŒ‡å‘null.nullå°±æ˜¯æœ€åŽçš„ç»ˆç‚¹).è¿™ä¸ª Object.prototype å¯¹è±¡ï¼ŒåŒ…å«äº† JavaScript ä¸­è®¸å¤šé€šç”¨çš„åŠŸèƒ½,ä¾‹å¦‚:toString() , valueOf(), hasOwnProperty(..)å’Œ isPrototypeOf(..)ã€‚ 5.1.2 å±žæ€§è®¾ç½®å’Œå±è”½è¯´æ˜Ž: çœ‹å®Œæœ¬èŠ‚æ—¶,åˆ‡è®°ä¸è¦å¯¹myObject.foo = &quot;bar&quot;è¿™ç§ç®€å•çš„å¯¹è±¡å±žæ€§èµ‹å€¼äº§ç”Ÿé¡¾è™‘å’Œç–‘æƒ‘.è¿™ç§èµ‹å€¼ç»å¯¹ä¸ä¼šå¯¹åŽŸåž‹é“¾äº§ç”Ÿä»»ä½•å½±å“!åŸºæœ¬ä¹Ÿä¸ä¼šå‡ºçŽ°èµ‹å€¼ä¸æˆåŠŸçš„æƒ…å†µ.å¦‚æžœæœ‰äººæ•¢åœ¨å›¢é˜Ÿé¡¹ç›®é‡Œä¿®æ”¹å¯¹è±¡çš„å±žæ€§æè¿°ç¬¦,æ—©å°±è¢«æ‹–å‡ºåŽ»æ‰“æ­»äº†!!! è¿™éƒ¨åˆ†å¯ä»¥çœ‹åšè¡¥å……çŸ¥è¯†,çŸ¥é“æœ‰è¿™äº›å¥‡è‘©è®¾å®šå°±è¡Œ.å…¶å®žè¿™èŠ‚æ›´åº”è¯¥å…³æ³¨çš„æ˜¯myObject.fooçš„è¿”å›žå€¼.æ³¨æ„: ä¹¦ä¸­æåˆ°çš„åŠ¨è¯å±è”½å…¶å®žæŒ‡çš„å°±æ˜¯åœ¨å¯¹è±¡ä¸Šåˆ›å»ºåŒåå±žæ€§(åŽŸåž‹é“¾ä¸Šå·²æœ‰è¯¥å±žæ€§).æ³¨æ„ä¸è¦è¢«ç»•æ™•äº†.è¿˜æœ‰++å°±ç›¸å½“äºŽmyObject.a=myObject.a+1,æ³¨æ„åˆ†è§£å°±è¡Œ,ä¸å­˜åœ¨ä»€ä¹ˆç‰¹åˆ«éœ€è¦å½“å¿ƒçš„. 5.2 â€œç±»â€ JavaScripté‡Œåªæœ‰å¯¹è±¡,æ²¡æœ‰ç±»! JavaScriptä¸éœ€è¦é€šè¿‡ç±»æ¥æŠ½è±¡å¯¹è±¡.è€Œæ˜¯è‡ªå·±ç›´æŽ¥åˆ›å»ºå¯¹è±¡,å¹¶å®šä¹‰å¯¹è±¡çš„è¡Œä¸º. 5.2.1 â€œç±»â€å‡½æ•°åæ§½:æ¨¡ä»¿ç±»ç«Ÿç„¶è¢«è¯´æˆå¥‡æ€ªçš„æ— è€»æ»¥ç”¨!?ä¸è¿™æ ·åš,jsé‚£äº›é«˜çº§ç”¨æ³•æ€Žä¹ˆå®žçŽ°?æ€Žä¹ˆä¼šæœ‰çŽ°åœ¨å‰ç«¯çš„ç™¾èŠ±é½æ”¾(è½®å­æ»¡åœ°è·‘)?è¿™ä¹Ÿæ˜¯å†’å¾—åŠžæ³•çš„åŠžæ³•å•Š!æ¯•ç«Ÿå½“æ—¶jsåªæ˜¯å°ä¼—,ä¸æŒ‡æœ›å®ƒæœ‰å¤šå¤§èƒ½è€.æ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªäººç”¨7å¤©â€å€Ÿé‰´â€å‡ºæ¥çš„ä¸œè¥¿. â€œç±»â€å‡½æ•°: JavaScriptç”¨æ¥æ¨¡ä»¿ç±»çš„å‡½æ•°å°±è¢«ç§°ä¸ºç±»å‡½æ•°,å…¶å®žå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æž„é€ å‡½æ•°. â€œç±»â€å‡½æ•°æ¨¡æ‹Ÿç±»çš„å…³é”®: æ‰€æœ‰çš„å‡½æ•°é»˜è®¤éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸º prototype çš„å…¬æœ‰å¹¶ä¸”ä¸å¯æžšä¸¾(å‚è§ç¬¬ 3 ç« )çš„å±žæ€§ï¼Œå®ƒä¼šæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡.å½“æˆ‘ä»¬é€šè¿‡new å‡½æ•°(æž„é€ å‡½æ•°)æ¥å¾—åˆ°å®žä¾‹å¯¹è±¡æ—¶,æ­¤æ—¶newä¼šç»™å®žä¾‹å¯¹è±¡ä¸€ä¸ªå†…éƒ¨çš„ [[Prototype]]å±žæ€§ï¼Œå®žä¾‹å¯¹è±¡å†…éƒ¨çš„[[Prototype]]å±žæ€§ä¸Žæž„é€ å‡½æ•°çš„prototypeå±žæ€§éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡.é‚£JSçš„è¿™ä¸ªç‰¹æ€§æ€Žä¹ˆæ¨¡æ‹Ÿç±»å‘¢?é¦–å…ˆç±»çš„æœ¬è´¨å°±æ˜¯å¤åˆ¶!.æ˜Žç™½è¿™ç‚¹åŽ,æˆ‘ä»¬å°±éœ€è¦å®žçŽ°ä¼ªå¤åˆ¶.æˆ‘ä»¬å¯ä»¥å°†ç±»é‡Œçš„å±žæ€§,æ”¾åœ¨å‡½æ•°çš„prototypeå±žæ€§é‡Œ.è¿™æ ·è¯¥å‡½æ•°çš„å®žä¾‹å¯¹è±¡å°±å¯ä»¥é€šè¿‡[Prototype]è®¿é—®è¿™äº›å±žæ€§.æˆ‘ä»¬ä¹Ÿç»å¸¸æŠŠè¿™ç§è¡Œä¸ºç§°ä¸ºåŽŸåž‹ç»§æ‰¿(ä½œè€…åŽé¢ä¼šç–¯ç‹‚åæ§½è¿™ä¸ªç§°å‘¼,æˆ‘åŽé¢å†è§£é‡Šä¸ºä»€ä¹ˆåæ§½).è¿™æ ·å°±å®žçŽ°äº†ä¼ªâ€å¤åˆ¶â€. å¯ä»¥è¾¾åˆ°å’Œç±»ç›¸ä¼¼çš„æ•ˆæžœ. æ³¨æ„: è™½ç„¶è¯´æ‰€æœ‰çš„å‡½æ•°é»˜è®¤éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸º prototypeå±žæ€§.ä½†ä¹Ÿæœ‰ç‰¹æ®Šçš„æ—¶å€™.å°±ä¸æ˜¯é»˜è®¤çš„æƒ…å†µ.å°±æ˜¯é€šè¿‡bind()ç¡¬ç»‘å®šæ—¶.æ‰€è¿”å›žçš„ç»‘å®šå‡½æ•°,å®ƒæ˜¯æ²¡æœ‰prototypeå±žæ€§çš„! å›¾è§£çœŸæ­£çš„ç±»ä¸ŽJSçš„æ¨¡æ‹Ÿç±»: å…³äºŽåŽŸåž‹ç»§æ‰¿è¿™ä¸ªåå­—çš„ç–¯ç‹‚åæ§½: ä½œè€…çš„åæ§½ä¸»è¦é›†ä¸­åœ¨â€ç»§æ‰¿â€ä¸¤ä¸ªå­—,åŽŸå› æ˜¯åœ¨é¢å‘ç±»çš„è¯­è¨€ä¸­,â€ç»§æ‰¿â€æ„å‘³ç€å¤åˆ¶,ä½†åœ¨JavaScripté‡ŒåŽŸåž‹ç»§æ‰¿å´æ ¹æœ¬ä¸æ˜¯è¿™ä¸ªæ„æ€,å®ƒå¹¶æ²¡æœ‰å¤åˆ¶,è€Œæ˜¯ç”¨åŽŸåž‹é“¾æ¥å®žçŽ°.æ‰€ä»¥ç–¯ç‹‚åæ§½å…¶è¯¯å¯¼. ä»€ä¹ˆæ˜¯å·®å¼‚ç»§æ‰¿? æˆ‘æ ¹æœ¬æ²¡å¬è¿‡è¿™ä¸ªæœ¯è¯­,åˆæ¬¡çœ‹ä½œè€…æ‰€è°“çš„è§£é‡Š,è¿™æ˜¯å•¥?ä»–æƒ³è¯´å•¥?åŽæ¥è¯»äº†å¥½å¤šé,ç»ˆäºŽå¤§æ¦‚ç†è§£äº†.å¦‚æžœä½ ä¹Ÿçœ‹ä¸æ‡‚ä½œè€…æƒ³åœ¨è¡¨è¾¾ä»€ä¹ˆ,å°±passè¿™éƒ¨åˆ†.æ²¡å¿…è¦ç†è§£.åè€Œä¼šæŠŠä½ çœ‹å¾—æ›´è¿·æƒ‘.å¥½äº†,æˆ‘æ¥è§£é‡Šä¸‹ä»€ä¹ˆå«å·®å¼‚ç»§æ‰¿.å·®å¼‚ç»§æ‰¿å°±æ˜¯åŽŸåž‹ç»§æ‰¿çš„ä¸€ä¸ªä¸å¸¸ç”¨çš„åˆ«å.æˆ‘ä»¬çŸ¥é“å¯¹è±¡å¯ä»¥é€šè¿‡åŽŸåž‹é“¾ç»§æ‰¿ä¸€éƒ¨åˆ†å±žæ€§,ä½†æˆ‘ä»¬ä»å¯ä»¥ç»™å¯¹è±¡è®¾ç½®å…¶ä»–æœ‰å·®å¼‚ä¸åŒçš„å±žæ€§.è¿™ä¹Ÿå°±å¯ä»¥ç§°ä¸ºå·®å¼‚ç»§æ‰¿. 5.2.2 â€œæž„é€ å‡½æ•°â€æž„é€ å‡½æ•°ä¹‹æ‰€ä»¥æ˜¯æž„é€ å‡½æ•°,æ˜¯å› ä¸ºå®ƒè¢«newè°ƒç”¨,å¦‚æžœæ²¡è¢«newè°ƒç”¨,å®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°.å®žé™…ä¸Š,newä¼šåŠ«æŒæ‰€æœ‰æ™®é€šå‡½æ•°å¹¶ç”¨æž„é€ å¯¹è±¡çš„å½¢å¼æ¥è°ƒç”¨å®ƒ,å¹¶ä¸”æ— è®ºå¦‚ä½•éƒ½ä¼šæž„é€ è¿”å›žä¸€ä¸ªå¯¹è±¡. 5.2.3 æŠ€æœ¯å…³äºŽä¸¤ç§â€œé¢å‘ç±»â€çš„æŠ€å·§,æˆ‘è¿™å°±ä¸è¯´æ˜Žäº†,ç†è§£äº†è¿™éƒ¨åˆ†ç¬¬ä¸€ç¬¬äºŒç« å…³äºŽthisçš„ä½¿ç”¨,å°±å¾ˆç®€å•äº†. prototype.constructor:ä¸ºäº†æ­£ç¡®ç†è§£constructor.æˆ‘ç‰¹æ„åœ¨æ ‡é¢˜ä¸ŠåŠ ä¸Šprototype.æ˜¯æƒ³å¼ºè°ƒ:ä¸€ä¸ªå¯¹è±¡è®¿é—®constructoræ—¶,ä¼šé»˜è®¤è®¿é—®å…¶åŽŸåž‹å¯¹è±¡ä¸Šçš„constructorå±žæ€§. æ³¨æ„:12345678910111213function Foo() &#123; /* .. */ &#125;Foo.prototype = &#123; /* .. */ &#125;; // æœ‰æ—¶å€™æˆ‘ä»¬ä¼šéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°åŽŸåž‹å¯¹è±¡,å› æ­¤ä¹Ÿä¸ä¼šæœ‰é»˜è®¤çš„constructorå±žæ€§æŒ‡å‘æž„é€ å‡½æ•°// éœ€è¦åœ¨ Foo.prototype ä¸Šâ€œä¿®å¤â€ä¸¢å¤±çš„ .constructor å±žæ€§// å…³äºŽ defineProperty(..)ï¼Œå‚è§ç¬¬ 3 ç«  Object.defineProperty( Foo.prototype, "constructor" , &#123; enumerable: false,//ä¸å¯æžšä¸¾ writable: true, configurable: true, value: Foo // è®© .constructor æŒ‡å‘ Foo&#125; );//ä¸Šé¢è¿™ç§æ–¹æ³•æ˜¯æ¯”è¾ƒä¸¥è°¨,ä¹Ÿæ¯”è¾ƒéº»çƒ¦çš„.å¹¶ä¸”ä½¿ç”¨Object.defineProperty()é£Žé™©æ˜¯å¾ˆå¤§çš„.//æ‰€ä»¥æˆ‘ä»¬å®žé™…æ˜¯è¿™æ ·ä¿®æ”¹çš„Foo.prototype.constructor=Foo; //ç›´æŽ¥å°†å…¶èµ‹å€¼Foo å”¯ä¸€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶constructoræ˜¯å¯æžšä¸¾çš„.ä¼šè¢«å®žä¾‹å¯¹è±¡çš„for..in..éåŽ†åˆ°. 5.3 (åŽŸåž‹)ç»§æ‰¿åŽŸåž‹å¯¹è±¡åˆ°åŽŸåž‹å¯¹è±¡çš„ç»§æ‰¿:ä¾‹å¦‚:Bar.prototype åˆ° Foo.prototype çš„å§”æ‰˜å…³ç³»ï¼Œæ­£ç¡®çš„JavaScriptä¸­â€œåŽŸåž‹é£Žæ ¼â€:1234567891011121314151617181920212223function Foo(name) &#123; this.name = name;&#125;Foo.prototype.myName = function() &#123; return this.name;&#125;;function Bar(name,label) &#123; Foo.call( this, name ); this.label = label;&#125;// æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Bar.prototype å¯¹è±¡,å¹¶ä¸”å®ƒçš„[[Prototype]] å…³è”Foo.prototype Bar.prototype = Object.create( Foo.prototype );// æ³¨æ„!Object.create()æ˜¯è¿”å›žä¸€ä¸ªæ–°çš„å¯¹è±¡,æ‰€ä»¥çŽ°åœ¨æ²¡æœ‰ Bar.prototype.constructor äº† // å¦‚æžœä½ éœ€è¦è¿™ä¸ªå±žæ€§çš„è¯å¯èƒ½éœ€è¦æ‰‹åŠ¨ä¿®å¤ä¸€ä¸‹å®ƒBar.prototype.myLabel = function() &#123; return this.label;&#125;;var a = new Bar( "a", "obj a" );a.myName(); // "a"a.myLabel(); // "obj a" é”™è¯¯ç”¨æ³•: 1, Bar.prototype = Foo.prototype; æ­¤æ—¶å¹¶ä¸ä¼šåˆ›å»ºä¸€ä¸ªå…³è”åˆ° Bar.prototype çš„æ–°å¯¹è±¡ï¼Œå®ƒåªæ˜¯è®© Bar.prototype ç›´æŽ¥å¼•ç”¨ Foo.prototype å¯¹è±¡ã€‚ å› æ­¤å½“ä½ æ‰§è¡Œç±»ä¼¼ Bar.prototype. myLabel = â€¦ çš„èµ‹å€¼è¯­å¥æ—¶ä¼šç›´æŽ¥ä¿®æ”¹ Foo.prototype å¯¹è±¡æœ¬èº«ã€‚ 2, Bar.prototype = new Foo(); å®ƒä½¿ç”¨ äº† Foo(..) çš„â€œæž„é€ å‡½æ•°è°ƒç”¨â€ï¼Œå¦‚æžœå‡½æ•° Foo æœ‰ä¸€äº›å…¶ä»–æ“ä½œçš„è¯,å°¤å…¶æ˜¯ä¸Žthisæœ‰å…³çš„çš„è¯ï¼Œå°±ä¼šå½±å“åˆ° Bar() çš„â€œåŽä»£â€ï¼ŒåŽæžœä¸å ªè®¾æƒ³ã€‚ ç»“è®º: è¦åˆ›å»ºä¸€ä¸ªåˆé€‚çš„å…³è”å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€ä½¿ç”¨ Object.create(..) è€Œä¸æ˜¯ä½¿ç”¨å…·æœ‰å‰¯ä½œç”¨çš„ Foo(..)ã€‚è¿™æ ·åšå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ç„¶åŽæŠŠæ—§å¯¹è±¡æŠ›å¼ƒæŽ‰(ä¸»è¦æ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½®constructor)ï¼Œä¸èƒ½ç›´æŽ¥ä¿®æ”¹å·²æœ‰çš„é»˜è®¤å¯¹è±¡ã€‚ æ£€æŸ¥â€ç±»â€å…³ç³» instanceof æ“ä½œç¬¦: éªŒè¯å·¦è¾¹çš„æ™®é€šå¯¹è±¡çš„æ•´æ¡[[prototype]]é“¾æ˜¯å¦æœ‰æŒ‡å‘å³è¾¹å‡½æ•°çš„prototype,ä¾‹å¦‚:a instanceof Fooã€‚ isPrototypeOf(..) æ–¹æ³•: éªŒè¯åœ¨å¯¹è±¡ a çš„æ•´æ¡ [[Prototype]] é“¾ä¸­æ˜¯å¦å‡ºçŽ°è¿‡ åŽŸåž‹å¯¹è±¡b.ä¾‹å¦‚:b.isPrototypeOf( a ); æ³¨æ„: å¦‚æžœä½¿ç”¨å†…ç½®çš„ .bind(..) å‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ªç¡¬ç»‘å®šå‡½æ•°(å‚è§ç¬¬ 2 ç« )çš„è¯ï¼Œ è¯¥å‡½æ•°æ˜¯æ²¡æœ‰ .prototype å±žæ€§çš„ã€‚å¦‚æžœç¡¬ç»‘å®šå‡½æ•°instanceof çš„è¯,åˆ™å…¶bindçš„ ç›®æ ‡å‡½æ•°çš„prototypeä¼šæˆä¸ºç¡¬ç»‘å®šå‡½æ•°çš„prototype. å…³äºŽproto:æˆ‘ä»¬çŸ¥é“å‡½æ•°å¯ä»¥ç›´æŽ¥é€šè¿‡prototypeå±žæ€§ç›´æŽ¥è®¿é—®åŽŸåž‹å¯¹è±¡.é‚£å¯¹è±¡æ€Žä¹ˆè®¿é—®å‘¢?æˆ‘ä»¬çŸ¥é“æ˜¯é€šè¿‡[[prototype]]é“¾.æ€Žä¹ˆè®¿é—®å‘¢?åœ¨ES5ä¹‹ä¸­çš„æ ‡å‡†æ–¹æ³•:é€šè¿‡Object.getPrototypeOf( )æ–¹æ³•æ¥èŽ·å–å¯¹è±¡åŽŸåž‹.Object.getPrototypeOf( a ) === Foo.prototype; // true,å¦ä¸€ç§æ–¹æ³•:åœ¨ ES6 ä¹‹å‰å¹¶ä¸æ˜¯æ ‡å‡†,ä½†å´è¢«ç»å¤§å¤šæ•°æµè§ˆå™¨æ”¯æŒçš„ä¸€ç§æ–¹æ³•,å¯ä»¥è®¿é—®å†…éƒ¨[[prototype]]å¯¹è±¡.é‚£å°±æ˜¯__proto__.ä¾‹å¦‚:a.__proto__ === Foo.prototype; // true.ä½ ç”šè‡³å¯ä»¥é€šè¿‡.__proto__.__ptoto__...æ¥è®¿é—®æ•´ä¸ªåŽŸåž‹é“¾. .__proto__å®žé™…ä¸Šå¹¶ä¸å­˜åœ¨äºŽä½ æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡ä¸­.å¹¶ä¸”å®ƒçœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ªå±žæ€§ï¼Œä½†æ˜¯å®žé™…ä¸Šå®ƒæ›´åƒä¸€ä¸ª getter/setter(è§ç¬¬ä¸‰ç« ). 5.4 å¯¹è±¡å…³è”[[Prototype]] æœºåˆ¶å°±æ˜¯å­˜åœ¨äºŽå¯¹è±¡ä¸­çš„ä¸€ä¸ªå†…éƒ¨é“¾æŽ¥ï¼Œå®ƒä¼šå¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚ è¿™ä¸ªé“¾æŽ¥çš„ä½œç”¨æ˜¯:å¦‚æžœåœ¨å¯¹è±¡ä¸Šæ²¡æœ‰æ‰¾åˆ°éœ€è¦çš„å±žæ€§æˆ–è€…æ–¹æ³•å¼•ç”¨ï¼Œå¼•æ“Žå°±ä¼šç»§ç»­åœ¨ [[Prototype]] å…³è”çš„å¯¹è±¡ä¸Šè¿›è¡ŒæŸ¥æ‰¾ã€‚åŒç†ï¼Œå¦‚æžœåœ¨åŽè€…ä¸­ä¹Ÿæ²¡æœ‰æ‰¾åˆ°éœ€è¦çš„ å¼•ç”¨å°±ä¼šç»§ç»­æŸ¥æ‰¾å®ƒçš„ [[Prototype]]ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚è¿™ä¸€ç³»åˆ—å¯¹è±¡çš„é“¾æŽ¥è¢«ç§°ä¸ºåŽŸåž‹é“¾ã€‚ 5.4.1 åˆ›å»ºå…³è”é—®:â€œæˆ‘ä»¬å·²ç»æ˜Žç™½äº†ä¸ºä»€ä¹ˆ JavaScript çš„ [[Prototype]] æœºåˆ¶å’Œç±»ä¸ä¸€æ ·ï¼Œä¹Ÿæ˜Žç™½äº†å®ƒå¦‚ä½•å»ºç«‹å¯¹è±¡é—´çš„å…³è”ã€‚â€ç­”: ç±»çš„æœºåˆ¶æ˜¯å¤åˆ¶,JavaScripté‡ŒåŽŸåž‹é“¾çš„æœºåˆ¶æ˜¯å¼•ç”¨. é—®:â€œé‚£ [[Prototype]] æœºåˆ¶çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢?ä¸ºä»€ä¹ˆ JavaScript å¼€å‘è€…è´¹è¿™ä¹ˆå¤§çš„åŠ›æ°”(æ¨¡æ‹Ÿç±»)åœ¨ä»£ç ä¸­åˆ›å»ºè¿™äº›å…³è”å‘¢?â€ç­”: æ„ä¹‰å°±æ˜¯æ¨¡æ‹Ÿç±»,JavaScriptä¸éœ€è¦å¤åˆ¶(æˆ‘è§‰å¾—è¿™ä¸æ˜¯ä¸ªä¼˜ç‚¹)è€Œé€šè¿‡åŽŸåž‹é“¾å®žçŽ°â€å®žä¾‹â€å¯¹â€ç±»â€çš„â€ç»§æ‰¿(å…¶å®žå°±æ˜¯å¼•ç”¨)â€.è¿™æ ·å°±è¾¾åˆ°äº†å®žä¾‹å¯¹è±¡å¯¹æŸäº›å±žæ€§(å³åŽŸåž‹å¯¹è±¡é‡Œçš„å±žæ€§)çš„å¤ç”¨. Object.create(..)è¿™ä¸ªæ–¹æ³•å…¶å®žæˆ‘ä»¬åœ¨å‰é¢å·²ç»ä½¿ç”¨è¿‡å¾ˆå¤šæ¬¡.â€Object.create(..) ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡(bar)å¹¶æŠŠå®ƒå…³è”åˆ°æˆ‘ä»¬æŒ‡å®šçš„å¯¹è±¡(foo)ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å……åˆ†å‘æŒ¥ [[Prototype]] æœºåˆ¶çš„å¨åŠ›(å§”æ‰˜)å¹¶ä¸”é¿å…ä¸å¿…è¦çš„éº»çƒ¦(æ¯”å¦‚ä½¿ç”¨ new çš„æž„é€ å‡½æ•°è°ƒç”¨ä¼šç”Ÿæˆ .prototype å’Œ .constructor å¼•ç”¨)ã€‚â€å®žé™…ä¸Šè¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ›å»ºè¿”å›žä¸€ä¸ªæ–°å¯¹è±¡,è¿™ä¸ªæ–°å¯¹è±¡çš„åŽŸåž‹([[Prototype]])ä¼šç»‘å®šä¸ºæˆ‘ä»¬è¾“å…¥çš„å‚æ•°å¯¹è±¡foo.å¹¶ä¸”ç”±äºŽä¸æ˜¯é€šè¿‡æž„é€ å‡½æ•°çš„å½¢å¼,æ‰€ä»¥ä¸éœ€è¦ä¸ºå‡½æ•°å•ç‹¬è®¾ç½®prototype.è™½ç„¶Object.create(..)å¾ˆå¥½,ä½†å®žé™…æˆ‘ä»¬ä½¿ç”¨çš„æ›´å¤šçš„è¿˜æ˜¯æž„é€ å‡½æ•°å½¢å¼.æ³¨æ„: Object.create(..) çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†éœ€è¦æ·»åŠ åˆ°æ–°å¯¹è±¡ä¸­çš„å±žæ€§åä»¥åŠè¿™äº›å±žæ€§çš„å±žæ€§æè¿°ç¬¦(å‚è§ç¬¬ 3 ç« )ã€‚ Object.create(null)è¿™ä¸ªæ–¹æ³•å…¶å®žæˆ‘ä»¬åœ¨å‰é¢ä¹Ÿè®²è§£è¿‡å‡ æ¬¡.â€Object.create(null) ä¼šåˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ç©º(æˆ–è€…è¯´null)[[Prototype]] é“¾æŽ¥çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ— æ³•è¿›è¡Œå§”æ‰˜ã€‚ç”±äºŽè¿™ä¸ªå¯¹è±¡æ²¡æœ‰åŽŸåž‹é“¾ï¼Œæ‰€ä»¥ instanceof æ“ä½œç¬¦(ä¹‹å‰è§£é‡Šè¿‡)æ— æ³•è¿›è¡Œåˆ¤æ–­ï¼Œå› æ­¤æ€»æ˜¯ä¼šè¿”å›ž falseã€‚ è¿™äº›ç‰¹æ®Šçš„ç©º [[Prototype]] å¯¹è±¡é€šå¸¸è¢«ç§°ä½œâ€œå­—å…¸â€ï¼Œå®ƒä»¬å®Œå…¨ä¸ä¼šå—åˆ°åŽŸåž‹é“¾çš„å¹²æ‰°ï¼Œå› æ­¤éžå¸¸é€‚åˆç”¨æ¥å­˜å‚¨æ•°æ®ã€‚â€œ â€œObject.create()çš„polyfillä»£ç .â€è¿™éƒ¨åˆ†æˆ‘å°±ä¸åšè§£è¯»äº†,å› ä¸ºçŽ°åœ¨éƒ½8102å¹´,es6æ—©å°±æ™®åŠäº†,ä½ å‡ ä¹Žä¸å¯èƒ½å†ç”¨åˆ°es5ä¹‹å‰çš„è¯­æ³•äº†.æ‰€ä»¥è¿™éƒ¨åˆ†å¤§å®¶äº†è§£ä¸‹å³å¯. 5.4.2 å…³è”å…³ç³»æ˜¯å¤‡ç”¨[[Prototype]] çš„æœ¬è´¨ä½œç”¨: ä¹¦ä¸­æåˆ°äº†ä¸€ä¸ªè§‚ç‚¹â€å¤„ç†â€œç¼ºå¤±â€å±žæ€§æˆ–è€…æ–¹æ³•æ—¶çš„ä¸€ç§å¤‡ç”¨é€‰é¡¹ã€‚â€(å³å¤‡ç”¨è®¾è®¡æ¨¡å¼).ä½†éšåŽè¿›è¡Œäº†å¦å®šâ€ä½†æ˜¯è¿™åœ¨ JavaScript ä¸­å¹¶ä¸æ˜¯å¾ˆå¸¸è§ã€‚æ‰€ä»¥å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯è¿™ç§æ¨¡å¼ï¼Œé‚£æˆ–è®¸åº”å½“é€€åŽä¸€æ­¥å¹¶é‡æ–°æ€è€ƒä¸€ä¸‹è¿™ç§æ¨¡å¼æ˜¯å¦åˆé€‚ã€‚â€ ä½œè€…ç»™å‡ºçš„è§‚ç‚¹æ˜¯:â€è¿›è¡Œå§”æ‰˜è®¾è®¡æ¨¡å¼,å³ä¾‹å­ä¸­çš„å†…éƒ¨å§”æ‰˜(å°±æ˜¯åœ¨å¯¹è±¡é‡Œå¥—äº†ä¸ªå£³å†å¼•ç”¨äº†ä¸€é,ä¸ºçš„æ˜¯å°†å§”æ‰˜è¿›è¡Œéšè—).è¿™æ ·å¯ä»¥ä½¿æˆ‘ä»¬çš„APIè®¾è®¡å¾—æ›´åŠ æ¸…æ™°.â€æ–‡ä¸­çš„æ¸…æ™°æ˜¯æŒ‡,å½“æˆ‘ä»¬éœ€è¦å¼•ç”¨åŽŸåž‹å¯¹è±¡çš„å±žæ€§æ–¹æ³•æ—¶,æˆ‘ä»¬åœ¨å¯¹è±¡å†…éƒ¨è®¾ç½®å¯¹åº”ä¸“é—¨çš„å±žæ€§(ä¾‹å­ä¸­çš„doCool),è¿›è¡Œå†…éƒ¨å§”æ‰˜(å…¶å®žå°±æ˜¯å¥—ä¸ªå£³è¿›è¡Œéšè—).è¿™æ ·æˆ‘ä»¬å¯¹è±¡çš„å±žæ€§å°±æ˜¯â€å®Œæ•´â€çš„. åœ¨å®žé™…å·¥ä½œä¸­,æˆ‘ä»¬å¸¸å¸¸å°±æ˜¯æŠŠåŽŸåž‹å¯¹è±¡ä½œä¸ºå­˜æ”¾å¯¹è±¡çš„å…¬å…±å±žæ€§æ–¹æ³•çš„åœ°æ–¹.å¯¹äºŽä¸€èˆ¬æ¯”è¾ƒé‡è¦çš„æ“ä½œæ‰ä¼šåœ¨å¯¹è±¡é‡Œè¿›è¡Œå†…éƒ¨å§”æ‰˜(éšè—å§”æ‰˜)! 5.5 å°ç»“æ€»ç»“å¾—å¾ˆå¥½å¾ˆå…¨é¢,è¿™é‡Œæˆ‘è¿˜æ˜¯ç›´æŽ¥æ‘˜æŠ„äº†,ä¸æ˜¯å·æ‡’å“¦! å¦‚æžœè¦è®¿é—®å¯¹è±¡ä¸­å¹¶ä¸å­˜åœ¨çš„ä¸€ä¸ªå±žæ€§ï¼Œ[[Get]] æ“ä½œ(å‚è§ç¬¬ 3 ç« )å°±ä¼šæŸ¥æ‰¾å¯¹è±¡å†…éƒ¨[[Prototype]] å…³è”çš„å¯¹è±¡ã€‚ è¿™ä¸ªå…³è”å…³ç³»å®žé™…ä¸Šå®šä¹‰äº†ä¸€æ¡â€œåŽŸåž‹é“¾â€(æœ‰ç‚¹åƒåµŒå¥—çš„ä½œç”¨åŸŸé“¾)ï¼Œåœ¨æŸ¥æ‰¾å±žæ€§æ—¶ä¼šå¯¹å®ƒè¿›è¡ŒéåŽ†ã€‚ æ‰€æœ‰æ™®é€šå¯¹è±¡éƒ½æœ‰å†…ç½®çš„ Object.prototypeï¼Œ æŒ‡å‘åŽŸåž‹é“¾çš„é¡¶ç«¯(æ¯”å¦‚è¯´å…¨å±€ä½œç”¨åŸŸ)ï¼Œå¦‚ æžœåœ¨åŽŸåž‹é“¾ä¸­æ‰¾ä¸åˆ°æŒ‡å®šçš„å±žæ€§å°±ä¼šåœæ­¢ã€‚toString()ã€valueOf() å’Œå…¶ä»–ä¸€äº›é€šç”¨çš„åŠŸèƒ½ éƒ½å­˜åœ¨äºŽ Object.prototype å¯¹è±¡ä¸Šï¼Œå› æ­¤è¯­è¨€ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚ å…³è”ä¸¤ä¸ªå¯¹è±¡æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ new å…³é”®è¯è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œåœ¨è°ƒç”¨çš„ 4 ä¸ªæ­¥éª¤(ç¬¬ 2 ç« )ä¸­ä¼šåˆ›å»ºä¸€ä¸ªå…³è”å…¶ä»–å¯¹è±¡çš„æ–°å¯¹è±¡ã€‚ ä½¿ç”¨ new è°ƒç”¨å‡½æ•°æ—¶ä¼šæŠŠæ–°å¯¹è±¡çš„ .prototype å±žæ€§å…³è”åˆ°â€œå…¶ä»–å¯¹è±¡â€(å°±æ˜¯æž„é€ å‡½æ•°prototypeæ‰€æŒ‡çš„å¯¹è±¡)ã€‚å¸¦ new çš„å‡½æ•°è°ƒç”¨ é€šå¸¸è¢«ç§°ä¸ºâ€œæž„é€ å‡½æ•°è°ƒç”¨â€ï¼Œå°½ç®¡å®ƒä»¬å®žé™…ä¸Šå’Œä¼ ç»Ÿé¢å‘ç±»è¯­è¨€ä¸­çš„ç±»æž„é€ å‡½æ•°ä¸ä¸€æ ·ã€‚ JavaScript ä¸­çš„æœºåˆ¶æœ‰ä¸€ä¸ªæ ¸å¿ƒåŒºåˆ«ï¼Œé‚£å°±æ˜¯ä¸ä¼šè¿›è¡Œå¤åˆ¶ï¼Œå¯¹è±¡ä¹‹é—´æ˜¯é€šè¿‡å†…éƒ¨çš„ [[Prototype]] é“¾å…³è”çš„ã€‚ â€œå§”æ‰˜â€æ˜¯ä¸€ä¸ªæ›´åˆé€‚çš„æœ¯è¯­ï¼Œå› ä¸ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ä¸æ˜¯å¤åˆ¶è€Œæ˜¯å§”æ‰˜ã€‚(æ„æ€å°±æ˜¯åŽŸå…ˆç»§æ‰¿åº”è¯¥æ”¹ä¸ºåŽŸå…ˆå§”æ‰˜?) ç¬¬å…­ç«  è¡Œä¸ºå§”æ‰˜ç¬¬ 5 ç« çš„ç»“è®º:[[Prototype]] æœºåˆ¶å°±æ˜¯æŒ‡å¯¹è±¡ä¸­çš„ä¸€ä¸ªå†…éƒ¨é“¾æŽ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼ŒJavaScript ä¸­è¿™ä¸ªæœºåˆ¶çš„æœ¬è´¨å°±æ˜¯å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»ã€‚åœ¨ç¬¬å…­ç« åˆè¢«ç§°ä¸ºå§”æ‰˜.PS:å‰é¢åœ¨è®²åŽŸåž‹çš„æ—¶å€™æˆ‘å°±ä¹ æƒ¯ç”¨çˆ¶å¯¹è±¡æŒ‡ä»£åŽŸåž‹å¯¹è±¡(ç±»ä¼¼â€çˆ¶ç±»â€),ç”¨å­å¯¹è±¡æŒ‡ä»£å…¶å®žä¾‹å¯¹è±¡(ç±»ä¼¼â€å­ç±»â€).æœ¬ç« ä¹Ÿå°†é‡‡ç”¨è¿™ç§ç§°å‘¼,æ•…ä¸‹é¢ä¸å†è¯´æ˜Ž.(å…¶å®žæˆ‘è§‰å¾—ç”¨çˆ¶å¯¹è±¡å’Œå­å¯¹è±¡ç§°å‘¼æ›´å½¢è±¡) 6.1 é¢å‘å§”æ‰˜çš„è®¾è®¡ä¸€å¥è¯:[[Prototype]]æœºåˆ¶æ˜¯é¢å‘å§”æ‰˜çš„è®¾è®¡,æ˜¯ä¸åŒäºŽé¢å‘ç±»çš„è®¾è®¡. ä¸‹é¢å°†åˆ†åˆ«ä»‹ç»ç±»ç†è®ºå’Œå§”æ‰˜ç†è®º. 6.1.1 ç±»ç†è®ºç±»ç†è®ºè®¾è®¡æ–¹æ³•: é¦–å…ˆå®šä¹‰ä¸€ä¸ªé€šç”¨çˆ¶(åŸº)ç±»ï¼Œåœ¨ çˆ¶ç±»ç±»ä¸­å®šä¹‰æ‰€æœ‰ä»»åŠ¡éƒ½æœ‰(é€šç”¨)çš„è¡Œä¸ºã€‚æŽ¥ç€å®šä¹‰å­ç±» ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿è‡ª çˆ¶ç±»å¹¶ä¸”ä¼šæ·»åŠ ä¸€äº›ç‰¹æ®Šçš„è¡Œä¸ºæ¥å¤„ç†å¯¹åº”çš„ä»»åŠ¡,å¹¶ä¸”åœ¨ç»§æ‰¿æ—¶å­ç±»å¯ä»¥ä½¿ç”¨æ–¹æ³•é‡å†™(å’Œå¤šæ€)çˆ¶ç±»çš„è¡Œä¸º. ç±»ç†è®ºä¸­è®¸å¤šè¡Œä¸ºå¯ä»¥å…ˆâ€œæŠ½è±¡â€åˆ°çˆ¶ç±»ç„¶åŽå†ç”¨å­ç±»è¿›è¡Œç‰¹æ®ŠåŒ–(é‡å†™)ã€‚ps:è¿™éƒ¨åˆ†äº†è§£å³å¯,ç€é‡ç†è§£ä¸‹é¢JavaScriptç”¨åˆ°çš„å§”æ‰˜. 6.1.2 å§”æ‰˜ç†è®ºç±»ç†è®ºè®¾è®¡æ–¹æ³•: é¦–å…ˆä½ ä¼šå®šä¹‰ä¸€ä¸ªâ€çˆ¶â€å¯¹è±¡(ç›¸å½“äºŽä¸ŠèŠ‚ä¸­çš„çˆ¶ç±»)ï¼Œå®ƒä¼šåŒ…å«æ‰€æœ‰ä»»åŠ¡éƒ½å¯ä»¥ä½¿ç”¨(å§”æ‰˜)çš„å…·ä½“è¡Œä¸ºã€‚æŽ¥ç€ï¼Œå¯¹äºŽæ¯ä¸ªä»»åŠ¡ä½ éƒ½å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡(â€œå­â€å¯¹è±¡)æ¥å­˜å‚¨å¯¹åº”çš„æ•°æ®å’Œè¡Œä¸ºã€‚ä½ å¯ä»¥æŠŠç‰¹å®šçš„ä»»åŠ¡å¯¹è±¡éƒ½å…³è”åˆ°çˆ¶å¯¹è±¡ä¸Šï¼Œè®©å®ƒä»¬åœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥è¿›è¡Œå§”æ‰˜ã€‚ (å…¶å®žæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ç”¨çˆ¶å¯¹è±¡æ¥å®šä¹‰é€šç”¨çš„æ–¹æ³•,å­å¯¹è±¡è¿›è¡Œå§”æ‰˜.ç„¶åŽå­å¯¹è±¡è‡ªèº«ä¸ªæ€§çš„å±žæ€§æ–¹æ³•å°±å†™åœ¨å­å¯¹è±¡æœ¬èº«,å¹¶é¿å…ä¸Žçˆ¶å¯¹è±¡çš„å±žæ€§åå†²çª) ps: è¿™èŠ‚ä¹¦ä¸­è¿™æ®µè¯ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦æŠŠè¿™äº›è¡Œä¸ºæ”¾åœ¨ä¸€èµ·ï¼Œ**é€šè¿‡ç±»çš„å¤åˆ¶**ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬åˆ†åˆ«æ”¾åœ¨å„è‡ªç‹¬ç«‹ çš„å¯¹è±¡ä¸­ï¼Œéœ€è¦æ—¶å¯ä»¥å…è®¸ XYZ å¯¹è±¡å§”æ‰˜ç»™ Taskã€‚æœ‰ä¸ªé”™è¯¯.â€é€šè¿‡ç±»çš„å¤åˆ¶â€åº”è¯¥æ”¹ä¸ºâ€é€šè¿‡â€[[Prototype]]æœºåˆ¶â€.è¿™é‡Œåº”è¯¥æ˜¯ä½œè€…çš„æ‰‹è¯¯.åœ¨ JavaScript ä¸­ï¼Œ[[Prototype]] æœºåˆ¶ä¼šæŠŠå¯¹è±¡å…³è”åˆ°å…¶ä»–å¯¹è±¡ã€‚æ— è®ºä½ å¤šä¹ˆåŠªåŠ›åœ°è¯´æœè‡ª å·±ï¼ŒJavaScript ä¸­å°±æ˜¯æ²¡æœ‰ç±»ä¼¼â€œç±»â€çš„æŠ½è±¡æœºåˆ¶ã€‚(å…¶å®žä¸»è¦åŽŸå› è¿˜æ˜¯æ˜¯JavaScriptæ²¡æœ‰å®Œæ•´çš„å¤åˆ¶æœºåˆ¶) å§”æ‰˜ç†è®ºçš„ä½¿ç”¨å»ºè®®:PS:ä¹¦ä¸­è¿™é‡Œå†™äº†3æ¡,å…¶å®žåªæœ‰2æ¡,ç¬¬ä¸‰æ¡ä¸è¿‡æ˜¯å¯¹ç¬¬ä¸€æ¡çš„è¯´æ˜Ž,è¿™é‡Œæˆ‘è¿›è¡Œäº†åˆå¹¶. é€šå¸¸æ¥è¯´ï¼Œåœ¨ [[Prototype]] å§”æ‰˜ä¸­æœ€å¥½æŠŠçŠ¶æ€ä¿å­˜åœ¨å§”æ‰˜è€…(å­å¯¹è±¡)è€Œä¸æ˜¯å§”æ‰˜ç›®æ ‡(çˆ¶å¯¹è±¡)ä¸Šã€‚é‚£æ€Žä¹ˆå®žçŽ°å‘¢,å°±æ˜¯é€šè¿‡â€this çš„éšå¼ç»‘å®šâ€.åœ¨å§”æ‰˜ç›®æ ‡(çˆ¶å¯¹è±¡)ä¸Šçš„å‡½æ•°é‡Œé€šè¿‡thiså®šä¹‰ä¿å­˜çŠ¶æ€.å½“å§”æ‰˜è€…(å­å¯¹è±¡)å¼•ç”¨è¯¥å‡½æ•°æ–¹æ³•æ—¶,æ­¤æ—¶çš„thiså°±è‡ªåŠ¨ç»‘å®šåˆ°å§”æ‰˜è€…ä¸Šäº†. åœ¨å§”æ‰˜ä¸­æˆ‘ä»¬ä¼šå°½é‡é¿å…åœ¨ [[Prototype]] é“¾çš„ä¸åŒçº§åˆ«ä¸­ä½¿ç”¨ç›¸åŒçš„å‘½åï¼Œå¦åˆ™å°±éœ€è¦ä½¿ç”¨ç¬¨æ‹™å¹¶ä¸”è„†å¼±çš„è¯­æ³•æ¥æ¶ˆé™¤å¼•ç”¨æ­§ä¹‰(å‚è§ç¬¬ 4 ç« )ã€‚ è¡¥å……: 3. åœ¨ API æŽ¥å£çš„è®¾è®¡ä¸­ï¼Œå§”æ‰˜æœ€å¥½åœ¨å†…éƒ¨å®žçŽ°ï¼Œä¸è¦ç›´æŽ¥æš´éœ²å‡ºåŽ»ã€‚ è¿™ä¹ˆåšæ›´å¤šçš„æ˜¯å‡ºäºŽå®‰å…¨å’ŒæŽ¥å£ç¨³å®šçš„è€ƒè™‘.å»ºè®®å­å¯¹è±¡å°†æ‰€æœ‰å¼•ç”¨çˆ¶å¯¹è±¡çš„æ–¹æ³•éƒ½å¥—ä¸ªå‡½æ•°éšè—èµ·æ¥,å¹¶å–ä¸€ä¸ªè¯­ä¹‰åŒ–çš„å±žæ€§å. å§”æ‰˜ç†è®ºçš„ä½¿ç”¨æ³¨æ„: ç¦æ­¢ä¸¤ä¸ªå¯¹è±¡äº’ç›¸å§”æ‰˜:å½“ä½ å°†ç¬¬äºŒä¸ªå¯¹è±¡åå‘å§”æ‰˜ç»™å‰ä¸€ä¸ªå¯¹è±¡æ—¶,å°±ä¼šæŠ¥é”™. è°ƒè¯•: è¿™ä¸ªäº†è§£ä¸‹å°±è¡Œ.çŸ¥é“ä¸åŒæµè§ˆå™¨å’Œå·¥å…·å¯¹å§”æ‰˜çš„è§£æžç»“æžœå¹¶ä¸ä¸€å®šç›¸åŒ.(åæ§½:çœ‹äº†åŠå¤©åˆ°åŽé¢å‡ºçŽ°å®žé™…ä¸Šï¼Œåœ¨ç¼–å†™æœ¬ä¹¦æ—¶ï¼Œè¿™ä¸ªè¡Œä¸ºè¢«è®¤å®šæ˜¯ Chrome çš„ä¸€ä¸ª bugï¼Œ å½“ä½ è¯»åˆ°æ­¤ä¹¦æ—¶ï¼Œå®ƒå¯èƒ½å·²ç»è¢«ä¿®å¤äº†ã€‚æˆ‘åªæƒ³è¯´WTF! å¥½å§,æˆ‘çŸ¥é“chromeä»¥å‰å¯èƒ½å‡ºçŽ°è¿‡è¿™ä¸ªâ€bugâ€äº†=.=) 6.1.3 æ¯”è¾ƒæ€ç»´æ¨¡åž‹è¿™èŠ‚ä¸»è¦æ˜¯æ¯”è¾ƒäº†â€é€šè¿‡æž„é€ å‡½æ•°(æ¨¡æ‹Ÿç±»)å®žçŽ°åŽŸåž‹ç»§æ‰¿â€ä¸Žâ€é€šè¿‡å¯¹è±¡å…³è”(å§”æ‰˜å½¢å¼,Object.create( â€¦ ))å®žçŽ°åŽŸåž‹ç»§æ‰¿â€ä¸¤ç§æ–¹å¼çš„åŒºåˆ«. ç»“è®º: é€šè¿‡å¯¹è±¡å…³è”,å§”æ‰˜å½¢å¼,æ›´åŠ ç®€æ´,æ›´åŠ æ¸…æ™°æ˜“æ‡‚. PS:è¿™é‡Œæˆ‘åŽŸæœ¬è‡ªå·±å¯¹ä¾‹å­ç”»å‡ºåŽŸåž‹ç¤ºæ„å›¾.ä½†æ˜¯å‘çŽ°æ˜¯çœŸçš„å¤æ‚,å¹¶ä¸”å’Œä¹¦ä¸­ç®€æ´åŽçš„ç¤ºæ„å›¾æ˜¯å·®ä¸å¤šçš„,æ‰€ä»¥è¿™é‡Œå°±ä¸å±•ç¤ºäº†,å…å¾—è®©è¯»è€…çœ‹å¾—æ›´å¤´å¤§.è¿™é‡Œå»ºè®®,è¯»è€…è‡ªå·±åœ¨è‰ç¨¿çº¸ä¸Šç”»å‡ºåŽŸåž‹ç¤ºæ„å›¾. 6.2 ç±»ä¸Žå¯¹è±¡å…¶å®žè¿™èŠ‚è®²å¾—è¿˜æ˜¯â€é€šè¿‡æž„é€ å‡½æ•°(æ¨¡æ‹Ÿç±»)å®žçŽ°åŽŸåž‹ç»§æ‰¿â€ä¸Žâ€é€šè¿‡å¯¹è±¡å…³è”(å§”æ‰˜å½¢å¼,Object.create( â€¦ ))å®žçŽ°åŽŸåž‹ç»§æ‰¿â€ä¸¤ç§æ–¹å¼çš„åŒºåˆ«.ä¸è¿‡è¿™æ¬¡ä¸»è¦æ˜¯ä»¥å‰ç«¯å®žé™…ä½¿ç”¨åœºæ™¯è¿›è¡Œè®²è§£. 6.2.1 æŽ§ä»¶â€œç±»â€è¿™é‡Œæˆ‘å°±ä¸ä»¥ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œè®²è§£äº†,è€Œæ˜¯ç›´æŽ¥ç«™åœ¨æ›´é«˜çš„è§’åº¦å¯¹è¿™ç§â€ç±»â€é£Žæ ¼çš„ä»£ç è¿›è¡Œè®²è§£.æœ€å¤§ç‰¹ç‚¹: 1æ˜¯é€šè¿‡æž„é€ å‡½æ•°è¿›è¡Œæ¨¡æ‹Ÿç±»,2æ˜¯é€šè¿‡æ˜¾å¼ä¼ªå¤šæ€(ç¡¬ç»‘å®šå‡½æ•°)å…³è”ä¸¤ä¸ªå‡½æ•°.æ³¨æ„: ä¸ç®¡æ˜¯ç±»è¿˜æ˜¯å¯¹è±¡.è¿™ä¸¤ç§å½¢å¼ä¸€èˆ¬éƒ½éœ€è¦å®šä¹‰ä¸¤ç§æ•°æ®.ç¬¬ä¸€ç§å°±æ˜¯å®žä¾‹å¯¹è±¡è¦ç”¨åˆ°çš„â€åˆå§‹ä¿å­˜çš„æ•°æ®â€;ç¬¬äºŒç§å°±æ˜¯é€šç”¨è¡Œä¸ºçš„å®šä¹‰,åŒ…æ‹¬å¯¹å®žä¾‹å¯¹è±¡æ•°æ®çš„å¢žåˆ æ”¹æŸ¥. ä¸‹é¢æåˆ°çš„æ˜¾å¼ä¼ªå¤šæ€(è¯¦è§ç¬¬å››ç« ),å…¶å®žæŒ‡çš„å°±æ˜¯ä½¿ç”¨call()æ–¹æ³•è¿™ç§ç¡¬ç»‘å®š. æ³¨æ„ES6 classæ¨¡æ‹Ÿç±»çš„å†™æ³•æˆ‘å°±æ²¡å…·ä½“åˆ—å‡ºäº†.å®žé™…ä¸Šclass ä»ç„¶æ˜¯é€šè¿‡ [[Prototype]] æœºåˆ¶å®žçŽ°çš„,ä¸è¿‡æ˜¯ä¸ªè¡¨é¢ç®€æ´çš„è¯­æ³•ç³–. è™½ç„¶ä¹¦ä¸­å¯¹æ˜¾å¼ä¼ªå¤šæ€ç§°ä¸ºâ€ä¸‘é™‹çš„â€,è¿˜ç”¨äº†ä¸€ä¸ªè¯­æ°”åŠ¨è¯â€å‘¸!â€.è™½ç„¶è¿™æ ·ä¸å¥½,ä½†æœ‰æ—¶ç”¨callçœŸçš„å¾ˆæ–¹ä¾¿,æ‰€ä»¥ç”¨å¾—ä¹Ÿå¾ˆå¤š. 6.2.2 å§”æ‰˜æŽ§ä»¶å¯¹è±¡æœ€å¤§ç‰¹ç‚¹: é€šè¿‡å¯¹è±¡è½½ä½“æ¥æ¨¡æ‹Ÿçˆ¶å­,å¹¶é€šè¿‡Object,create(â€¦)æ¥å¯¹ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œå…³è”.å¹¶é€šè¿‡å§”æ‰˜çš„å½¢å¼è¿›è¡Œå¼•ç”¨.ä¸Žä¸ŠèŠ‚ä¸­æåˆ°çš„ç±»å½¢å¼è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«:å¯¹è±¡fooæž„å»ºåŽ,éœ€è¦æ‰‹åŠ¨è°ƒç”¨setUpæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–.æ•…å¯¹è±¡çš„æž„å»ºä¸Žåˆå§‹åŒ–æ˜¯åˆ†å¼€çš„.è€Œæž„é€ å‡½æ•°å½¢å¼åˆ™æ˜¯åœ¨new æž„é€ å‡½æ•°æ—¶, åŒæ—¶è¿›è¡Œäº†å¯¹è±¡æž„å»ºä¸Žåˆå§‹åŒ–.(å…³äºŽè¿™ç‚¹æˆ‘ä¸‹é¢è¿˜ä¼šå†è¯´æ˜Žçš„) å…³äºŽä¹¦ä¸­è¿™å¥ä½¿ç”¨ç±»æž„é€ å‡½æ•°çš„è¯ï¼Œä½ éœ€è¦(å¹¶ä¸æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œä½†æ˜¯å¼ºçƒˆå»ºè®®)åœ¨åŒä¸€ä¸ªæ­¥éª¤ä¸­å®žçŽ°æž„é€ å’Œåˆå§‹åŒ–ã€‚ç„¶è€Œï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹æŠŠè¿™ä¸¤æ­¥åˆ†å¼€(å°±åƒå¯¹è±¡å…³è”ä»£ç ä¸€æ ·)æ›´çµæ´»ã€‚çš„ç†è§£:ä½¿ç”¨ç±»æž„é€ å‡½æ•°å½¢å¼,å½“æˆ‘ä»¬ä½¿ç”¨new æž„é€ å‡½æ•°æ—¶,å…¶å®žæ˜¯åœ¨ä¸€æ­¥å®žçŽ°å¯¹è±¡çš„æž„å»ºå’Œå¯¹è±¡æ•°æ®çš„åˆå§‹åŒ–(é€šè¿‡æž„é€ å‡½æ•°é‡Œçš„call) ;ä½¿ç”¨è¿™ç§å§”æ‰˜å½¢å¼,æˆ‘ä»¬æ˜¯åˆ†åˆ«é€šè¿‡Object.create( ... );æž„å»ºå¯¹è±¡å’Œfoo.setUp( ...);æ¥åˆå§‹åŒ–çš„.å³æˆ‘ä»¬æ˜¯åˆ†ä¸¤æ­¥å®žçŽ°çš„.è¿™æ ·åˆ†å¼€çš„è¯å…¶å®žæ˜¯æ›´åŠ çµæ´»,ä¹Ÿæ›´ç¬¦åˆç¼–ç¨‹ä¸­çš„å…³æ³¨åˆ†ç¦»åŽŸåˆ™. 6.3 æ›´ç®€æ´çš„è®¾è®¡è¿™èŠ‚ä¹Ÿæ˜¯ä¸€æ ·é€šè¿‡ä¸¤è€…çš„å¯¹æ¯”æ¥çªæ˜¾å§”æ‰˜è®¾è®¡æ¨¡å¼çš„å„ç§ä¼˜ç‚¹.è¿™é‡Œæˆ‘å°±ä¸å†å¯¹ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œè§£è¯».å¦‚æžœä½ çœŸæ­£ç†è§£äº†ç±»å’Œå§”æ‰˜çš„è¯,å…¶å®žæ˜¯å¾ˆç®€å•çš„.å¦‚æžœè§‰å¾—å¤æ‚çš„è¯,å¯ä»¥åœ¨çº¸ä¸Šç†ä¸€ä¸‹å‡½æ•°å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»,ä¸‹é¢æˆ‘å°±åªæ€»ç»“ä¸‹è¿™é‡Œæåˆ°å§”æ‰˜è®¾è®¡æ¨¡å¼çš„ä¼˜ç‚¹,å½“ç„¶æ ¸å¿ƒæ˜¯æ›´ç®€æ´. ç®€æ´ä½“çŽ°åœ¨: 1, å§”æ‰˜é‡ç‚¹åœ¨äºŽåªéœ€è¦ä¸¤ä¸ªå®žä½“(ä¸¤ä¸ªå¯¹è±¡ç›¸äº’å…³è”)ï¼Œè€Œä¹‹å‰çš„â€ç±»â€æ¨¡å¼éœ€è¦ä¸‰ä¸ª(çˆ¶â€ç±»â€,å­â€ç±»â€,å®žä¾‹å¯¹è±¡)å…¶å®žå¯ä»¥è¿™ä¹ˆç†è§£:å§”æ‰˜æ¨¡å¼å°†â€å­ç±»â€å’Œâ€å®žä¾‹å¯¹è±¡â€åˆä¸ºä¸€ä¸ªå¯¹è±¡äº†ã€‚ 2, ä¸éœ€è¦åŸºç±»(çˆ¶ç±»)æ¥â€å…±äº«â€ä¸¤ä¸ªå®žä½“ä¹‹é—´çš„è¡Œä¸º.ä¸éœ€è¦å®žä¾‹åŒ–ç±»,ä¹Ÿä¸éœ€è¦åˆæˆ.å…¶å®žè¿™ç¬¬äºŒæ¡å°±æ˜¯å¯¹ç¬¬ä¸€æ¡è¿™ç§ç»“æžœçš„è¯´æ˜Ž. é¢å¤–è¡¥å……å¼ºè°ƒ:åœ¨ä½¿ç”¨æž„é€ å‡½æ•°æ¨¡æ‹Ÿç±»æ—¶,å­ç±»é€šå¸¸ä¼šå¯¹çˆ¶ç±»çš„è¡Œä¸ºè¿›è¡Œé‡å†™(å±žæ€§åç›¸åŒ);ä½†å§”æ‰˜æ¨¡å¼åˆ™ä¸ä¼š,å®ƒä¼šé‡æ–°å–ä¸ªå±žæ€§å,å†å¼•ç”¨çˆ¶å¯¹è±¡ä¸Šçš„è¡Œä¸º. 6.4 æ›´å¥½çš„è¯­æ³•è¿™èŠ‚ä¸»è¦æ˜¯ä»‹ç»ES6æä¾›çš„2ä¸ªç®€æ´å†™æ³•ä¸Žå…¶ä¸­çš„éšæ‚£. è¯­æ³•: åœ¨ ES6 ä¸­æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„å¯¹è±¡çš„å­—é¢å½¢å¼ä¸­ä½¿ç”¨ç®€æ´æ–¹æ³•å£°æ˜Žï¼Œä¾‹å¦‚: 123 var Foo = &#123; bar() &#123; /*..*/ &#125;,//å­—é¢å½¢å¼å£°æ˜Ž&#125;; åœ¨ ES6 ä¸­æˆ‘ä»¬å¯ä»¥ç”¨ Object. setPrototypeOf(..) æ¥ä¿®æ”¹å¯¹è±¡çš„ [[Prototype]],å…·ä½“ç”¨æ³•å¯ä»¥æŸ¥çœ‹MDNä¾‹å¦‚: 12345678910111213// ä½¿ç”¨æ›´å¥½çš„å¯¹è±¡å­—é¢å½¢å¼è¯­æ³•å’Œç®€æ´æ–¹æ³• var AuthController = &#123; errors: [], checkAuth() &#123; // ... &#125;, server(url,data) &#123; // ... &#125; // ... &#125;;// çŽ°åœ¨æŠŠ AuthController å…³è”åˆ° LoginController Object.setPrototypeOf( AuthController, LoginController ); å¼Šç«¯: å¯¹è±¡å­—é¢å½¢å¼è¯­æ³•:å®žé™…ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°è¡¨è¾¾å¼.åŒ¿åå‡½æ•°ä¼šå¯¼è‡´3ä¸ªç¼ºç‚¹:1. è°ƒè¯•æ ˆæ›´éš¾è¿½è¸ª;2. è‡ªæˆ‘å¼•ç”¨(é€’å½’ã€äº‹ä»¶(è§£é™¤)ç»‘å®šï¼Œç­‰ç­‰)æ›´éš¾; 3. ä»£ç (ç¨å¾®)æ›´éš¾ç†è§£ã€‚(å…¶å®žæˆ‘è§‰å¾—è¿™3ä¸ªç¼ºç‚¹è¿˜å¥½,å½±å“ä¸æ˜¯é‚£ä¹ˆå¤§).ä½†æ˜¯è¿™ç§ç®€æ´è¯­æ³•å¾ˆç‰¹æ®Šï¼Œä¼šç»™å¯¹åº”çš„å‡½æ•°å¯¹è±¡è®¾ç½®ä¸€ä¸ªå†…éƒ¨çš„ name å±žæ€§ï¼Œè¿™æ ·ç†è®ºä¸Šå¯ä»¥ç”¨åœ¨è¿½ è¸ªæ ˆä¸­ã€‚æ‰€ä»¥å®žé™…ä¸Šå”¯ä¸€çš„å¼Šç«¯å°±åªå‰©ç¬¬2æ¡äº†.ç»ˆæžå»ºè®®å°±æ˜¯:å¦‚æžœä½ éœ€è¦è‡ªæˆ‘å¼•ç”¨çš„è¯ï¼Œé‚£æœ€å¥½ä½¿ç”¨ä¼ ç»Ÿçš„å…·åå‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å¯¹åº”çš„å‡½æ•°ï¼Œä¸è¦ä½¿ç”¨ç®€æ´æ–¹æ³•ã€‚ Object. setPrototypeOf(..) è¿™ä¸ªæ˜¯ä¹¦ä¸­æ²¡æœ‰æçš„,æˆ‘è§‰å¾—æœ‰å¿…è¦è¿›è¡Œè¡¥å……ä¸‹.é¦–å…ˆ,Object. setPrototypeOf(..)å¯èƒ½ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜,å¦‚æžœå…³å¿ƒæ€§èƒ½,åˆ™åº”è¯¥ä½¿ç”¨Object.create()æ›¿ä»£.Object. setPrototypeOf(..)ä¸ŽObject.create()çš„ä¸»è¦åŒºåˆ«: Object. setPrototypeOf(..)ä¼šç›´æŽ¥ä¿®æ”¹çŽ°æœ‰å¯¹è±¡çš„[[prototype]],Object.create()åˆ™æ˜¯è¿”å›žä¸€ä¸ªæ–°å¯¹è±¡.æ‰€ä»¥ä½ éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹ä¸¢å¤±çš„çš„constructorå±žæ€§(å¦‚æžœä½ éœ€è¦çš„è¯).è€Œä½¿ç”¨setPrototypeOf(..)åˆ™ä¸éœ€è¦. 6.5 å†…çœåæ§½: çºµè§‚æ•´æœ¬ä¹¦,ä½œè€…å…³äºŽJavaScriptä¸­æ¨¡æ‹Ÿç±»å’Œç»§æ‰¿â€çš„æ‰¹è¯„,è¯´å®ƒä»¬å…·æœ‰å¾ˆå¤§è¯¯å¯¼æ€§!æ›´æ˜¯å—¤ä¹‹ä»¥é¼»!å°±å·®çˆ†ç²—å£äº†,JavaScriptå°±åƒä¸€ä¸ªå¼‚æ•™å¾’,åº”è¯¥ç»‘åœ¨åå­—æž¶ä¸Šè¢«çƒ§æ­»!ä½†æ˜¯ä»–è¿™æ ·çš„è§‚ç‚¹,éƒ½æ˜¯ç«™åœ¨å…¶ä»–è¯­è¨€çš„è§’åº¦æ¥çœ‹å¾…æ—¶,äº§ç”Ÿçš„.æˆ‘æƒ³æ›´å¤šçš„è¯»è€…å¯èƒ½æ˜¯åªæŽ¥è§¦è¿‡JavaScript.é‚£ä¹ˆä»–å…¶å®žæ˜¯æ²¡æœ‰è¿™äº›ç–‘æƒ‘çš„!!!ä½ åè€Œç»™ä»–ä»¬è®²è¿™ä¸€å¤§å †å…¶ä»–è¯­è¨€çš„â€æ­£ç¡®â€å«ä¹‰,æœ‰æ—¶å€™ä¼šæ—¶å¾—å…¶å!è®©è¯»è€…æ›´åŠ å›°æƒ‘,å¦‚æžœæ˜¯ç†è§£ä¸é€å½»çš„,åè€Œä¼šæ€€ç–‘è‡ªå·±æœ¬æ¥å†™çš„æ˜¯å¯¹çš„ä»£ç !æ‰€ä»¥è¯»è€…åº”è¯¥åšä¸€ä¸ªå¯ä»¥ç†è§£ä½œè€…æ„å›¾,å¹¶ä¸”æ‹¥æœ‰è‡ªæˆ‘è§è§£å’Œè§‚ç‚¹ç«‹åœº! ä»€ä¹ˆæ˜¯å†…çœ(è‡ªçœ)?é¦–å…ˆ,æœ¬èŠ‚éœ€è¦å¼„æ‡‚ä¸€ä¸ªé—®é¢˜,ä»€ä¹ˆæ˜¯å†…çœ,æˆ–è€…æ˜¯è‡ªçœã€‚ä¹¦ä¸­çš„è§£é‡Šæ˜¯è‡ªçœå°±æ˜¯æ£€æŸ¥å®žä¾‹çš„ç±»åž‹ã€‚ç±»å®žä¾‹çš„è‡ªçœä¸»è¦ç›®çš„æ˜¯é€šè¿‡åˆ›å»ºæ–¹å¼æ¥åˆ¤æ–­å¯¹è±¡çš„ç»“æž„å’ŒåŠŸèƒ½ã€‚æˆ‘è¿™é‡Œå†æ›´é€šä¿—åœ°è§£é‡Šä¸‹:å½“æˆ‘ä»¬æž„å»ºå¾—åˆ°ä¸€ä¸ªå®žä¾‹å¯¹è±¡æ—¶,æœ‰æ—¶å€™æˆ‘ä»¬æ˜¯ä¸å¤ªæ¸…é™¤å®ƒçš„å±žæ€§å’Œæ–¹æ³•çš„.å°¤å…¶æ˜¯ç¬¬ä¸‰æ–¹åº“.æœ‰æ—¶å€™è´¸ç„¶ä½¿ç”¨ä¼šå¯¼è‡´å¾ˆå¤šé”™è¯¯(ä¾‹å¦‚è°ƒç”¨çš„æ–¹æ³•ä¸å­˜åœ¨,æˆ–è€…æŠ¥é”™ç­‰).è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦é€šè¿‡è‡ªçœ.å…¶å®žå°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—æ“ä½œ,æ¥ç¡®è®¤å®žä¾‹æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„é‚£ä¸ª,å®žä¾‹çš„æ–¹æ³•æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„(å­˜åœ¨ä¸”å¯ç”¨). å†…çœçš„æ–¹æ³•: 1.é€šè¿‡ instanceof è¯­æ³•:123456789101112function Foo() &#123; // ...&#125;Foo.prototype.something = function()&#123; // ... &#125;var a1 = new Foo();// å‡è®¾æˆ‘ä»¬ä¸çŸ¥é“ä¸Šé¢çš„è¿‡ç¨‹,åªçŸ¥é“å¾—åˆ°å®žä¾‹å¯¹è±¡a1//æˆ‘ä»¬æƒ³çŸ¥é“a1æ˜¯ä¸æ˜¯æˆ‘æ‰€å¸Œæœ›çš„å‡½æ•°Fooæ‰€æž„å»ºçš„if (a1 instanceof Foo) &#123; a1.something();&#125; ä¾‹å­ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ªå®žä¾‹å¯¹è±¡a1,ä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“a1æ˜¯ä¸æ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›çš„å‡½æ•°Fooæ‰€æž„é€ çš„,æ­¤æ—¶å°±å¯ä»¥é€šè¿‡instanceofè¿›è¡Œåˆ¤æ–­. instanceofæ¯”è¾ƒé€‚åˆåˆ¤æ–­å®žä¾‹å¯¹è±¡å’Œæž„é€ å‡½æ•°ä¹‹é—´çš„å…³ç³».ç¼ºé™·: ä½†æ˜¯å¦‚æžœæˆ‘ä»¬æƒ³åˆ¤æ–­å‡½æ•°Aæ˜¯ä¸æ˜¯å‡½æ•°Bçš„â€å­ç±»â€æ—¶,åˆ™ä¼šç¨å¾®éº»çƒ¦ç‚¹,æˆ‘ä»¬éœ€è¦åƒè¿™æ ·A.prototype instanceof Bè¿›è¡Œåˆ¤æ–­.å¹¶ä¸”ä¹Ÿä¸èƒ½ç›´æŽ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å…³è”. 2.é€šè¿‡ â€œé¸­å­ç±»åž‹â€: ä¸ºä»€ä¹ˆä¼šå«è¿™ä¸ªåå­—?çœ‹äº†ä½œè€…çš„è§£é‡Š,è¿˜æ˜¯ä¸å¤ªèƒ½æŽ¥å—.ä¸å¤ªç†è§£å¤–å›½äººçš„è„‘å›žè·¯.ä½ åœ¨å›½å†…å’Œåˆ«äººè¯´â€é¸­å­ç±»åž‹â€,ä¼°è®¡ä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼.å…¶å®žå¾ˆç®€å•,æ‰€è°“çš„â€é¸­å­ç±»åž‹â€å…¶å®žä¹Ÿæ˜¯æˆ‘ä»¬å®žé™…å·¥ä½œä¸­å¸¸ç”¨çš„:1234//å¦‚æžœa1çš„somethingå­˜åœ¨çš„è¯,åˆ™æˆ‘ä»¬å¯ä»¥è¿›è¡Œè°ƒç”¨if ( a1.something) &#123; a1.something();&#125; å…¶å®žè¿™ç§æ–¹æ³•æ˜¯éžå¸¸å¸¸ç”¨çš„,æŽ’é™¤äº†åœ¨ä¸çŸ¥é“å­˜åœ¨æ€§æƒ…å†µä¸‹,è´¸ç„¶è°ƒç”¨çš„é£Žé™©.ç¼ºé™·: å…³äºŽä¹¦ä¸­æåˆ°çš„ç¼ºç‚¹,å››ä¸ªå­—æ¦‚æ‹¬å°±æ˜¯â€ä»¥åæ¦‚å…¨â€ .ä¹¦ä¸­å…³äºŽPromiseçš„ä¾‹å­,å°±æ˜¯ä»¥åæ¦‚å…¨çš„ä¾‹å­.æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶,åœ¨ifåˆ¤æ–­a1.somethingå­˜åœ¨æ—¶,æ‰ä¼šåœ¨åŽé¢ä½¿ç”¨somethingæ–¹æ³•.ä¸è¦ç›´æŽ¥ä½¿ç”¨anotherthing,è¿™ç§æ²¡ç¡®è®¤è¿‡çš„æ–¹æ³•. 3.å¦‚æžœä½¿ç”¨å¯¹è±¡å…³è”æ—¶: åˆ™å¯ä»¥æ¯”è¾ƒç®€å•çš„ä½¿ç”¨Object.getPrototypeOf(..)è¿›è¡Œåˆ¤æ–­.ä¾‹å¦‚Object.getPrototypeOf(a)===Aå…¶ä¸­a,Aéƒ½æ˜¯å¯¹è±¡.å¦‚æžœä¸ºtrue,åˆ™è¯´æ˜Žaçš„åŽŸåž‹é“¾ä¸Šå«æœ‰å¯¹è±¡A. 6.6 å°ç»“ é™¤äº†ç±»å’Œç»§æ‰¿è®¾è®¡æ¨¡å¼,è¡Œä¸ºå§”æ‰˜å…¶å®žæ˜¯æ›´å¼ºå¤§,æ›´å€¼å¾—æŽ¨å¹¿çš„æ¨¡å¼(æœ¬è§‚ç‚¹ä»…ä»£è¡¨ä½œè€…çš„è§‚ç‚¹!) è¡Œä¸ºå§”æ‰˜è®¤ä¸ºå¯¹è±¡ä¹‹é—´æ˜¯å…„å¼Ÿå…³ç³»ï¼Œäº’ç›¸å§”æ‰˜ï¼Œè€Œä¸æ˜¯çˆ¶ç±»å’Œå­ç±»çš„å…³ç³»ã€‚JavaScript çš„ [[Prototype]] æœºåˆ¶æœ¬è´¨ä¸Šå°±æ˜¯è¡Œä¸ºå§”æ‰˜æœºåˆ¶ã€‚(æˆ‘è§‰å¾—è¿˜æ˜¯çˆ¶å­å¯¹è±¡å…³ç³».æˆ‘çš„è§£è¯´é‡Œä¹Ÿéƒ½æ˜¯çˆ¶å­ç›¸ç§°) å½“ä½ åªç”¨å¯¹è±¡æ¥è®¾è®¡ä»£ç æ—¶ï¼Œä¸ä»…å¯ä»¥è®©è¯­æ³•æ›´åŠ ç®€æ´ï¼Œè€Œä¸”å¯ä»¥è®©ä»£ç ç»“æž„æ›´åŠ æ¸…æ™°ã€‚ å¯¹è±¡å…³è”(å¯¹è±¡ä¹‹å‰äº’ç›¸å…³è”)æ˜¯ä¸€ç§ç¼–ç é£Žæ ¼ï¼Œå®ƒå€¡å¯¼çš„æ˜¯ç›´æŽ¥åˆ›å»ºå’Œå…³è”å¯¹è±¡ï¼Œä¸æŠŠå®ƒä»¬æŠ½è±¡æˆç±»ã€‚å¯¹è±¡å…³è”å¯ä»¥ç”¨åŸºäºŽ [[Prototype]] çš„è¡Œä¸ºå§”æ‰˜éžå¸¸è‡ªç„¶åœ°å®žçŽ°]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsè¿è¡Œæœºåˆ¶]]></title>
    <url>%2F2019%2F02%2F13%2Fjs%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[å¤§çº² è¿›ç¨‹ä¸Žçº¿ç¨‹ æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ æµè§ˆå™¨åŒ…å«å“ªäº›è¿›ç¨‹ å¤šè¿›ç¨‹çš„ä¼˜åŠ¿ æµè§ˆå™¨å†…æ ¸(æ¸²æŸ“è¿‡ç¨‹) Browserè¿›ç¨‹ä¸Žæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹ æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹çš„å…³ç³» GUIæ¸²æŸ“çº¿ç¨‹ä¸ŽJSå¼•æ“Žçº¿ç¨‹äº’æ–¥ JSé˜»å¡žé¡µé¢åŠ è½½ WebWorker,JSçš„å¤šçº¿ç¨‹ï¼Ÿ WebWorkerä¸ŽSharedWorker æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ loadäº‹ä»¶ä¸ŽDOMContentLoadedäº‹ä»¶çš„å…ˆåŽ cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡ždomæ ‘çš„æ¸²æŸ“ æ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚ ä»ŽEvenLoopè°ˆJsçš„è¿è¡Œæœºåˆ¶ äº‹ä»¶å¾ªçŽ¯æœºåˆ¶çš„è¿›ä¸€æ­¥è¯´æ˜Ž å•ç‹¬è¯´è¯´å®šæ—¶å™¨ setTimeoutè€Œä¸æ˜¯setInterval äº‹ä»¶å¾ªçŽ¯è¿›é˜¶ï¼šmacrotaskä¸Žmicrotask 190320è¡¥å……ï¼šNodeä¸Žæµè§ˆå™¨çš„ Event Loop å·®å¼‚ åŒºåˆ†çº¿ç¨‹ä¸Žè¿›ç¨‹å…ˆçœ‹ä¸‹è¿›ç¨‹ä¸Žçº¿ç¨‹çš„ä¸€ä¸ªæ¯”å–»ï¼š è¿›ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å·¥åŽ‚ï¼Œå·¥åŽ‚æœ‰ä»–ç‹¬ç«‹çš„èµ„æºå·¥åŽ‚ä¹‹é—´ç›¸äº’ç‹¬ç«‹çº¿ç¨‹æ˜¯å·¥åŽ‚é‡Œçš„å·¥äºº,å¤šä¸ªå·¥äººååŒå®Œæˆä»»åŠ¡å·¥åŽ‚å†…æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå·¥äººå·¥äººä¹‹é—´å…±äº«ç©ºé—´ å®Œå–„ä¸€ä¸‹ï¼š å·¥åŽ‚çš„èµ„æº -&gt; ç³»ç»Ÿåˆ†é…çš„å†…å­˜ï¼ˆç‹¬ç«‹çš„ä¸€å—å†…å­˜ï¼‰å·¥åŽ‚ä¹‹é—´ç›¸äº’ç‹¬ç«‹ -&gt; è¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹å¤šäººåä½œå…±åŒå®Œæˆä»»åŠ¡ -&gt; å¤šä¸ªçº¿ç¨‹åœ¨è¿›ç¨‹ä¸­åä½œå®Œæˆä»»åŠ¡å·¥åŽ‚å†…æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå·¥äºº -&gt; ä¸€ä¸ªè¿›ç¨‹æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆå·¥äººä¹‹é—´å…±äº«ç©ºé—´ -&gt; åŒä¸€ä¸ªè¿›ç¨‹ä¸‹çš„å„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®é›†ã€å †ç­‰ï¼‰ ç”¨å®˜æ–¹ä¸€ç‚¹çš„è¯è¿›è¡Œæ€»ç»“æ˜¯ï¼š è¿›ç¨‹æ˜¯CPUè¿›è¡Œèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼ˆç³»ç»Ÿä¼šç»™ä»–åˆ†é…å†…å­˜ï¼‰ï¼Œæ˜¯èƒ½æ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è¿è¡Œçš„æœ€å°å•ä½ çº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½ï¼ˆçº¿ç¨‹æ˜¯å»ºç«‹åœ¨è¿›ç¨‹åŸºç¡€ä¸Šçš„ä¸€æ¬¡ç¨‹åºè¿è¡Œå•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼‰ tips ä¸åŒè¿›ç¨‹ä¹‹é—´ä¹Ÿå¯ä»¥é€šä¿¡ï¼Œä¸è¿‡ä»£ä»·æ¯”è¾ƒå¤§ çŽ°åœ¨ï¼Œä¸€èˆ¬é€šç”¨çš„å«æ³•ï¼šå•çº¿ç¨‹ä¸Žå¤šçº¿ç¨‹ï¼Œéƒ½æ˜¯æŒ‡åœ¨ä¸€ä¸ªè¿›ç¨‹å†…çš„å•å’Œå¤šã€‚ æµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹çš„ç†è§£äº†è¿›ç¨‹ä¸Žçº¿ç¨‹çš„åŒºåˆ«åŽï¼ŒæŽ¥ä¸‹æ¥å¯¹æµè§ˆå™¨è¿›è¡Œä¸€å®šç¨‹åº¦çš„è®¤è¯†,å…ˆçœ‹ä¸‹ç®€åŒ–ç†è§£ï¼š æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ æµè§ˆå™¨ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿è¡Œï¼Œæ˜¯å› ä¸ºç³»ç»Ÿç»™ä»–çš„è¿›ç¨‹åˆ†é…äº†èµ„æºï¼ˆcpuã€å†…å­˜ï¼‰ ç®€å•ç‚¹ç†è§£ï¼Œæ¯æ‰“å¼€ä¸€ä¸ªtabé¡µï¼Œå°±ç›¸å½“äºŽåˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„æµè§ˆå™¨è¿›ç¨‹ã€‚ æ³¨æ„:æµè§ˆå™¨ä¹Ÿæœ‰è‡ªå·±çš„ä¼˜åŒ–æœºåˆ¶ï¼Œå¤šä¸ªç©ºç™½tabé¡µæ‰“å¼€åŽï¼Œä¼šè¢«åˆå¹¶ã€‚ æµè§ˆå™¨åŒ…å«äº†å“ªäº›è¿›ç¨‹?ä¸»è¦è¿›ç¨‹æœ‰ï¼š1.Browserè¿›ç¨‹ï¼šæµè§ˆå™¨çš„ä¸»è¦è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æŽ§ï¼‰ä¹‹æœ‰ä¸€ä¸ªï¼Œä½œç”¨æœ‰ï¼š è´Ÿè´£æµè§ˆå™¨çš„é¡µé¢å±•ç¤º ï¼Œä¸Žç”¨æˆ·äº¤äº’ï¼Œå¦‚å‰è¿›ã€åŽé€€ç­‰ã€‚ è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹ã€‚ å°†Rendererè¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„Bitmapï¼Œç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ã€‚ ç½‘ç»œèµ„æºçš„ç®¡ç†ï¼Œä¸‹è½½ç­‰ 2.ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šæ¯ç§ç±»åž‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨æ”¹æ’ä»¶æ—¶æ‰åˆ›å»ºã€‚3.GPUè¿›ç¨‹ï¼šæœ€å¤šä¸€ä¸ªï¼Œç”¨äºŽ3Dç»˜åˆ¶ç­‰ã€‚4.æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼šï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼ˆRendererè¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰é»˜è®¤æ¯ä¸ªTabé¡µæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“ï¼Œä¸»è¦ä½œç”¨ä¸ºï¼š é¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰ã€‚ åœ¨æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªç½‘é¡µç›¸å½“äºŽèµ·äº†ä¸€ä¸ªè¿›ç¨‹ï¼ˆè¿›ç¨‹å†…æœ‰è‡ªå·±çš„å¤šçº¿ç¨‹ï¼‰ã€‚ æµè§ˆå™¨å¤šçº¿ç¨‹çš„ä¼˜åŠ¿ç›¸æ¯”äºŽå•çº¿ç¨‹çš„æµè§ˆå™¨ï¼Œå¤šçº¿ç¨‹æµè§ˆå™¨æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š é¿å…å•ä¸ªpage crash(é¡µé¢å´©æºƒ)å½±å“æ•´ä¸ªæµè§ˆå™¨ã€‚ é¿å…ç¬¬ä¸‰æ–¹æ’ä»¶å´©æºƒå½±å“æ•´ä¸ªæµè§ˆå™¨ã€‚ å¤šçº¿ç¨‹å……åˆ†åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿ã€‚ æ–¹ä¾¿ä½¿ç”¨æ²™ç›’æ¨¡åž‹éš”ç¦»æ’ä»¶ç­‰è¿›ç¨‹ï¼Œæé«˜æµè§ˆå™¨ç¨³å®šæ€§ã€‚ å†…å­˜æ¶ˆè€—æœ‰ç‚¹å¤§ã€‚ç©ºé—´æ¢æ—¶é—´ã€‚ æµè§ˆå™¨å†…æ ¸å¯¹äºŽå‰ç«¯æ¥è¯´ï¼Œæœ€é‡è¦çš„è¿›ç¨‹æ˜¯æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹ã€‚é¡µé¢çš„æ¸²æŸ“ï¼ŒJSçš„æ‰§è¡Œï¼Œäº‹ä»¶çš„å¾ªçŽ¯ï¼Œéƒ½åœ¨è¿™ä¸ªè¿›ç¨‹å†…æ‰§è¡Œã€‚ è¯·ç‰¢è®°ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹æ˜¯å¤šçº¿ç¨‹çš„ã€‚ æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹åŒ…å«å“ªäº›çº¿ç¨‹ï¼Ÿï¼ˆåˆ—ä¸€äº›å¸¸é©»çš„ï¼‰1.GUIæ¸²æŸ“çº¿ç¨‹ è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨é¡µé¢ï¼Œè§£æžHTML,CSS, æž„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œé‡ç»˜ç­‰ã€‚ å½“ç•Œé¢éœ€è¦é‡ç»˜ï¼ˆRepaint,æ ·å¼æ”¹å˜ï¼‰æˆ–ç”±äºŽæŸäº›æ“ä½œå¼•å‘å›žæµï¼ˆreflowï¼‰æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œã€‚ æ³¨æ„ï¼ŒGUIæ¸²æŸ“çº¿ç¨‹ä¸ŽJSå¼•æ“Žçº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“jså¼•æ“Žæ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œï¼ˆç›¸å½“äºŽè¢«å†»ç»“äº†ï¼‰ï¼ŒGUIæ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç­‰åˆ°JSå¼•æ“Žç©ºé—²æ—¶ç«‹å³æ‰§è¡Œã€‚ 2.JSå¼•æ“Žçº¿ç¨‹ ä¹Ÿç§°ä½œJSå†…æ ¸ï¼Œè´Ÿè´£å¤„ç†Javascriptè„šæœ¬ç¨‹åºï¼ˆä¾‹å¦‚V8å¼•æ“Žï¼‰ã€‚ JSå¼•æ“Žçº¿ç¨‹è´Ÿè´£è§£æžJavascriptè„šæœ¬ï¼Œè¿è¡Œä»£ç ã€‚ JSå¼•æ“Žä¸€ç›´ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶åŽåŠ ä»¥å¤„ç†,ä¸€ä¸ªTabé¡µï¼ˆRendererè¿›ç¨‹ï¼‰ä¸­æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªJSçº¿ç¨‹åœ¨è¿è¡ŒJSç¨‹åºã€‚ åŒæ ·æ³¨æ„ï¼šGUIæ¸²æŸ“çº¿ç¨‹ä¸ŽJSå¼•æ“Žçº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥å¦‚æžœJSæ‰§è¡Œæ—¶é—´è¿‡ç¨‹ï¼Œå°±ä¼šé€ æˆé¡µé¢æ¸²æŸ“ä¸è¿žè´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡žã€‚ 3.äº‹ä»¶è§¦å‘çº¿ç¨‹ å½’å±žäºŽæµè§ˆå™¨è€Œä¸æ˜¯JSå¼•æ“Žï¼Œç”¨æ¥æŽ§åˆ¶äº‹ä»¶å¾ªçŽ¯ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºï¼ŒJSå¼•æ“Žè‡ªå·±éƒ½å¿™ä¸è¿‡æ¥ï¼Œéœ€è¦æµè§ˆå™¨å¦å¼€çº¿ç¨‹ååŠ©ï¼‰ å½“JSå¼•æ“Žæ‰§è¡Œä»£ç å—å¦‚SetTimeoutæ—¶ï¼ˆä¹Ÿå¯ä»¥æ¥è‡ªäºŽæµè§ˆå™¨çš„å…¶ä»–çº¿ç¨‹ï¼Œå¦‚é¼ æ ‡ç‚¹å‡»ï¼ŒAjaxè¯·æ±‚ç­‰ï¼‰ï¼Œä¼šå°†å¯¹åº”ä»»åŠ¡æ·»åŠ åˆ°äº‹ä»¶çº¿ç¨‹ä¸­ã€‚ å½“å¯¹åº”çš„äº‹ä»¶ç¬¦åˆè§¦å‘æ¡ä»¶è¢«è§¦å‘æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…JSå¼•æ“Žçš„å¤„ç†ã€‚ ç”±äºŽJSçš„å•çº¿ç¨‹å…³ç³»ï¼Œæ‰€æœ‰è¿™äº›å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶éƒ½å¾—æŽ’é˜Ÿç­‰å¾…JSå¼•æ“Žå¤„ç†ã€‚ï¼ˆå½“JSå¼•æ“Žç©ºé—²æ—¶æ‰ä¼šåŽ»æ‰§è¡Œï¼‰ 4.å®šæ—¶å™¨è§¦å‘çº¿ç¨‹ ä¼ è¯´ä¸­çš„setTimeoutä¸ŽsetIntervalæ‰€åœ¨çº¿ç¨‹ã€‚ æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨å¹¶ä¸æ˜¯ç”±jså¼•æ“Žè®¡æ•°çš„ï¼ˆå› ä¸ºjså¼•æ“Žæ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æžœå¤„äºŽé˜»å¡žçº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®¡æ•°çš„å‡†ç¡®æ€§ï¼‰ å› æ­¤é€šè¿‡å•ç‹¬çš„çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ï¼ˆè®¡æ—¶å®Œæ¯•åŽï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“Žç©ºé—²åŽæ‰§è¡Œï¼‰ æ³¨æ„ï¼ŒW3Cä¸ŽHTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚setTimeoutä½ŽäºŽ4msçš„æ—¶é—´é—´éš”ç®—ä¸º4msã€‚ 5.å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹ åœ¨XMLHttpRequeståœ¨è¿žæŽ¥ä¹‹åŽé€šè¿‡æµè§ˆå™¨æ–°å¼€ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚ã€‚ åœ¨æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æžœè®¾ç½®æœ‰å›žè°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±äº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œå°†è¿™ä¸ªå›žè°ƒå†æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå†ç”±JSå¼•æ“Žæ‰§è¡Œã€‚ ä¸ºä»€ä¹ˆJSå¼•æ“Žæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ å‡è®¾JSå¼•æ“Žæ˜¯å¤šçº¿ç¨‹çš„ï¼ŒçŽ°åœ¨æœ‰ä¸¤ä¸ªè¿›ç¨‹ï¼ŒprocessAã€processB,çŽ°åœ¨è¦å¯¹åŒä¸€ä¸ªdomè¿›è¡Œæ“ä½œï¼ŒåŒæ—¶è¿›è¡Œæ“ä½œï¼ŒprocessAç¼–è¾‘äº†è¯¥domï¼ŒprocessBåˆ é™¤äº†è¯¥domï¼ŒåŒæ—¶ä¸‹è¾¾äº†ä¸¤ä¸ªçŸ›ç›¾çš„å‘½ä»¤ï¼Œæµè§ˆå™¨è¯¥å¦‚ä½•æ‰§è¡Œï¼Ÿ Browserè¿›ç¨‹ï¼ˆæŽ§åˆ¶è¿›ç¨‹ï¼‰å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹å…ˆæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œç„¶åŽæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼šä»»åŠ¡ç®¡ç†å™¨ä¸­å‡ºçŽ°äº†ä¸¤ä¸ªè¿›ç¨‹ï¼ˆä¸€ä¸ªæ˜¯ä¸»æŽ§è¿›ç¨‹ï¼Œä¸€ä¸ªæ˜¯æ‰“å¼€Tabé¡µçš„æ¸²æŸ“è¿›ç¨‹ï¼‰çœ‹ä¸‹ç®€åŒ–åŽçš„é€šä¿¡è¿‡ç¨‹ï¼š Browserè¿›ç¨‹æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œé¦–å…ˆè¦èŽ·å–é¡µé¢å†…å®¹ï¼ˆæ¯”å¦‚é€šè¿‡ç½‘ç»œä¸‹è½½èµ„æºï¼‰ï¼Œç„¶åŽå°†è¯¥ä»»åŠ¡é€šè¿‡RendererHostæŽ¥å£ä¼ é€’ç»™Renderè¿›ç¨‹ã€‚ Rendererè¿›ç¨‹çš„RendereræŽ¥å£æŽ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œç®€å•è§£é‡ŠåŽï¼Œäº¤ç»™æ¸²æŸ“çº¿ç¨‹ï¼Œç„¶åŽå¼€å§‹æ¸²æŸ“ æ¸²æŸ“çº¿ç¨‹æŽ¥æ”¶è¯·æ±‚ï¼ŒåŠ è½½ç½‘é¡µå¹¶æ¸²æŸ“ç½‘é¡µï¼Œè¿™å…¶ä¸­å¯èƒ½éœ€è¦Browserè¿›ç¨‹èŽ·å–èµ„æºå’Œéœ€è¦GPUè¿›ç¨‹æ¥å¸®åŠ©æ¸²æŸ“ã€‚ å¯èƒ½æœ‰JSçº¿ç¨‹æ“ä½œDOMï¼ˆå¯èƒ½é€ æˆå›žæµå¹¶é‡ç»˜ï¼‰ã€‚ æœ€åŽRendererè¿›ç¨‹å°†ç»“æžœè¿”å›žç»™Browserè¿›ç¨‹ã€‚ Browserè¿›ç¨‹æŽ¥æ”¶åˆ°ç»“æžœå¹¶å°†ç»“æžœç»˜åˆ¶å‡ºæ¥ã€‚ ä¸€å¼ ç®€å•çš„æµç¨‹å›¾ï¼š æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»GUIæ¸²æŸ“çº¿ç¨‹ä¸ŽJSå¼•æ“Žçº¿ç¨‹äº’æ–¥ç”±äºŽJSæ˜¯å¯ä»¥ç›´æŽ¥æ“ä½œdomçš„ï¼Œå¦‚æžœä¿®æ”¹è¿™äº›å…ƒç´ å±žæ€§çš„åŒæ—¶æ¸²æŸ“é¡µé¢ï¼ˆå³JSçº¿ç¨‹å’ŒUIçº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åŽèŽ·å–çš„å…ƒç´ å±žæ€§å¯èƒ½å°±ä¸ä¸€æ ·äº†ã€‚å› æ­¤ï¼Œä¸ºäº†é˜²æ­¢ä¸å¯æ¸²æŸ“æ—¶å‡ºçŽ°ä¸å¯é¢„æœŸçš„åŽæžœï¼Œæµè§ˆå™¨è®¾ç½®GUIæ¸²æŸ“çº¿ç¨‹ä¸ŽJSå¼•æ“Žä¸ºäº’æ–¥å…³ç³»ï¼Œå½“JSå¼•æ“Žæ‰§è¡Œæ—¶ï¼ŒGUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒGUIçº¿ç¨‹ä¼šè¢«ä¿å­˜åˆ°ä¸€ä¸ªå¾…æ‰§è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…JSå¼•æ“Žçº¿ç¨‹ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚ JSé˜»å¡žé¡µé¢åŠ è½½ä»Žä¸Šè¿°çš„äº’æ–¥å…³ç³»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŽ¨å¯¼å‡ºï¼ŒJSå¦‚æžœæ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œä¼šé˜»å¡žé¡µé¢çš„æ¸²æŸ“ã€‚å°½é‡é¿å…JSæ‰§è¡Œæ—¶é—´è¿‡é•¿ã€‚ WebWorker,jsçš„å¤šçº¿ç¨‹ï¼ŸJSå¯¹cpuå¯†é›†åž‹è®¡ç®—å¦‚ä½•æ‰§è¡Œï¼ŸHTML5 ä¸­å¼•å…¥äº†Web WorkerMDNçš„å®˜æ–¹è§£é‡Šæ˜¯ï¼š Web Workerä¸ºwebå†…å®¹åœ¨åŽå°çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•ã€‚çº¿ç¨‹å¯ä»¥æ‰§è¡Œä»»åŠ¡è€Œä¸å¹²æ‰°ç”¨æˆ·ç•Œé¢ã€‚ä¸€ä¸ªworkeræ˜¯ä½¿ç”¨ä¸€ä¸ªæž„é€ å‡½æ•°åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡ï¼ˆe.g.Worker()ï¼‰è¿è¡Œä¸€ä¸ªå‘½åçš„Javascriptæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«å°†åœ¨å·¥ä½œçº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç ï¼›workersè¿è¡Œåœ¨å¦ä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸åŒäºŽå½“å‰windowã€‚å› æ­¤ï¼Œä½¿ç”¨windowå¿«æ·æ–¹å¼èŽ·å–å½“å‰å…¨å±€çš„èŒƒå›´ï¼ˆè€Œä¸æ˜¯selfï¼‰åœ¨ä¸€ä¸ªworkerå†…å°†è¿”å›žé”™è¯¯ã€‚ è¿™æ ·ç†è§£ä¸‹ï¼š åˆ›å»ºWorkeræ—¶ï¼ŒJSå¼•æ“Žåƒæµè§ˆå™¨ç”³è¯·å¼€ä¸€ä¸ªå­çº¿ç¨‹ï¼ˆå­çº¿ç¨‹æ˜¯æµè§ˆå™¨å¼€çš„ï¼Œå®Œå…¨å—ä¸»çº¿ç¨‹æŽ§åˆ¶ï¼Œè€Œä¸”ä¸èƒ½æ“ä½œDOMï¼‰ JSå¼•æ“Žçº¿ç¨‹ä¸Žworkerçº¿ç¨‹é—´é€šè¿‡ç‰¹å®šçš„æ–¹å¼é€šä¿¡ï¼ˆpostMessage APIï¼Œéœ€è¦é€šè¿‡åºåˆ—åŒ–å¯¹è±¡æ¥ä¸Žçº¿ç¨‹äº¤äº’ç‰¹å®šçš„æ•°æ®ï¼‰ æ‰€ä»¥ï¼Œå¦‚æžœæœ‰éžå¸¸è€—æ—¶çš„å·¥ä½œï¼Œè¯·å•ç‹¬å¼€ä¸€ä¸ªWorkerçº¿ç¨‹ï¼Œè¿™æ ·é‡Œé¢ä¸ç®¡å¦‚ä½•ç¿»å¤©è¦†åœ°éƒ½ä¸ä¼šå½±å“JSå¼•æ“Žä¸»çº¿ç¨‹ï¼Œåªç­‰å¾…è®¡ç®—ç»“æžœå‡ºæ¥åŽï¼Œå°†ç»“æžœé€šä¿¡ç»™ä¸»çº¿ç¨‹å³å¯ã€‚ Workerå¯ä»¥ç†è§£æ˜¯æµè§ˆå™¨ç»™JSå¼•æ“Žä¸“é—¨ä¸ºå¤§é‡è®¡ç®—é—®é¢˜å¼€çš„å°ç¶ã€‚ WebWorkerä¸ŽSharedWorker WebWorkeråªå±žäºŽæŸä¸ªé¡µé¢ï¼Œä¸ä¼šå’Œå…¶ä»–é¡µé¢çš„Renderè¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸è¿›ç¨‹ï¼‰å…±äº« æ‰€ä»¥Chromeåœ¨Renderè¿›ç¨‹ä¸­ï¼ˆæ¯ä¸€ä¸ªTabé¡µå°±æ˜¯ä¸€ä¸ªrenderè¿›ç¨‹ï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥è¿è¡ŒWorkerä¸­çš„Javascriptç¨‹åºã€‚ SharedWorkeræ˜¯æµè§ˆå™¨æ‰€æœ‰é¡µé¢å…±äº«çš„ï¼Œä¸èƒ½é‡‡ç”¨ä¸ŽWorkeråŒæ ·çš„æ–¹å¼å®žçŽ°ã€‚å› ä¸ºå®ƒä¸éš¶å±žäºŽæŸä¸ªRenderè¿›ç¨‹ï¼Œå¯ä»¥ä¸ºå¤šä¸ªRenderè¿›è¡Œå…±äº«ä½¿ç”¨ã€‚ æ‰€ä»¥Chromeæµè§ˆå™¨ä¸ºSharedWorkerå•ç‹¬åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ¥è¿è¡ŒJavascriptç¨‹åºï¼Œåœ¨æµè§ˆå™¨ä¸­æ¯ä¸ªç›¸åŒçš„JavaScriptåªå­˜åœ¨ä¸€ä¸ªSharedWorkerè¿›ç¨‹ï¼Œä¸ç®¡ä»–è¢«åˆ›å»ºå¤šå°‘æ¬¡ã€‚ ä¸¤ä¸ªæœ¬è´¨ä¸Šå°±æ˜¯çº¿ç¨‹ä¸Žè¿›ç¨‹çš„åŒºåˆ«ã€‚SharedWorkerç”±ç‹¬ç«‹çš„è¿›ç¨‹ç®¡ç†ï¼ŒWebWorkeråªæ˜¯éš¶å±žä¸Žrenderè¿›ç¨‹ä¸‹çš„ä¸€ä¸ªçº¿ç¨‹ã€‚ ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹è¿™ä¸ªå‘¢ï¼Œæ¸²æŸ“è¿‡ç¨‹çš„å‰æˆæ¯”è¾ƒé•¿ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹è¿™ä¸ªä»Žè¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿå¯ä»¥çœç•¥æ¦‚æ‹¬ä¸ºï¼š æµè§ˆå™¨è¾“å…¥url,æµè§ˆå™¨ä¸»è¿›ç¨‹æŽ¥ç®¡ï¼Œå¼€ä¸€ä¸ªä¸‹è½½çº¿ç¨‹ï¼Œç„¶åŽè¿›è¡Œhttpè¯·æ±‚ï¼ˆç•¥åŽ»DNSæŸ¥è¯¢ï¼ŒIPå¯»å€ç­‰æ“ä½œï¼‰ï¼Œç„¶åŽç­‰å¾…å“åº”ï¼ŒèŽ·å–å†…å®¹ï¼Œç„¶åŽå°†å†…å®¹é€šè¿‡RendererHostæŽ¥å£è½¬äº¤ç»™Rendererè¿›ç¨‹ï¼Œç„¶åŽæµè§ˆå™¨æ¸²æŸ“å¼€å§‹ã€‚ æµè§ˆå™¨å†…æ ¸æ‹¿åˆ°å†…å®¹åŽï¼Œæ¸²æŸ“å¤§æ¦‚å¯ä»¥åˆ’åˆ†æˆä»¥ä¸‹æ­¥éª¤ï¼š 1.è§£æžHTMLæž„å»ºDOMæ ‘ï¼› 2.è§£æžCSSæž„å»ºrenderæ ‘ï¼Œï¼ˆå°†CSSä»£ç è§£æžæˆæ ‘å½¢çš„æ•°æ®ç»“æž„ï¼Œç„¶åŽç»“åˆDOMåˆå¹¶æˆrenderæ ‘ï¼‰ï¼› 3.å¸ƒå±€renderæ ‘ï¼ˆLayout/reflowï¼‰,è´Ÿè´£å„å…ƒç´ å°ºå¯¸ã€ä½ç½®çš„è®¡ç®—ï¼› 4.ç»˜åˆ¶renderæ ‘ï¼ˆpaintï¼‰,ç»˜åˆ¶é¡µé¢åƒç´ ä¿¡æ¯ï¼› 5.æµè§ˆå™¨ä¼šå°†å„å±‚çš„ä¿¡æ¯å‘é€ç»™GPUï¼ŒGPUä¼šå°†å„å±‚åˆæˆï¼ˆcompositeï¼‰ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ è¿™äº”æ­¥é‡Œé¢ï¼Œç¬¬ä¸€æ­¥åˆ°ç¬¬ä¸‰æ­¥éƒ½éžå¸¸å¿«ï¼Œè€—æ—¶çš„æ˜¯ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥ã€‚â€œç”Ÿæˆå¸ƒå±€â€ï¼ˆflowï¼‰å’Œâ€ç»˜åˆ¶â€ï¼ˆpaintï¼‰è¿™ä¸¤æ­¥ï¼Œåˆç§°ä¸ºâ€æ¸²æŸ“â€ï¼ˆrenderï¼‰ã€‚è¯¦ç»†çš„æ­¥éª¤å·²ç»ç•¥åŽ»ï¼Œæ¸²æŸ“å®Œæ¯•åŽå°±æ˜¯loadäº‹ä»¶ï¼Œä¹‹åŽå°±æ˜¯è‡ªå·±çš„JSé€»è¾‘å¤„ç†äº†ã€‚æä¸€ä¸‹è¿™å…¶ä¸­éœ€è¦æ³¨æ„çš„ä¸€äº›ç»†èŠ‚ã€‚é‡ç»˜ä¸Žé‡æŽ’ç½‘é¡µç”Ÿæˆçš„æ—¶å€™ï¼Œè‡³å°‘ä¼šæ¸²æŸ“ä¸€æ¬¡ã€‚ç”¨æˆ·è®¿é—®çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šä¸æ–­æ¸²æŸ“ã€‚ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼Œä¼šå¯¼è‡´ç½‘é¡µé‡æ–°æ¸²æŸ“ï¼š ä¿®æ”¹DOM ä¿®æ”¹æ ·å¼è¡¨ ç”¨æˆ·äº‹ä»¶ï¼ˆé¼ æ ‡æ‚¬åœï¼Œé¡µé¢æ»šåŠ¨ï¼Œè¾“å…¥æ¡†é”®å…¥æ–‡å­—ï¼Œæ”¹å˜çª—å£å¤§å°ç­‰ç­‰ï¼‰ é‡æ–°æ¸²æŸ“ï¼Œå°±éœ€è¦é‡æ–°ç”Ÿæˆå¸ƒå±€å’Œé‡æ–°ç»˜åˆ¶ï¼Œå‰è€…å«â€˜é‡æŽ’ï¼ˆreflowï¼‰â€™ï¼ŒåŽè€…å«â€˜é‡ç»˜ï¼ˆrepaintï¼‰â€™ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œâ€˜é‡ç»˜â€™ä¸ä¸€å®šéœ€è¦â€˜é‡æŽ’â€™ï¼Œæ¯”å¦‚æ”¹å˜æŸä¸ªç½‘é¡µå…ƒç´ çš„é¢œè‰²ï¼Œå°±åªä¼šè§¦å‘â€˜é‡ç»˜â€™ï¼Œä¸ä¼šè§¦å‘â€˜é‡æŽ’â€™ï¼Œå› ä¸ºå¸ƒå±€æ²¡æœ‰æ”¹å˜ã€‚ä½†æ˜¯ï¼Œ**â€˜é‡æŽ’â€™å¿…ç„¶å¯¼è‡´â€˜é‡ç»˜â€™ï¼Œæ¯”å¦‚æ”¹å˜ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œå°±ä¼šåŒæ—¶è§¦å‘â€˜é‡æŽ’â€™å’Œâ€˜é‡ç»˜â€™ï¼Œå› ä¸ºå¸ƒå±€æ”¹å˜äº†ã€‚ å…³äºŽæ€§èƒ½ä¼˜åŒ–ï¼ˆåŽç»­è¡¥å……ï¼‰ loadäº‹ä»¶ä¸ŽDOMContentLoadedäº‹ä»¶çš„å…ˆåŽæ¸²æŸ“å®Œæ¯•åŽä¼šè§¦å‘loadäº‹ä»¶ï¼Œé‚£ä¹ˆï¼Œloadäº‹ä»¶ä¸ŽDOMCotentLoadedäº‹ä»¶çš„å…ˆåŽä¹ˆï¼Ÿå®ƒä»¬çš„å®šä¹‰å¦‚ä¸‹ï¼š å½“DOMContentLoadedäº‹ä»¶è§¦å‘æ—¶ï¼Œä»…å½“DOMåŠ è½½å®Œæˆï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡ã€‚ï¼ˆæ¯”å¦‚å¦‚æžœæœ‰asyncåŠ è½½çš„è„šæœ¬å°±ä¸ä¸€å®šå®Œæˆï¼‰ å½“onloadäº‹ä»¶è§¦å‘æ—¶ï¼Œé¡µé¢ä¸Šçš„æ‰€æœ‰DOMï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼Œå›¾ç‰‡éƒ½å·²ç»åŠ è½½å®Œæˆäº†ã€‚ æ‰€ä»¥ï¼Œä¸¤è€…çš„é¡ºåºæ˜¯ï¼šDOMContentLoaded -&gt; load CSSåŠ è½½æ˜¯å¦ä¼šé˜»å¡žDOMæ ‘æ¸²æŸ“ï¼Ÿè¯´ä¸‹å¤´éƒ¨å¼•å…¥CSSæ ·å¼çš„æƒ…å†µé¦–å…ˆï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼šCSSæ˜¯ç”±å•ç‹¬çš„ä¸‹è½½çº¿ç¨‹å¼‚æ­¥ä¸‹è½½çš„ã€‚ç„¶åŽï¼Œå†è¯´ä»¥ä¸‹å‡ ä¸ªçŽ°è±¡ï¼š CSSåŠ è½½ä¸ä¼šé˜»å¡žDOMæ ‘è§£æžï¼ˆå¼‚æ­¥åŠ è½½æ—¶DOMç…§å¸¸æž„å»ºï¼‰ ä½†ä¼šé˜»å¡žrenderæ ‘æ¸²æŸ“ï¼ˆæ¸²æŸ“æ—¶ç­‰å¾…cssåŠ è½½å®Œæ¯•ï¼Œå› ä¸ºrenderæ ‘éœ€è¦CSSä¿¡æ¯ï¼‰ è¿™å¯èƒ½ä¹Ÿæ˜¯æµè§ˆå™¨çš„ä¸€ç§ä¼˜åŒ–æœºåˆ¶ã€‚ å½“ä½ åŠ è½½cssçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šä¿®æ”¹ä¸‹é¢DOMèŠ‚ç‚¹çš„æ ·å¼ï¼Œå¦‚æžœCSSåŠ è½½ä¸é˜»å¡žrenderæ ‘æ¸²æŸ“çš„è¯ï¼Œé‚£ä¹ˆå½“cssåŠ è½½å®Œæˆä¹‹åŽï¼Œrenderæ ‘å¯èƒ½åˆå¾—é‡æ–°é‡ç»˜æˆ–è€…å›žæµäº†ã€‚è¿™æ ·å°±é€ æˆäº†ä¸€äº›ä¸å¿…è¦çš„æŸè€—ã€‚æ‰€æœ‰å¹²è„†å°±å…ˆæŠŠDOMæ ‘çš„ç»“æž„å…ˆè§£æžå®Œï¼ŒæŠŠå¯ä»¥åšçš„å·¥ä½œåšå®Œï¼Œç„¶åŽç­‰ä½ cssåŠ è½½å®Œæˆä¹‹åŽï¼Œå†æ ¹æ®æœ€ç»ˆçš„æ ·å¼æ¥æ¸²æŸ“renderæ ‘ï¼Œè¿™ç§åšæ³•æ€§èƒ½æ–¹é¢ä¼šæ¯”è¾ƒå¥½ä¸€ç‚¹ã€‚ æ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚æ¸²æŸ“æ­¥éª¤ä¸­æåˆ°äº†compositeæ¦‚å¿µã€‚å¯ä»¥ç®€å•çš„è¿™æ ·ç†è§£ï¼Œæµè§ˆå™¨æ¸²æŸ“çš„å›¾å±‚ä¸€èˆ¬åŒ…å«ä¸¤å¤§ç±»ï¼šæ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚ã€‚ é¦–å…ˆï¼Œæ™®é€šæ–‡æ¡£æµå†…å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¤åˆå›¾å±‚ï¼ˆè¿™é‡Œç§°ä¸ºé»˜è®¤ç¬¦åˆå±‚ï¼Œé‡Œé¢ä¸ç®¡æ·»åŠ å¤šå°‘å…ƒç´ ï¼Œå…¶å®žéƒ½æ˜¯åœ¨ä¸€ä¸ªå¤åˆå›¾å±‚ä¸­ï¼‰ å…¶æ¬¡ï¼Œabsoluteå¸ƒå±€ï¼ˆfixedä¹Ÿä¸€æ ·ï¼‰ï¼Œè™½ç„¶å¯ä»¥è„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œä½†å®ƒä»å±žäºŽé»˜è®¤å¤åˆå›¾å±‚ã€‚ ç„¶åŽï¼Œå¯ä»¥é€šè¿‡ç¡¬ä»¶åŠ é€Ÿçš„æ–¹å¼ï¼Œå£°æ˜Žä¸€ä¸ªæ–°çš„å¤åˆå›¾å±‚ï¼Œä»–ä¼šå•ç‹¬åˆ†é…èµ„æºï¼ˆå½“ç„¶ä¹Ÿä¼šè„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œè¿™æ ·ä¸€ä¸ªï¼Œä¸ç®¡è¿™ä¸ªå¤åˆå›¾å±‚ä¸­æ€Žä¹ˆå˜åŒ–ï¼Œä¹Ÿä¸ä¼šå½±å“é»˜è®¤å¤åˆå±‚çš„å›žæµé‡ç»˜ï¼‰ å¯ä»¥ç®€å•ç†è§£ä¸‹ï¼šGPUä¸­ï¼Œå„ä¸ªå¤åˆå›¾å±‚æ˜¯å•ç‹¬ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥äº’ä¸å½±å“ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŸäº›åœºæ™¯ç¡¬ä»¶åŠ é€Ÿæ•ˆæžœä¸€çº§æ£’ã€‚ å¯ä»¥åœ¨Chromeæºç è°ƒè¯• -&gt; More Tools -&gt; Rendering -&gt; Layer bordersä¸­çœ‹åˆ°ï¼Œé»„è‰²çš„å°±æ˜¯å¤åˆå›¾å±‚ä¿¡æ¯ã€‚ å¦‚ä½•å˜æˆå¤åˆå›¾å±‚ï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰å°†è¯¥å…ƒç´ ç¼–ç¨‹ä¸€ä¸ªå¤åˆå›¾å±‚ï¼Œå°±æ˜¯ä¼ è¯´ä¸­çš„ç¡¬ä»¶åŠ é€ŸæŠ€æœ¯ã€‚ æœ€å¸¸ç”¨çš„æ–¹å¼ï¼štranslated3dã€translateZ opacityå±žæ€§/è¿‡æ¸¡åŠ¨ç”»ï¼ˆéœ€è¦åŠ¨ç”»æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ‰ä¼šåˆ›å»ºåˆæˆå±‚ï¼ŒåŠ¨ç”»æ²¡æœ‰å¼€å§‹æˆ–ç»“æŸåŽå…ƒç´ è¿˜ä¼šå›žåˆ°ä¹‹å‰çš„çŠ¶æ€ï¼‰ will-changeå±žæ€§ï¼ˆè¿™ä¸ªæ¯”è¾ƒååƒ»ï¼‰ï¼Œä¸€èˆ¬é…åˆopacityä¸Žtranslateä½¿ç”¨ï¼ˆè€Œä¸”ç»æµ‹è¯•ï¼Œé™¤äº†ä¸Šè¿°å¯ä»¥å¼•å‘ç¡¬ä»¶åŠ é€Ÿçš„å±žæ€§å¤–ï¼Œå…¶ä»–å±žæ€§å¹¶ä¸ä¼šå˜æˆå¤åˆå±‚ï¼‰ ä½œç”¨æ˜¯æå‰å‘Šè¯‰æµè§ˆå™¨è¦å˜åŒ–ï¼Œè¿™æ ·æµè§ˆå™¨ä¼šå¼€å§‹åšä¸€äº›ä¼˜åŒ–å·¥ä½œï¼ˆè¿™ä¸ªæœ€å¥½ç”¨å®ŒåŽå°±é‡Šæ”¾ï¼‰ &#60;video&#62;&#60;iframe&#62;&#60;webgl&#62;ç­‰å…ƒç´  å…¶ä»–ï¼Œæ¯”å¦‚ä»¥å‰çš„falshæ’ä»¶ absoluteå’Œç¡¬ä»¶åŠ é€Ÿçš„åŒºåˆ«å¯ä»¥çœ‹åˆ°ï¼Œabsoluteè™½ç„¶å¯ä»¥è„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œä½†æ˜¯æ— æ³•è„±ç¦»é»˜è®¤å¤åˆå±‚ã€‚æ‰€ä»¥ï¼Œå°±ç®—absoluteä¸­ä¿¡æ¯æ”¹å˜æ—¶ä¸ä¼šæ”¹å˜æ™®é€šæ–‡æ¡£æµä¸­renderæ ‘ã€‚ä½†æ˜¯ï¼Œæµè§ˆå™¨æœ€ç»ˆç»˜åˆ¶æ—¶ï¼Œæ˜¯æ•´ä¸ªå¤åˆå±‚ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥absoluteä¸­ä¿¡æ¯çš„æ”¹å˜ï¼Œä»ç„¶ä¼šå½±å“æ•´ä¸ªå¤åˆå±‚çš„ç»˜åˆ¶ã€‚ï¼ˆæµè§ˆå™¨ä¼šé‡ç»˜å®ƒï¼Œå¦‚æžœå¤åˆå±‚ä¸­å†…å®¹å¤šï¼Œabsoluteå¸¦æ¥çš„ç»˜åˆ¶ä¿¡æ¯å˜åŒ–è¿‡å¤§ï¼Œèµ„æºæ¶ˆè€—æ˜¯éžå¸¸ä¸¥é‡çš„ï¼‰è€Œç¡¬ä»¶åŠ é€Ÿç›´æŽ¥å°±æ˜¯å¦ä¸€ä¸ªå¤åˆå±‚äº†ï¼Œï¼ˆå¦èµ·ç‚‰ç¶ï¼‰æ‰€ä»¥å®ƒçš„ä¿¡æ¯æ”¹å˜ä¸ä¼šå½±å“é»˜è®¤å¤åˆå±‚ï¼ˆå†…éƒ¨è‚¯å®šä¼šå½±å“å±žäºŽè‡ªå·±çš„å¤åˆå±‚ï¼‰ï¼Œä»…ä»…å¼•å‘æœ€åŽçš„åˆæˆã€‚ï¼ˆè¾“å‡ºè§†å›¾ï¼‰ å¤åˆå›¾å±‚çš„ä½œç”¨ï¼Ÿä¸€èˆ¬ä¸€ä¸ªå…ƒç´ å¼€å¯ç¡¬ä»¶åŠ é€ŸåŽä¼šå˜æˆå¤åˆå›¾å±‚ï¼Œå¯ä»¥ç‹¬ç«‹äºŽæ™®é€šæ–‡æ¡£æµä¸­ï¼Œæ”¹åŠ¨åŽå¯ä»¥é¿å…æ•´ä¸ªé¡µé¢é‡ç»˜ï¼Œæå‡æ€§èƒ½ã€‚ä½†æ˜¯å°½é‡ä¸è¦å¤§é‡ä½¿ç”¨å¤åˆå›¾å±‚ï¼Œå¦åˆ™ç”±äºŽèµ„æºæ¶ˆè€—è¿‡åº¦ï¼Œé¡µé¢åè€Œä¼šå˜å¾—æ›´å¡ã€‚ ç¡¬ä»¶åŠ é€Ÿæ—¶è¯·ä½¿ç”¨z-indexä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿæ—¶ï¼Œè¯·å°½é‡å¯èƒ½çš„ä½¿ç”¨z-indexï¼Œé˜²æ­¢æµè§ˆå™¨é»˜è®¤ç»™åŽç»­çš„å…ƒç´ åˆ›å»ºå¤åˆå±‚æ¸²æŸ“ã€‚ å…·ä½“åŽŸç†ï¼šwekit CSS3ä¸­ï¼Œå¦‚æžœè¿™ä¸ªå…ƒç´ æ·»åŠ äº†ç¡¬ä»¶åŠ é€Ÿï¼Œå¹¶ä¸”z-indexå±‚çº§è¿‡ä½Žï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªå…ƒç´ åŽé¢çš„å…¶ä»–å…ƒç´ ï¼ˆå±‚çº§æ¯”è¿™ä¸ªå…ƒç´ é«˜ï¼Œæˆ–è€…ç›¸åŒçš„ï¼Œå¹¶ä¸”releativeæˆ–absoluteå±žæ€§ç›¸åŒçš„ï¼‰ï¼Œä¼šé»˜è®¤å˜ä¸ºå¤åˆå±‚æ¸²æŸ“ï¼Œå¦‚æžœå¤„ç†ä¸å½“ä¼šæžå¤§çš„å½±å“æ€§èƒ½ã€‚ ç®€å•ç‚¹ç†è§£ï¼Œå…¶å®žå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªéšå¼åˆæˆçš„æ¦‚å¿µï¼šå¦‚æžœaæ˜¯ä¸€ä¸ªå¤åˆå›¾å±‚ï¼Œè€Œä¸”båœ¨aä¸Šé¢ï¼Œé‚£ä¹ˆbä¹Ÿä¼šè¢«éšå¼è½¬åŒ–ä¸ºä¸€ä¸ªå¤åˆå›¾å±‚ã€‚ å…·ä½“åˆ†æžå¯å‚è€ƒè¿™ä¸ªè¿žæŽ¥ http://web.jobbole.com/83575/ ä»ŽEvent Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶ä¸‹é¢å¯¹JSå¼•æ“Žçš„ä¸€äº›è¿è¡Œæœºåˆ¶è¿›è¡Œåˆ†æžã€‚ æ³¨æ„ï¼Œè¿™é‡Œä¸è°ˆå¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒVOï¼Œscop chainç­‰æ¦‚å¿µï¼Œè¿™é‡Œä¸»è¦ç»“åˆEvent Loopæ¥è°ˆJSä»£ç æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚ è¯»åˆ°è¿™é‡Œä¹‹å‰å·²ç»äº†è§£åˆ°äº†JSå¼•æ“Žæ˜¯å•çº¿ç¨‹çš„ï¼Œè€Œä¸”è¿™é‡Œä¼šç”¨åˆ°ä¸Šæ–‡ä¸­çš„å‡ ä¸ªæ¦‚å¿µï¼š JSå¼•æ“Žçº¿ç¨‹ äº‹ä»¶è§¦å‘çº¿ç¨‹ å®šæ—¶å™¨çº¿ç¨‹ ç„¶åŽåœ¨ç†è§£ä¸€äº›æ¦‚å¿µï¼š JSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ åŒæ­¥ä»»åŠ¡éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œäº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ç€ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œåªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æžœï¼Œå°±åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚ ä¸€æ—¦æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆæ­¤æ—¶JSå¼•æ“Žç©ºé—²ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°å¯æ‰§è¡Œæ ˆä¸­ï¼Œå¼€å§‹æ‰§è¡Œã€‚ çœ‹åˆ°è¿™é‡Œï¼Œåº”è¯¥å°±å¯ä»¥ç†è§£äº†ï¼šä¸ºä»€ä¹ˆæœ‰æ—¶å€™setTimeoutæŽ¨å…¥çš„äº‹ä»¶ä¸èƒ½å‡†æ—¶æ‰§è¡Œï¼Ÿå› ä¸ºå¯èƒ½åœ¨å®ƒæŽ¨å…¥åˆ°äº‹ä»¶åˆ—è¡¨æ—¶ï¼Œä¸»çº¿ç¨‹è¿˜ä¸ç©ºé—²ï¼Œæ­£åœ¨æ‰§è¡Œå…¶ä»–ä»£ç ã€‚ äº‹ä»¶å¾ªçŽ¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……å€ŸåŠ©ä¸€å¼ å›¾æ¥ååŠ©ç†è§£ï¼šä¸Šå›¾å¤§è‡´æè¿°æ˜¯ï¼š ä¸»çº¿ç¨‹è¿è¡Œæ—¶ä¼šäº§ç”Ÿæ‰§è¡Œæ ˆã€‚ æ ˆä¸­çš„ä»£ç è°ƒç”¨æŸäº›APIæ—¶ï¼Œä»–ä»¬ä¼šåœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ å„ç§äº‹ä»¶ï¼ˆå½“æ»¡è¶³è§¦å‘æ¡ä»¶åŽï¼Œå¦‚ajaxè¯·æ±‚å®Œæ¯•ï¼‰ è€Œæ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šè¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ï¼ŒåŽ»æ‰§è¡Œé‚£äº›å›žè°ƒ å¦‚æ­¤å¾ªçŽ¯ æ³¨æ„ï¼Œæ€»æ˜¯è¦ç­‰å¾…æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åŽæ‰ä¼šåŽ»è¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ å•ç‹¬è¯´è¯´å®šæ—¶å™¨ä¸Šè¿°äº‹ä»¶å¾ªçŽ¯æœºåˆ¶çš„æ ¸å¿ƒæ˜¯ï¼šJSå¼•æ“Žçº¿ç¨‹å’Œäº‹ä»¶è§¦å‘çº¿ç¨‹ä½†äº‹å®žä¸Šï¼Œè¿˜æœ‰ä¸€äº›éšè—çš„ç»†èŠ‚ï¼Œæ¯”å¦‚è°ƒç”¨setTimeoutåŽï¼Œæ˜¯å¦‚ä½•ç­‰å¾…ç‰¹å®šæ—¶é—´åŽæ‰æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ï¼Ÿæ˜¯JSå¼•æ“Žæ£€æµ‹çš„ä¹ˆï¼Ÿå½“ç„¶ä¸æ˜¯äº†ã€‚å®ƒæ˜¯ç”±å®šæ—¶å™¨çº¿ç¨‹æŽ§åˆ¶çš„ã€‚ä¸ºä»€ä¹ˆè¦å•ç‹¬çš„å®šæ—¶å™¨çº¿ç¨‹ï¼Ÿå› ä¸ºjavascriptå¼•æ“Žæ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æžœå¤„äºŽé˜»å¡žçº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®¡æ—¶çš„å‡†ç¡®æ€§ï¼Œå› æ­¤å¾ˆæœ‰å¿…è¦å•ç‹¬å¼€ä¸€ä¸ªçº¿ç¨‹ç”¨æ¥è®¡æ—¶ã€‚ ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°å®šæ—¶å™¨çº¿ç¨‹ï¼Ÿå½“ä½¿ç”¨setTimeoutæˆ–setIntervalæ—¶ï¼Œå®ƒéœ€è¦å®šæ—¶å™¨çº¿ç¨‹è®¡æ—¶ï¼Œè®¡æ—¶å®ŒæˆåŽå°±ä¼šå°†ç‰¹å®šçš„äº‹ä»¶æŽ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚ æ¯”å¦‚ï¼š123setTimeout(function()&#123; console.log('11');&#125;,1000) è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å½“1000æ¯«ç§’è®¡æ—¶å®Œæ¯•åŽï¼ˆç”±å®šæ—¶å™¨çº¿ç¨‹è®¡æ—¶ï¼‰ï¼Œå°†å›žè°ƒå‡½æ•°æŽ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ 12345setTimeout(function()&#123; console.log('hello!');&#125;, 0);console.log('begin'); è¿™æ®µä»£ç çš„æ•ˆæžœæ˜¯æœ€å¿«æ—¶é—´å†…å°†å›žæŽ‰å‡½æ•°æŽ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ æ³¨æ„ï¼š æ‰§è¡Œç»“æžœæ˜¯ï¼šå…ˆbeginåŽhello! è™½ç„¶ä»£ç çš„æœ¬æ„æ˜¯0æ¯«ç§’åŽæŽ¨å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œä½†æ˜¯W3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè¦æ±‚setTimeoutä¸­ä½ŽäºŽ4msçš„æ—¶é—´é—´éš”ç®—ä¸º4msã€‚ ï¼ˆä¸è¿‡ä¹Ÿæœ‰ä¸€è¯´æ˜¯ä¸åŒæµè§ˆå™¨æœ‰ä¸åŒçš„æœ€å°æ—¶é—´è®¾å®šï¼‰ å°±ç®—ä¸ç­‰å¾…4msï¼Œå°±ç®—å‡è®¾0æ¯«ç§’å°±æŽ¨å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œä¹Ÿä¼šå…ˆæ‰§è¡Œbegin(å› ä¸ºåªæœ‰å¯æ‰§è¡Œæ ˆç©ºäº†åŽæ‰ä¼šä¸»åŠ¨è¯»å–äº‹ä»¶é˜Ÿåˆ—) setTimeoutè€Œä¸æ˜¯setIntervalç”¨setTimeoutæ¨¡æ‹Ÿå®šæ—¶å™¨æ—¶å’Œç›´æŽ¥ç”¨setIntervalæ˜¯æœ‰åŒºåˆ«çš„ã€‚å› ä¸ºæ¯æ¬¡setTimeoutè®¡æ—¶åˆ°åŽå°±å›žåŽ»æ‰§è¡Œï¼Œç„¶åŽæ‰§è¡Œä¸€æ®µæ—¶é—´åŽæ‰ä¼šç»§ç»­setTimeout,ä¸­é—´å°±å¤šäº†è¯¯å·®ï¼ˆè¯¯å·®ä¸Žä»£ç æ‰§è¡Œæ—¶é—´æœ‰å…³ï¼‰è€ŒsetIntervalåˆ™æ˜¯æ¯æ¬¡éƒ½ç²¾ç¡®çš„é—´éš”ä¸€ä¸ªæ—¶é—´æŽ¨å…¥ä¸€ä¸ªäº‹ä»¶ã€‚ï¼ˆä½†æ˜¯ï¼Œäº‹ä»¶çš„å®žé™…æ‰§è¡Œæ—¶é—´ä¸ä¸€å®šå°±å‡†ç¡®ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯è¿™ä¸ªäº‹ä»¶è¿˜æ²¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªäº‹ä»¶å°±æ¥äº†ï¼‰ è€Œä¸”setIntervalæœ‰ä¸€äº›æ¯”è¾ƒè‡´å‘½çš„é—®é¢˜å°±æ˜¯ï¼š ç´¯è®¡æ•ˆåº”ï¼ˆä¸Šé¢æåˆ°çš„ï¼‰ï¼Œå¦‚æžœsetIntervalä»£ç å†æ¬¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¹‹å‰è¿˜æ²¡æœ‰å®Œæˆæ‰§è¡Œï¼Œå°±ä¼šå¯¼è‡´å®šæ—¶å™¨ä»£ç è¿žç»­è¿è¡Œå¥½å‡ æ¬¡ï¼Œè€Œä¹‹é—´æ²¡æœ‰é—´éš”ã€‚å°±ç®—æ­£å¸¸é—´éš”æ‰§è¡Œï¼Œå¤šä¸ªsetIntervalçš„ä»£ç æ‰§è¡Œæ—¶é—´å¯èƒ½ä¼šæ¯”é¢„æœŸå°ï¼ˆå› ä¸ºä»£ç æ‰§è¡Œéœ€è¦ä¸€æ®µæ—¶é—´ï¼‰ è€Œä¸”æŠŠæµè§ˆå™¨æœ€å°åŒ–æ˜¾ç¤ºç­‰æ“ä½œæ—¶ï¼ŒsetIntervalå¹¶ä¸æ˜¯æ‰§è¡Œç¨‹åºï¼Œå®ƒä¼šæŠŠsetIntervalçš„å›žè°ƒå‡½æ•°æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œç­‰æµè§ˆå™¨çª—å£å†æ¬¡æ‰“å¼€æ—¶ï¼Œä¸€çž¬é—´å…¨éƒ¨æ‰§è¡Œã€‚ æ‰€ä»¥ï¼Œé‰´äºŽè¿™ä¹ˆå¤šçš„é—®é¢˜ï¼Œç›®å‰ä¸€èˆ¬è®¤ä¸ºæœ€ä½³çš„è§£å†³æ–¹æ¡ˆä¸ºï¼šç”¨setTimeoutæ¨¡æ‹ŸsetIntervalï¼Œæˆ–è€…ç‰¹æ®Šåœºåˆç›´æŽ¥ç”¨requestAnimationFrame è¡¥å……ï¼šJSé«˜ç¨‹ä¸­æœ‰æåˆ°ï¼ŒJSå¼•æ“Žä¼šå¯¹setIntervalè¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æžœå½“å‰äº‹ä»¶é˜Ÿåˆ—ä¸­æœ‰setIntervalçš„å›žè°ƒï¼Œä¸ä¼šé‡å¤æ·»åŠ ï¼Œä¸è¿‡ï¼Œä»ç„¶æœ‰å¾ˆå¤šçš„é—®é¢˜ã€‚ äº‹ä»¶å¾ªçŽ¯è¿›é˜¶ï¼šmacrotaskå’Œmicrotaskå…ˆçœ‹ä¸‹ä¸‹é¢çš„è¿™é“é¢˜ï¼š12345678910111213console.log('script start');setTimeout(function() &#123; console.log('setTimeout');&#125;, 0);Promise.resolve().then(function() &#123; console.log('promise1');&#125;).then(function() &#123; console.log('promise2');&#125;);console.log('script end'); å®ƒçš„æ­£ç¡®æ‰§è¡Œé¡ºåºæ˜¯ï¼š12345script startscript endpromise1promise2setTimeout Promiseé‡Œæœ‰ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šmicrotaskæˆ–è€…ï¼Œè¿›ä¸€æ­¥ï¼ŒJSä¸­åˆ†ä¸ºä¸¤ç§ä»»åŠ¡ç±»åž‹ï¼šmacrotashå’Œmicrotaskï¼Œåœ¨ECMAä¸­ï¼Œmicrotaskç§°ä¸ºjobs,macrotaskå¯ç§°ä¸ºtaskã€‚ å®ƒä»¬çš„å®šä¹‰è·ŸåŒºåˆ«ç®€å•ç‚¹å¯ä»¥æŒ‰å¦‚ä¸‹ç†è§£ï¼š mactask(åˆç§°ä¸ºå®ä»»åŠ¡)ï¼Œå¯ä»¥ç†è§£æ˜¯æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ¯æ¬¡ä»Žäº‹ä»¶é˜Ÿåˆ—ä¸­èŽ·å–ä¸€ä¸ªäº‹ä»¶å›žè°ƒå¹¶æ”¾åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼‰ æ¯ä¸€ä¸ªtaskä»Žå¤´åˆ°å°¾å°†è¿™ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸ä¼šæ‰§è¡Œå…¶ä»–çš„ æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾—JSå†…éƒ¨taskä¸ŽDOMä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ªtaskæ‰§è¡Œç»“æŸåŽï¼Œåœ¨ä¸‹ä¸€ä¸ªtaskæ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚ï¼ˆtask -&gt; æ¸²æŸ“ -&gt; task -&gt; â€¦ï¼‰ microtask(åˆç§°ä¸ºå¾®ä»»åŠ¡)ï¼Œå¯ä»¥ç†è§£æ˜¯åœ¨å½“å‰taskæ‰§è¡Œç»“æŸåŽç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“å‰taskä»»åŠ¡åŽï¼Œä¸‹ä¸€ä¸ªtaskä¹‹å‰ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰ã€‚ æ‰€ä»¥å®ƒçš„ç›¸åº”é€Ÿåº¦ç›¸æ¯”setTimeoutï¼ˆsetTimeoutæ˜¯taskï¼‰ä¼šæ›´å¿«ï¼Œå› ä¸ºæ— éœ€ç­‰æ¸²æŸ“ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸€ä¸ªmacrotaskæ‰§è¡Œå®Œæ¯•ä¹‹åŽï¼Œå°†ä¼šåœ¨å®ƒæ‰§è¡ŒæœŸé—´äº§ç”Ÿçš„æ‰€æœ‰microtaskéƒ½æ‰§è¡Œå®Œæ¯•ï¼ˆåœ¨æ¸²æŸ“å‰ï¼‰ åˆ†åˆ«ä»€ä¹ˆæ ·çš„åœºæ™¯ä¼šå½¢æˆmacrotaskå’Œmicrotaskå‘¢ï¼Ÿ macrotaskï¼šä¸»ä»£ç å—ï¼ŒsetTimeout,setIntervalç­‰ï¼ˆå¯ä»¥çœ‹åˆ°ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ¯ä¸€ä¸ªäº‹ä»¶éƒ½æ˜¯ä¸€ä¸ªmacrotaskï¼‰ microtaskï¼šPromiseï¼Œprocess.nextTickç­‰ã€‚ è¡¥å……ï¼šåœ¨nodeçŽ¯å¢ƒä¸‹ï¼Œprocess.nextTickçš„ä¼˜å…ˆçº§é«˜äºŽPromise,ä¹Ÿå°±æ˜¯å¯ä»¥ç®€å•ç†è§£ä¸º:åœ¨å®ä»»åŠ¡ç»“æŸåŽä¼šæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„nextTickQueueéƒ¨åˆ†ï¼Œç„¶åŽæ‰æ‰§è¡Œå¾®ä»»åŠ¡ä¸­çš„Promiseéƒ¨åˆ†ã€‚ å†æ ¹æ®çº¿ç¨‹ç†è§£ä¸‹ï¼š macrotaskä¸­çš„äº‹ä»¶éƒ½æ˜¯æ”¾åœ¨ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—é‡Œçš„ï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—æœ‰äº‹ä»¶è§¦å‘çº¿ç¨‹ç»´æŠ¤ microtaskä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡éƒ½æ˜¯æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆJob Queuesï¼‰ä¸­çš„ï¼Œç­‰å¾…å½“å‰macrotaskæ‰§è¡Œå®Œæ¯•åŽæ‰§è¡Œï¼Œè¿™ä¸ªé˜Ÿåˆ—ç”±JSå¼•æ“Žçº¿ç¨‹ç»´æŠ¤ï¼Œ æ‰€ä»¥ï¼Œæ€»ç»“ä¸‹è¿è¡Œè§„åˆ™ï¼š æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»Žäº‹ä»¶é˜Ÿåˆ—ä¸­èŽ·å–ï¼‰ æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æžœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åŽï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰ å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶åŽGUIçº¿ç¨‹æŽ¥ç®¡æ¸²æŸ“ æ¸²æŸ“å®Œæ¯•åŽï¼ŒJSçº¿ç¨‹ç»§ç»­æŽ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»Žäº‹ä»¶é˜Ÿåˆ—ä¸­èŽ·å–ï¼‰ å¦‚å›¾ï¼š å¦å¤–ï¼Œè¯·æ³¨æ„ä¸‹Promiseçš„polyfillä¸Žå®˜æ–¹ç‰ˆæœ¬çš„åŒºåˆ«ï¼š å®˜æ–¹ç‰ˆæœ¬ä¸­ï¼Œæ˜¯æ ‡å‡†çš„microtaskå½¢å¼ã€‚ polyfill,ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡setTimeoutæ¨¡æ‹Ÿçš„ï¼Œæ‰€ä»¥æ˜¯macrotaskå½¢å¼ è¯·ç‰¹åˆ«æ³¨æ„ä¸¤è€…çš„åŒºåˆ«ã€‚ æ³¨æ„ï¼Œæœ‰äº›æµè§ˆå™¨æ‰§è¡Œç»“æžœä¸ä¸€æ ·ï¼Œï¼ˆå› ä¸ºä»–ä»¬å¯èƒ½å§microtaskå½“æˆmacrotaskæ¥æ‰§è¡Œäº†ï¼‰ï¼Œä½†æ˜¯ä¸ºäº†ç®€å•ï¼Œè¿™é‡Œä¸æè¿°ä¸€äº›ä¸æ ‡å‡†æµè§ˆå™¨ä¸‹çš„åœºæ™¯ã€‚ è¡¥å……ï¼šä½¿ç”¨MutationObserverå®žçŽ°microtask MutationObserverå¯ä»¥ç”¨æ¥å®žçŽ°microtaskï¼ˆå®ƒå±žäºŽmocrotaskï¼Œä¼˜å…ˆçº§å°äºŽPromiseï¼Œä¸€èˆ¬Promiseä¸æ”¯æŒæ—¶æ‰ä¼šè¿™æ ·åšï¼‰ å®ƒæ˜¯Html5ä¸­çš„æ–°ç‰¹æ€§ï¼Œä½œç”¨æ˜¯ï¼šç›‘å¬ä¸€ä¸ªDOMå˜åŠ¨ï¼Œå½“DOMå¯¹è±¡å‘ç”Ÿä»»ä½•å˜åŠ¨æ—¶ï¼ŒMutation Observerä¼šå¾—åˆ°é€šçŸ¥ã€‚VUEæ ¸å¿ƒä»£ç é‡‡ç”¨æ˜¯è¿™ç§ç­–ç•¥ã€‚ 190320è¡¥å……ï¼šNodeä¸Žæµè§ˆå™¨çš„ Event Loop å·®å¼‚æµè§ˆå™¨çŽ¯å¢ƒä¸‹ï¼Œmicrotaskçš„ä»»åŠ¡é˜Ÿåˆ—æ˜¯æ¯ä¸ªmacrotaskæ‰§è¡Œå®Œä¹‹åŽæ‰§è¡Œã€‚è€Œåœ¨Node.jsä¸­ï¼Œmicrotaskä¼šåœ¨äº‹ä»¶å¾ªçŽ¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé˜¶æ®µæ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šåŽ»æ‰§è¡Œmicrotaské˜Ÿåˆ—çš„ä»»åŠ¡ã€‚ æŽ¥ä¸‹æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜Žä¸¤è€…åŒºåˆ«ï¼š123456789101112setTimeout(()=&gt;&#123; console.log('timer1') Promise.resolve().then(function() &#123; console.log('promise1') &#125;)&#125;, 0)setTimeout(()=&gt;&#123; console.log('timer2') Promise.resolve().then(function() &#123; console.log('promise2') &#125;)&#125;, 0) æµè§ˆå™¨ç«¯è¿è¡Œç»“æžœï¼štimer1=&gt;promise1=&gt;timer2=&gt;promise2 æµè§ˆå™¨ç«¯çš„å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š Nodeç«¯è¿è¡Œç»“æžœåˆ†ä¸¤ç§æƒ…å†µï¼š å¦‚æžœæ˜¯node11ç‰ˆæœ¬ä¸€æ—¦æ‰§è¡Œä¸€ä¸ªé˜¶æ®µé‡Œçš„ä¸€ä¸ªå®ä»»åŠ¡(setTimeout,setIntervalå’ŒsetImmediate)å°±ç«‹åˆ»æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™å°±è·Ÿæµè§ˆå™¨ç«¯è¿è¡Œä¸€è‡´ï¼Œæœ€åŽçš„ç»“æžœä¸ºtimer1=&gt;promise1=&gt;timer2=&gt;promise2 å¦‚æžœæ˜¯node10åŠå…¶ä¹‹å‰ç‰ˆæœ¬ï¼šè¦çœ‹ç¬¬ä¸€ä¸ªå®šæ—¶å™¨æ‰§è¡Œå®Œï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨æ˜¯å¦åœ¨å®Œæˆé˜Ÿåˆ—ä¸­ã€‚ å¦‚æžœæ˜¯ç¬¬äºŒä¸ªå®šæ—¶å™¨è¿˜æœªåœ¨å®Œæˆé˜Ÿåˆ—ä¸­ï¼Œæœ€åŽçš„ç»“æžœä¸ºtimer1=&gt;promise1=&gt;timer2=&gt;promise2 å¦‚æžœæ˜¯ç¬¬äºŒä¸ªå®šæ—¶å™¨å·²ç»åœ¨å®Œæˆé˜Ÿåˆ—ä¸­ï¼Œåˆ™æœ€åŽçš„ç»“æžœä¸ºtimer1=&gt;timer2=&gt;promise1=&gt;promise2(ä¸‹æ–‡è¿‡ç¨‹è§£é‡ŠåŸºäºŽè¿™ç§æƒ…å†µä¸‹) å…¨å±€è„šæœ¬ï¼ˆmain()ï¼‰æ‰§è¡Œï¼Œå°†2ä¸ªtimerä¾æ¬¡æ”¾å…¥timeré˜Ÿåˆ—ï¼Œmain()æ‰§è¡Œå®Œæ¯•ï¼Œè°ƒç”¨æ ˆç©ºé—²ï¼Œä»»åŠ¡é˜Ÿåˆ—å¼€å§‹æ‰§è¡Œï¼› é¦–å…ˆè¿›å…¥timersé˜¶æ®µï¼Œæ‰§è¡Œtimer1çš„å›žè°ƒå‡½æ•°ï¼Œæ‰“å°timer1ï¼Œå¹¶å°†promise1.thenå›žè°ƒæ”¾å…¥microtaské˜Ÿåˆ—ï¼ŒåŒæ ·çš„æ­¥éª¤æ‰§è¡Œtimer2ï¼Œæ‰“å°timer2ï¼› è‡³æ­¤ï¼Œtimeré˜¶æ®µæ‰§è¡Œç»“æŸï¼Œevent loopè¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µä¹‹å‰ï¼Œæ‰§è¡Œmicrotaské˜Ÿåˆ—çš„æ‰€æœ‰ä»»åŠ¡ï¼Œä¾æ¬¡æ‰“å°promise1ã€promise2 Nodeç«¯çš„å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š æ€»ç»“æµè§ˆå™¨å’ŒNode çŽ¯å¢ƒä¸‹ï¼Œmicrotask ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œæ—¶æœºä¸åŒ Nodeç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªçŽ¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œ æµè§ˆå™¨ç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªçŽ¯çš„ macrotask æ‰§è¡Œå®Œä¹‹åŽæ‰§è¡Œ å‚è€ƒé“¾æŽ¥1.ä»Žæµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†2.æµè§ˆå™¨ä¸ŽNodeçš„äº‹ä»¶å¾ªçŽ¯(Event Loop)æœ‰ä½•åŒºåˆ«?]]></content>
      <tags>
        <tag>js</tag>
        <tag>jsç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[node]]></title>
    <url>%2F2019%2F02%2F05%2Fnode%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯NodeJsNodejsç®€ä»‹ ç®€å•çš„è¯´ Node.js å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚ Node.js æ˜¯ä¸€ä¸ªåŸºäºŽ Chrome V8 å¼•æ“Žçš„ JavaScript è¿è¡ŒçŽ¯å¢ƒã€‚ Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éžé˜»å¡žå¼ I/O çš„æ¨¡åž‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚ Nodejsçš„åº”ç”¨åœºæ™¯ç”±äºŽNodejsç›®å‰è¿˜ä¸å¤Ÿæˆç†Ÿï¼Œå› æ­¤ä¸€èˆ¬ä¸ä¼šç”¨ä½œç‹¬ç«‹å¼€å‘ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”å¦‚ä¸‹ ä¸­é—´å±‚é€šå¸¸åœ¨å¼€å‘åº”ç”¨æ—¶ï¼Œå‡ºäºŽå®‰å…¨è€ƒè™‘ï¼ŒåŽç«¯çš„ä¸»æœåŠ¡å™¨éƒ½ä¸ä¼šç›´æŽ¥æš´éœ²ç»™å®¢æˆ·ç«¯ï¼Œä¸¤ç«¯ä¹‹é—´é€šå¸¸éœ€è¦æœ‰ä¸€ä¸ªä¸­é—´å±‚è¿›è¡Œé€šä¿¡ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¦‚æžœä¸­é—´å±‚å‡ºçŽ°é—®é¢˜ï¼Œä¸ä¼šå½±å“åŽç«¯çš„ä¸»æœåŠ¡å™¨ã€‚å¦å¤–ï¼Œä¸­é—´å±‚å¯ä»¥åšç¼“å­˜ï¼Œæˆ–è€…å®žçŽ°ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œèµ·åˆ°é™ä½Žä¸»æœåŠ¡å™¨å¤æ‚åº¦ï¼Œæé«˜æ€§èƒ½çš„ä½œç”¨ã€‚ ä¸­é—´å±‚ä¹Ÿå¯ä»¥åƒCDNä¸€æ ·åœ¨å„å¤„éƒ¨ç½²ï¼Œä»¥æé«˜ç”¨æˆ·çš„è®¿é—®æ•ˆçŽ‡ã€‚ å°åž‹æœåŠ¡å¯ä»¥å®žçŽ°ä¸€äº›å°åž‹åº”ç”¨ï¼Œæˆ–æŸä¸ªåŠŸèƒ½æ¨¡å—ã€‚ å·¥å…·ç±»Nodejså¯ä»¥ç”¨æ¥å¼€å‘ä¸€äº›å®žç”¨å·¥å…·ï¼Œå¦‚Webpackã€Gulpç­‰ç­‰ã€‚ Nodejsçš„ä¼˜åŠ¿ Nodejsçš„è¯­æ³•ä¸Žå‰å°JavaScriptç›¸åŒï¼Œå› æ­¤ä¾¿äºŽå‰ç«¯å¼€å‘å…¥æ‰‹ æ€§èƒ½é«˜ åˆ©äºŽä¸Žå‰ç«¯ä»£ç ç»“åˆï¼Œä¾‹å¦‚åœ¨åšåŒæ ·ä¸€ä¸ªæ•°æ®æ ¡éªŒæ—¶ï¼Œå‰åŽå°ä»£ç å¯ä»¥å…±ç”¨ï¼Œä¸éœ€è¦å•ç‹¬å¼€å‘ã€‚ ç¼–å†™é«˜æ€§èƒ½ç½‘ç»œæœåŠ¡å™¨çš„Javascriptå·¥å…·åŒ…(ç”¨JSå¼€å‘æœåŠ¡ç«¯ç¨‹åº) å•çº¿ç¨‹ã€å¼‚æ­¥ã€äº‹ä»¶é©±åŠ¨ ç‰¹ç‚¹ï¼šå¿«ï¼Œè€—å†…å­˜å¤š ç½‘ä¸Šä¸€ä¸ªç™¾ä¸‡çº§å¹¶å‘æµ‹è¯•ï¼Œæœªä¼˜åŒ–çš„æƒ…å†µä¸‹1Mçš„é“¾æŽ¥æ¶ˆè€—äº†16Gçš„å†…å­˜]]></content>
      <tags>
        <tag>node</tag>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jså¯¹è±¡æ–¹æ³•æ€»ç»“]]></title>
    <url>%2F2019%2F01%2F12%2Fjs%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[Object.assign()é€šè¿‡å¤åˆ¶ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚Object.create()ä½¿ç”¨æŒ‡å®šçš„åŽŸåž‹å¯¹è±¡å’Œå±žæ€§åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚Object.defineProperty()ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå±žæ€§å¹¶æŒ‡å®šè¯¥å±žæ€§çš„é…ç½®ã€‚Object.defineProperties()ç»™å¯¹è±¡æ·»åŠ å¤šä¸ªå±žæ€§å¹¶åˆ†åˆ«æŒ‡å®šå®ƒä»¬çš„é…ç½®ã€‚Object.entries()è¿”å›žç»™å®šå¯¹è±¡è‡ªèº«å¯æžšä¸¾å±žæ€§çš„[key, value]æ•°ç»„ã€‚Object.freeze()å†»ç»“å¯¹è±¡ï¼šå…¶ä»–ä»£ç ä¸èƒ½åˆ é™¤æˆ–æ›´æ”¹ä»»ä½•å±žæ€§ã€‚Object.getOwnPropertyDescriptor()è¿”å›žå¯¹è±¡æŒ‡å®šçš„å±žæ€§é…ç½®ã€‚Object.getOwnPropertyNames()è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†æŒ‡å®šå¯¹è±¡æ‰€æœ‰çš„å¯æžšä¸¾æˆ–ä¸å¯æžšä¸¾çš„å±žæ€§åã€‚Object.getOwnPropertySymbols()è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†æŒ‡å®šå¯¹è±¡è‡ªèº«æ‰€æœ‰çš„ç¬¦å·å±žæ€§ã€‚Object.getPrototypeOf()è¿”å›žæŒ‡å®šå¯¹è±¡çš„åŽŸåž‹å¯¹è±¡ã€‚Object.is()æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸åŒã€‚æ‰€æœ‰ NaN å€¼éƒ½ç›¸ç­‰ï¼ˆè¿™ä¸Ž==å’Œ===ä¸åŒï¼‰ã€‚Object.isExtensible()åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯æ‰©å±•ã€‚Object.isFrozen()åˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²ç»å†»ç»“ã€‚Object.isSealed()åˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²ç»å¯†å°ã€‚Object.keys()è¿”å›žä¸€ä¸ªåŒ…å«æ‰€æœ‰ç»™å®šå¯¹è±¡è‡ªèº«å¯æžšä¸¾å±žæ€§åç§°çš„æ•°ç»„ã€‚Object.preventExtensions()é˜²æ­¢å¯¹è±¡çš„ä»»ä½•æ‰©å±•ã€‚Object.seal()é˜²æ­¢å…¶ä»–ä»£ç åˆ é™¤å¯¹è±¡çš„å±žæ€§ã€‚Object.setPrototypeOf()è®¾ç½®å¯¹è±¡çš„åŽŸåž‹ï¼ˆå³å†…éƒ¨[[Prototype]]å±žæ€§ï¼‰ã€‚Object.values()è¿”å›žç»™å®šå¯¹è±¡è‡ªèº«å¯æžšä¸¾å€¼çš„æ•°ç»„ã€‚]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>Object</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsæ•°ç»„æ–¹æ³•æ€»ç»“]]></title>
    <url>%2F2018%2F08%2F12%2Fjs%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[æ€»ç»“çš„ä¸€äº›å¸¸ç”¨æ•°ç»„æ–¹æ³•1. join()æ–¹æ³•2. push()å’Œpop()æ–¹æ³•3. shift()å’Œunshift()æ–¹æ³•4. sort()æ–¹æ³•5. reserve()æ–¹æ³•6. concat()æ–¹æ³•7. slice()æ–¹æ³•8. splice()æ–¹æ³•9. indexOf()å’ŒlastIndexOf()æ–¹æ³•10. forEach()æ–¹æ³•11. map()æ–¹æ³•12. filter()æ–¹æ³•13. every()æ–¹æ³•14. some()æ–¹æ³•15. reduce()å’ŒreduceRight()æ–¹æ³•16. ES6å¯¹æ•°ç»„çš„æ‹“å±• 1. joinå°†æ•°ç»„çš„å…ƒç´ ç»„èµ·ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥separatorä¸ºåˆ†éš”ç¬¦ï¼Œçœç•¥çš„è¯åˆ™ç”¨é»˜è®¤ç”¨é€—å·ä¸ºåˆ†éš”ç¬¦ï¼Œè¯¥æ–¹æ³•åªæŽ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼šå³åˆ†éš”ç¬¦ã€‚1234var arr = [1,2,3];console.log(arr.join()); // 1,2,3console.log(arr.join("-")); // 1-2-3console.log(arr); // [1, 2, 3]ï¼ˆåŽŸæ•°ç»„ä¸å˜ï¼‰ join() æ–¹æ³•ï¼Œä¸ä¼šæ”¹å˜æ•°ç»„ï¼è¿”å›žå€¼: ä¸€ä¸ªæ‰€æœ‰æ•°ç»„å…ƒç´ è¿žæŽ¥çš„å­—ç¬¦ä¸²ã€‚å¦‚æžœ arr.length ä¸º0ï¼Œåˆ™è¿”å›žç©ºå­—ç¬¦ä¸² 2. pushå’Œpoppush(): å¯ä»¥æŽ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ï¼ŒæŠŠå®ƒä»¬é€ä¸ªæ·»åŠ åˆ°æ•°ç»„æœ«å°¾ï¼Œå¹¶è¿”å›žä¿®æ”¹åŽæ•°ç»„çš„é•¿åº¦ã€‚pop()ï¼šæ•°ç»„æœ«å°¾ç§»é™¤æœ€åŽä¸€é¡¹ï¼Œå‡å°‘æ•°ç»„çš„ length å€¼ï¼Œç„¶åŽè¿”å›žç§»é™¤çš„é¡¹ã€‚ 1234567var arr = ["Lily","lucy","Tom"];var count = arr.push("Jack","Sean");console.log(count); // 5console.log(arr); // ["Lily", "lucy", "Tom", "Jack", "Sean"]var item = arr.pop();console.log(item); // Seanconsole.log(arr); // ["Lily", "lucy", "Tom", "Jack"] 3. shiftå’Œunshiftshift()ï¼šåˆ é™¤åŽŸæ•°ç»„ç¬¬ä¸€é¡¹ï¼Œå¹¶è¿”å›žåˆ é™¤å…ƒç´ çš„å€¼ï¼›å¦‚æžœæ•°ç»„ä¸ºç©ºåˆ™è¿”å›žundefined ã€‚unshift():å°†å‚æ•°æ·»åŠ åˆ°åŽŸæ•°ç»„å¼€å¤´ï¼Œå¹¶è¿”å›žæ•°ç»„çš„é•¿åº¦ ã€‚ 1234567var arr = ["Lily","lucy","Tom"];var count = arr.unshift("Jack","Sean");console.log(count); // 5console.log(arr); //["Jack", "Sean", "Lily", "lucy", "Tom"]var item = arr.shift();console.log(item); // Jackconsole.log(arr); // ["Sean", "Lily", "lucy", "Tom"] 4. sortsort()ï¼šæŒ‰å‡åºæŽ’åˆ—æ•°ç»„é¡¹â€”â€”å³æœ€å°çš„å€¼ä½äºŽæœ€å‰é¢ï¼Œæœ€å¤§çš„å€¼æŽ’åœ¨æœ€åŽé¢ï¼Œé»˜è®¤æŽ’åºé¡ºåºæ˜¯æ ¹æ®å­—ç¬¦ä¸²Unicodeç ç‚¹ã€‚ å‚æ•°compareFunction | å¯é€‰ç”¨æ¥æŒ‡å®šæŒ‰æŸç§é¡ºåºè¿›è¡ŒæŽ’åˆ—çš„å‡½æ•°ã€‚å¦‚æžœçœç•¥ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„Unicodeä½ç‚¹è¿›è¡ŒæŽ’åºã€‚å¦‚æžœæ²¡æœ‰æŒ‡æ˜Ž compareFunction ï¼Œé‚£ä¹ˆå…ƒç´ ä¼šæŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„è¯¸ä¸ªå­—ç¬¦çš„Unicodeä½ç‚¹è¿›è¡ŒæŽ’åºã€‚ä¾‹å¦‚ â€œBananaâ€ ä¼šè¢«æŽ’åˆ—åˆ° â€œcherryâ€ ä¹‹å‰ã€‚å½“æ•°å­—æŒ‰ç”±å°åˆ°å¤§æŽ’åºæ—¶ï¼Œ9 å‡ºçŽ°åœ¨ 80 ä¹‹å‰ï¼Œä½†å› ä¸ºï¼ˆæ²¡æœ‰æŒ‡æ˜Ž compareFunctionï¼‰ï¼Œæ¯”è¾ƒçš„æ•°å­—ä¼šå…ˆè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨Unicodeé¡ºåºä¸Š â€œ80â€ è¦æ¯” â€œ9â€ è¦é å‰ å¦‚æžœæŒ‡æ˜Žäº† compareFunction ï¼Œé‚£ä¹ˆæ•°ç»„ä¼šæŒ‰ç…§è°ƒç”¨è¯¥å‡½æ•°çš„è¿”å›žå€¼æŽ’åºã€‚å³ a å’Œ b æ˜¯ä¸¤ä¸ªå°†è¦è¢«æ¯”è¾ƒçš„å…ƒç´ ï¼š å¦‚æžœ compareFunction(a, b) å°äºŽ 0 ï¼Œé‚£ä¹ˆ a ä¼šè¢«æŽ’åˆ—åˆ° b ä¹‹å‰ï¼› å¦‚æžœ compareFunction(a, b) ç­‰äºŽ 0 ï¼Œ a å’Œ b çš„ç›¸å¯¹ä½ç½®ä¸å˜ã€‚å¤‡æ³¨ï¼š ECMAScript æ ‡å‡†å¹¶ä¸ä¿è¯è¿™ä¸€è¡Œä¸ºï¼Œè€Œä¸”ä¹Ÿä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šéµå®ˆï¼ˆä¾‹å¦‚ Mozilla åœ¨ 2003 å¹´ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰ï¼› å¦‚æžœ compareFunction(a, b) å¤§äºŽ 0 ï¼Œ b ä¼šè¢«æŽ’åˆ—åˆ° a ä¹‹å‰ã€‚ compareFunction(a, b) å¿…é¡»æ€»æ˜¯å¯¹ç›¸åŒçš„è¾“å…¥è¿”å›žç›¸åŒçš„æ¯”è¾ƒç»“æžœï¼Œå¦åˆ™æŽ’åºçš„ç»“æžœå°†æ˜¯ä¸ç¡®å®šçš„ã€‚ æ¯”è¾ƒå‡½æ•°æ ¼å¼å¦‚ä¸‹ï¼š12345678910function compare(a, b) &#123; if (a &lt; b ) &#123; // æŒ‰æŸç§æŽ’åºæ ‡å‡†è¿›è¡Œæ¯”è¾ƒ, a å°äºŽ b return -1; &#125; if (a &gt; b ) &#123; return 1; &#125; // a must be equal to b return 0;&#125; è¦æ¯”è¾ƒæ•°å­—è€Œéžå­—ç¬¦ä¸²ï¼Œæ¯”è¾ƒå‡½æ•°å¯ä»¥ç®€å•çš„ä»¥ a å‡ bï¼Œå¦‚ä¸‹çš„å‡½æ•°å°†ä¼šå°†æ•°ç»„å‡åºæŽ’åˆ— 123456789101112var numbers = [4, 2, 5, 1, 3];numbers.sort(function(a, b) &#123; return a - b;&#125;);console.log(numbers);ä¹Ÿå¯ä»¥å†™æˆï¼švar numbers = [4, 2, 5, 1, 3]; numbers.sort((a, b) =&gt; a - b); console.log(numbers);// [1, 2, 3, 4, 5] å¯¹è±¡ä¹Ÿå¯æŒ‰ç…§æŸä¸ªå±žæ€§è¿›è¡ŒæŽ’åº è¿”å›žå€¼æŽ’åºåŽçš„æ•°ç»„ã€‚è¯·æ³¨æ„ï¼Œæ•°ç»„å·²åŽŸåœ°æŽ’åºï¼Œå¹¶ä¸”ä¸è¿›è¡Œå¤åˆ¶ã€‚ 5. reservereverse()ï¼šåè½¬æ•°ç»„é¡¹çš„é¡ºåºã€‚ 6. concatconcat(): å°†å‚æ•°æ·»åŠ åˆ°åŽŸæ•°ç»„ä¸­ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå…ˆåˆ›å»ºå½“å‰æ•°ç»„ä¸€ä¸ªå‰¯æœ¬ï¼Œç„¶åŽå°†æŽ¥æ”¶åˆ°çš„å‚æ•°æ·»åŠ åˆ°è¿™ä¸ªå‰¯æœ¬çš„æœ«å°¾ï¼Œæœ€åŽè¿”å›žæ–°æž„å»ºçš„æ•°ç»„ã€‚åœ¨æ²¡æœ‰ç»™ concat()æ–¹æ³•ä¼ é€’å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå®ƒåªæ˜¯å¤åˆ¶å½“å‰æ•°ç»„å¹¶è¿”å›žå‰¯æœ¬ã€‚ å®žçŽ°çš„æ˜¯æ•°ç»„çš„æµ…æ‹·è´ã€‚ 7. sliceslice() æ–¹æ³•è¿”å›žä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡æ˜¯ä¸€ä¸ªç”± beginå’Œ endï¼ˆä¸åŒ…æ‹¬endï¼‰å†³å®šçš„åŽŸæ•°ç»„çš„æµ…æ‹·è´ã€‚åŽŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜ã€‚ å‚æ•°begin | å¯é€‰ ä»Žè¯¥ç´¢å¼•å¤„å¼€å§‹æå–åŽŸæ•°ç»„ä¸­çš„å…ƒç´ ï¼ˆä»Ž0å¼€å§‹ï¼‰ã€‚å¦‚æžœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºä»ŽåŽŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬å‡ ä¸ªå…ƒç´ å¼€å§‹æå–ï¼Œslice(-2)è¡¨ç¤ºæå–åŽŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åŽä¸€ä¸ªå…ƒç´ ï¼ˆåŒ…å«æœ€åŽä¸€ä¸ªå…ƒç´ ï¼‰ã€‚å¦‚æžœçœç•¥ beginï¼Œåˆ™ slice ä»Žç´¢å¼• 0 å¼€å§‹ã€‚ end | å¯é€‰ åœ¨è¯¥ç´¢å¼•å¤„ç»“æŸæå–åŽŸæ•°ç»„å…ƒç´ ï¼ˆä»Ž0å¼€å§‹ï¼‰ã€‚sliceä¼šæå–åŽŸæ•°ç»„ä¸­ç´¢å¼•ä»Ž begin åˆ° end çš„æ‰€æœ‰å…ƒç´ ï¼ˆåŒ…å«beginï¼Œä½†ä¸åŒ…å«endï¼‰ã€‚slice(1,4) æå–åŽŸæ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ç›´åˆ°ç¬¬å››ä¸ªå…ƒç´ çš„æ‰€æœ‰å…ƒç´  ï¼ˆç´¢å¼•ä¸º 1, 2, 3çš„å…ƒç´ ï¼‰ã€‚å¦‚æžœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œ åˆ™å®ƒè¡¨ç¤ºåœ¨åŽŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬å‡ ä¸ªå…ƒç´ ç»“æŸæŠ½å–ã€‚ slice(-2,-1)è¡¨ç¤ºæŠ½å–äº†åŽŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åŽä¸€ä¸ªå…ƒç´ ï¼ˆä¸åŒ…å«æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åªæœ‰å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼‰ã€‚å¦‚æžœ end è¢«çœç•¥ï¼Œåˆ™slice ä¼šä¸€ç›´æå–åˆ°åŽŸæ•°ç»„æœ«å°¾ã€‚å¦‚æžœ end å¤§äºŽæ•°ç»„é•¿åº¦ï¼Œslice ä¹Ÿä¼šä¸€ç›´æå–åˆ°åŽŸæ•°ç»„æœ«å°¾ è¿”å›žå€¼ ä¸€ä¸ªå«æœ‰æå–å…ƒç´ çš„æ–°æ•°ç»„ã€‚ 8. splicesplice()ï¼šå¾ˆå¼ºå¤§çš„æ•°ç»„æ–¹æ³•ï¼Œå®ƒæœ‰å¾ˆå¤šç§ç”¨æ³•ï¼Œå¯ä»¥å®žçŽ°åˆ é™¤ã€æ’å…¥å’Œæ›¿æ¢ã€‚ åˆ é™¤ï¼šå¯ä»¥åˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€æŒ‡å®š 2 ä¸ªå‚æ•°ï¼šè¦åˆ é™¤çš„ç¬¬ä¸€é¡¹çš„ä½ç½®å’Œè¦åˆ é™¤çš„é¡¹æ•°ã€‚ä¾‹å¦‚ï¼Œ splice(0,2)ä¼šåˆ é™¤æ•°ç»„ä¸­çš„å‰ä¸¤é¡¹ã€‚ æ’å…¥ï¼šå¯ä»¥å‘æŒ‡å®šä½ç½®æ’å…¥ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€æä¾› 3 ä¸ªå‚æ•°ï¼šèµ·å§‹ä½ç½®ã€ 0ï¼ˆè¦åˆ é™¤çš„é¡¹æ•°ï¼‰å’Œè¦æ’å…¥çš„é¡¹ã€‚ä¾‹å¦‚ï¼Œsplice(2,0,4,6)ä¼šä»Žå½“å‰æ•°ç»„çš„ä½ç½® 2 å¼€å§‹æ’å…¥4å’Œ6ã€‚æ›¿æ¢ï¼šå¯ä»¥å‘æŒ‡å®šä½ç½®æ’å…¥ä»»æ„æ•°é‡çš„é¡¹ï¼Œä¸”åŒæ—¶åˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€æŒ‡å®š 3 ä¸ªå‚æ•°ï¼šèµ·å§‹ä½ç½®ã€è¦åˆ é™¤çš„é¡¹æ•°å’Œè¦æ’å…¥çš„ä»»æ„æ•°é‡çš„é¡¹ã€‚æ’å…¥çš„é¡¹æ•°ä¸å¿…ä¸Žåˆ é™¤çš„é¡¹æ•°ç›¸ç­‰ã€‚ä¾‹å¦‚ï¼Œsplice (2,1,4,6)ä¼šåˆ é™¤å½“å‰æ•°ç»„ä½ç½® 2 çš„é¡¹ï¼Œç„¶åŽå†ä»Žä½ç½® 2 å¼€å§‹æ’å…¥4å’Œ6ã€‚ å‚æ•° array.splice(start[, deleteCount[, item1[, item2[, â€¦]]]]) è¿”å›žå€¼ splice()æ–¹æ³•å§‹ç»ˆéƒ½ä¼šè¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¸­åŒ…å«ä»ŽåŽŸå§‹æ•°ç»„ä¸­åˆ é™¤çš„é¡¹ï¼Œå¦‚æžœæ²¡æœ‰åˆ é™¤ä»»ä½•é¡¹ï¼Œåˆ™è¿”å›žä¸€ä¸ªç©ºæ•°ç»„ 12345678910var arr = [1,3,5,7,9,11];var arrRemoved = arr.splice(0,2);console.log(arr); //[5, 7, 9, 11]console.log(arrRemoved); //[1, 3]var arrRemoved2 = arr.splice(2,0,4,6);console.log(arr); // [5, 7, 4, 6, 9, 11]console.log(arrRemoved2); // []var arrRemoved3 = arr.splice(1,1,2,4);console.log(arr); // [5, 2, 4, 4, 6, 9, 11]console.log(arrRemoved3); //[7] splice() æ–¹æ³•ä¸Ž slice() æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œsplice() æ–¹æ³•ä¼šç›´æŽ¥å¯¹æ•°ç»„è¿›è¡Œä¿®æ”¹ã€‚ 9. indexOfå’ŒlastIndexOfindexOf()ï¼šæŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šè¦æŸ¥æ‰¾çš„é¡¹å’Œï¼ˆå¯é€‰çš„ï¼‰è¡¨ç¤ºæŸ¥æ‰¾èµ·ç‚¹ä½ç½®çš„ç´¢å¼•ã€‚å…¶ä¸­ï¼Œ ä»Žæ•°ç»„çš„å¼€å¤´ï¼ˆä½ç½® 0ï¼‰å¼€å§‹å‘åŽæŸ¥æ‰¾ã€‚lastIndexOfï¼šæŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šè¦æŸ¥æ‰¾çš„é¡¹å’Œï¼ˆå¯é€‰çš„ï¼‰è¡¨ç¤ºæŸ¥æ‰¾èµ·ç‚¹ä½ç½®çš„ç´¢å¼•ã€‚å…¶ä¸­ï¼Œ ä»Žæ•°ç»„çš„æœ«å°¾å¼€å§‹å‘å‰æŸ¥æ‰¾ è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½è¿”å›žè¦æŸ¥æ‰¾çš„é¡¹åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œæˆ–è€…åœ¨æ²¡æ‰¾åˆ°çš„æƒ…å†µä¸‹è¿”å›ž-1ã€‚åœ¨æ¯”è¾ƒç¬¬ä¸€ä¸ªå‚æ•°ä¸Žæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹æ—¶ï¼Œä¼šä½¿ç”¨å…¨ç­‰æ“ä½œç¬¦ã€‚ 123456var arr = [1,3,5,7,7,5,3,1];console.log(arr.indexOf(5)); //2console.log(arr.lastIndexOf(5)); //5console.log(arr.indexOf(5,2)); //2console.log(arr.lastIndexOf(5,4)); //2console.log(arr.indexOf("5")); //-1 10. forEachforEach()ï¼šå¯¹æ•°ç»„è¿›è¡ŒéåŽ†å¾ªçŽ¯ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ã€‚è¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›žå€¼ã€‚å‚æ•°éƒ½æ˜¯functionç±»åž‹ï¼Œé»˜è®¤æœ‰ä¼ å‚ï¼Œå‚æ•°åˆ†åˆ«ä¸ºï¼šéåŽ†çš„æ•°ç»„å†…å®¹ï¼›å€¼å¯¹åº”çš„æ•°ç»„ç´¢å¼•ï¼Œæ•°ç»„æœ¬èº«ã€‚ å‚æ•°callbackä¸ºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š currentValueæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ ã€‚index | å¯é€‰æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚array | å¯é€‰forEach()æ–¹æ³•æ­£åœ¨æ“ä½œçš„æ•°ç»„ã€‚ thisArg | å¯é€‰å¯é€‰å‚æ•°ã€‚å½“æ‰§è¡Œå›žè°ƒ å‡½æ•°æ—¶ç”¨ä½œthisçš„å€¼(å‚è€ƒå¯¹è±¡)ã€‚ è¿”å›žå€¼undefined æ³¨æ„ï¼š æ²¡æœ‰åŠžæ³•ä¸­æ­¢æˆ–è€…è·³å‡º forEach å¾ªçŽ¯ï¼Œé™¤äº†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å¦‚æžœä½ éœ€è¦è¿™æ ·ï¼Œä½¿ç”¨forEach()æ–¹æ³•æ˜¯é”™è¯¯çš„ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„å¾ªçŽ¯ä½œä¸ºæ›¿ä»£ã€‚å¦‚æžœæ‚¨æ­£åœ¨æµ‹è¯•ä¸€ä¸ªæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯å¦ç¬¦åˆæŸæ¡ä»¶ï¼Œä¸”éœ€è¦è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ï¼Œé‚£ä¹ˆå¯ä½¿ç”¨ Array.every æˆ– Array.someã€‚å¦‚æžœå¯ç”¨ï¼Œæ–°æ–¹æ³• find() æˆ–è€…findIndex() ä¹Ÿå¯è¢«ç”¨äºŽçœŸå€¼æµ‹è¯•çš„ææ—©ç»ˆæ­¢ã€‚ å¦‚æžœæ•°ç»„åœ¨è¿­ä»£æ—¶è¢«ä¿®æ”¹äº†ï¼Œåˆ™å…¶ä»–å…ƒç´ ä¼šè¢«è·³è¿‡ã€‚12345678910var words = ["one", "two", "three", "four"];words.forEach(function(word) &#123; console.log(word); if (word === "two") &#123; words.shift(); &#125;&#125;);// one// two// four forEach()ä¸ä¼šåœ¨è¿­ä»£ä¹‹å‰åˆ›å»ºæ•°ç»„çš„å‰¯æœ¬ã€‚ 11. mapmap(): åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æžœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åŽè¿”å›žçš„ç»“æžœã€‚ å‚æ•°callbackç”Ÿæˆæ–°æ•°ç»„å…ƒç´ çš„å‡½æ•°ï¼Œä½¿ç”¨ä¸‰ä¸ªå‚æ•°ï¼š currentValuecallback æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ ã€‚index | å¯é€‰callback æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚array | å¯é€‰callback map æ–¹æ³•è¢«è°ƒç”¨çš„æ•°ç»„ã€‚ thisArg | å¯é€‰æ‰§è¡Œ callback å‡½æ•°æ—¶ä½¿ç”¨çš„this å€¼ã€‚ è¿”å›žå€¼ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›žè°ƒå‡½æ•°çš„ç»“æžœã€‚ map ä¸ä¿®æ”¹è°ƒç”¨å®ƒçš„åŽŸæ•°ç»„æœ¬èº«ï¼ˆå½“ç„¶å¯ä»¥åœ¨ callback æ‰§è¡Œæ—¶æ”¹å˜åŽŸæ•°ç»„ï¼‰ã€‚ä½¿ç”¨ map æ–¹æ³•å¤„ç†æ•°ç»„æ—¶ï¼Œæ•°ç»„å…ƒç´ çš„èŒƒå›´æ˜¯åœ¨ callback æ–¹æ³•ç¬¬ä¸€æ¬¡è°ƒç”¨ä¹‹å‰å°±å·²ç»ç¡®å®šäº†ã€‚åœ¨ map æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼šåŽŸæ•°ç»„ä¸­æ–°å¢žåŠ çš„å…ƒç´ å°†ä¸ä¼šè¢« callback è®¿é—®åˆ°ï¼›è‹¥å·²ç»å­˜åœ¨çš„å…ƒç´ è¢«æ”¹å˜æˆ–åˆ é™¤äº†ï¼Œåˆ™å®ƒä»¬çš„ä¼ é€’åˆ° callback çš„å€¼æ˜¯ map æ–¹æ³•éåŽ†åˆ°å®ƒä»¬çš„é‚£ä¸€æ—¶åˆ»çš„å€¼ï¼›è€Œè¢«åˆ é™¤çš„å…ƒç´ å°†ä¸ä¼šè¢«è®¿é—®åˆ°ã€‚map()åŒforEach()ä¸€æ ·ï¼Œæ— æ³•è·³å‡ºå¾ªçŽ¯ã€‚ 12. filterfilter():â€œè¿‡æ»¤â€åŠŸèƒ½ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›žæ»¡è¶³è¿‡æ»¤æ¡ä»¶ç»„æˆçš„æ•°ç»„ã€‚ å‚æ•°callbackç”¨æ¥æµ‹è¯•æ•°ç»„çš„æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ã€‚è°ƒç”¨æ—¶ä½¿ç”¨å‚æ•° (element, index, array)ã€‚è¿”å›žtrueè¡¨ç¤ºä¿ç•™è¯¥å…ƒç´ ï¼ˆé€šè¿‡æµ‹è¯•ï¼‰ï¼Œfalseåˆ™ä¸ä¿ç•™ã€‚ä½¿ç”¨ä¸‰ä¸ªå‚æ•°ï¼š elementå½“å‰åœ¨æ•°ç»„ä¸­å¤„ç†çš„å…ƒç´ ã€‚index | å¯é€‰æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚array | å¯é€‰è°ƒç”¨äº†filterçš„æ•°ç»„ã€‚ thisArg | å¯é€‰æ‰§è¡Œ callback å‡½æ•°æ—¶ä½¿ç”¨çš„this å€¼ã€‚ è¿”å›žå€¼ä¸€ä¸ªæ–°çš„é€šè¿‡æµ‹è¯•çš„å…ƒç´ çš„é›†åˆçš„æ•°ç»„ï¼Œå¦‚æžœæ²¡æœ‰é€šè¿‡æµ‹è¯•åˆ™è¿”å›žç©ºæ•°ç»„ filter ä¸ä¼šæ”¹å˜åŽŸæ•°ç»„ï¼Œå®ƒè¿”å›žè¿‡æ»¤åŽçš„æ–°æ•°ç»„ã€‚filter éåŽ†çš„å…ƒç´ èŒƒå›´åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ callback ä¹‹å‰å°±å·²ç»ç¡®å®šäº†ã€‚åœ¨è°ƒç”¨ filter ä¹‹åŽè¢«æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ä¸ä¼šè¢« filter éåŽ†åˆ°ã€‚å¦‚æžœå·²ç»å­˜åœ¨çš„å…ƒç´ è¢«æ”¹å˜äº†ï¼Œåˆ™ä»–ä»¬ä¼ å…¥ callback çš„å€¼æ˜¯ filter éåŽ†åˆ°å®ƒä»¬é‚£ä¸€åˆ»çš„å€¼ã€‚è¢«åˆ é™¤æˆ–ä»Žæ¥æœªè¢«èµ‹å€¼çš„å…ƒç´ ä¸ä¼šè¢«éåŽ†åˆ°ã€‚ 12345678const fruits = ['apple', 'banana', 'grapes', 'mango', 'orange'];const filterItems = (query) =&gt; &#123; return fruits.filter((el) =&gt; el.toLowerCase().indexOf(query.toLowerCase()) &gt; -1 );&#125;console.log(filterItems('ap')); // ['apple', 'grapes']console.log(filterItems('an')); // ['banana', 'mango', 'orange'] 13. everyevery()ï¼šåˆ¤æ–­æ•°ç»„ä¸­æ¯ä¸€é¡¹éƒ½æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œåªæœ‰æ‰€æœ‰é¡¹éƒ½æ»¡è¶³æ¡ä»¶ï¼Œæ‰ä¼šè¿”å›žtrueã€‚ 1234567function isBigEnough(element, index, array) &#123; return (element &gt;= 10);&#125;var passed = [12, 5, 8, 130, 44].every(isBigEnough);// passed is falsepassed = [12, 54, 18, 130, 44].every(isBigEnough);// passed is true every ä¸ä¼šæ”¹å˜åŽŸæ•°ç»„ã€‚every éåŽ†çš„å…ƒç´ èŒƒå›´åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ callback ä¹‹å‰å°±å·²ç¡®å®šäº†ã€‚åœ¨è°ƒç”¨ every ä¹‹åŽæ·»åŠ åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ä¸ä¼šè¢« callback è®¿é—®åˆ°ã€‚å¦‚æžœæ•°ç»„ä¸­å­˜åœ¨çš„å…ƒç´ è¢«æ›´æ”¹ï¼Œåˆ™ä»–ä»¬ä¼ å…¥ callback çš„å€¼æ˜¯ every è®¿é—®åˆ°ä»–ä»¬é‚£ä¸€åˆ»çš„å€¼ã€‚é‚£äº›è¢«åˆ é™¤çš„å…ƒç´ æˆ–ä»Žæ¥æœªè¢«èµ‹å€¼çš„å…ƒç´ å°†ä¸ä¼šè¢«è®¿é—®åˆ°ã€‚every å’Œæ•°å­¦ä¸­çš„â€æ‰€æœ‰â€ç±»ä¼¼ï¼Œå½“æ‰€æœ‰çš„å…ƒç´ éƒ½ç¬¦åˆæ¡ä»¶æ‰è¿”å›žtrueã€‚å¦å¤–ï¼Œç©ºæ•°ç»„ä¹Ÿæ˜¯è¿”å›žtrueã€‚(ç©ºæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½ç¬¦åˆç»™å®šçš„æ¡ä»¶ï¼Œæ³¨ï¼šå› ä¸ºç©ºæ•°ç»„æ²¡æœ‰å…ƒç´ )ã€‚ 14. somesome()ï¼šåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„é¡¹ï¼Œåªè¦æœ‰ä¸€é¡¹æ»¡è¶³æ¡ä»¶ï¼Œå°±ä¼šè¿”å›žtrueã€‚ 12[2, 5, 8, 1, 4].some(x =&gt; x &gt; 10); // false[12, 5, 8, 1, 4].some(x =&gt; x &gt; 10); // true some() è¢«è°ƒç”¨æ—¶ä¸ä¼šæ”¹å˜æ•°ç»„ã€‚ 15 reduceå’ŒreduceRightè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šå®žçŽ°è¿­ä»£æ•°ç»„çš„æ‰€æœ‰é¡¹ï¼Œç„¶åŽæž„å»ºä¸€ä¸ªæœ€ç»ˆè¿”å›žçš„å€¼ã€‚reduce()æ–¹æ³•ä»Žæ•°ç»„çš„ç¬¬ä¸€é¡¹å¼€å§‹ï¼Œé€ä¸ªéåŽ†åˆ°æœ€åŽã€‚è€Œ reduceRight()åˆ™ä»Žæ•°ç»„çš„æœ€åŽä¸€é¡¹å¼€å§‹ï¼Œå‘å‰éåŽ†åˆ°ç¬¬ä¸€é¡¹ã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªåœ¨æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°å’Œï¼ˆå¯é€‰çš„ï¼‰ä½œä¸ºå½’å¹¶åŸºç¡€çš„åˆå§‹å€¼(initialValue)ã€‚ åˆå§‹å€¼å¯ä¸º[] æˆ–è€… {} ä¼ ç»™ reduce()å’Œ reduceRight()çš„å‡½æ•°æŽ¥æ”¶ 4 ä¸ªå‚æ•°ï¼šå‰ä¸€ä¸ªå€¼ã€å½“å‰å€¼ã€é¡¹çš„ç´¢å¼•å’Œæ•°ç»„å¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°è¿”å›žçš„ä»»ä½•å€¼éƒ½ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°è‡ªåŠ¨ä¼ ç»™ä¸‹ä¸€é¡¹ã€‚ç¬¬ä¸€æ¬¡è¿­ä»£å‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬äºŒé¡¹ä¸Šï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹ã€‚ 12345678const array1 = [1, 2, 3, 4];const reducer = (accumulator, currentValue) =&gt; accumulator + currentValue;// 1 + 2 + 3 + 4console.log(array1.reduce(reducer));// expected output: 10// 5 + 1 + 2 + 3 + 4console.log(array1.reduce(reducer, 5));// expected output: 15 æ•°ç»„åŽ»é‡ 12345678let arr = [1,2,1,2,3,5,4,5,3,4,4,4,4];let result = arr.sort().reduce((init, current)=&gt;&#123; if(init.length===0 || init[init.length-1]!==current)&#123; init.push(current); &#125; return init;&#125;, []);console.log(result); //[1,2,3,4,5] åŠŸèƒ½åž‹å‡½æ•°ç®¡é“ 12345678910111213141516171819202122// Building-blocks to use for compositionconst double = x =&gt; x + x;const triple = x =&gt; 3 * x;const quadruple = x =&gt; 4 * x;// Function composition enabling pipe functionalityconst pipe = (...functions) =&gt; input =&gt; functions.reduce( (acc, fn) =&gt; fn(acc), input);//æ ¹æ®è¾“å…¥å€¼ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°çš„è¿”å›žå€¼å½“ä½œç¬¬äºŒä¸ªå‡½æ•°çš„å‚æ•°å€¼ä¼ å…¥// Composed functions for multiplication of specific valuesconst multiply6 = pipe(double, triple);const multiply9 = pipe(triple, triple);const multiply16 = pipe(quadruple, quadruple);const multiply24 = pipe(double, triple, quadruple);// Usagemultiply6(6); // 36multiply9(9); // 81multiply16(16); // 256multiply24(10); // 240 16. ES6å¯¹æ•°ç»„çš„æ‹“å±•16.1 æ‹“å±•è¿ç®—ç¬¦å¤åˆ¶æ•°ç»„ æ•°ç»„æ˜¯å¤åˆçš„æ•°æ®ç±»åž‹ï¼Œç›´æŽ¥å¤åˆ¶çš„è¯ï¼Œåªæ˜¯å¤åˆ¶äº†æŒ‡å‘åº•å±‚æ•°æ®ç»“æž„çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å…‹éš†ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚ä¿®æ”¹å…‹éš†æ•°ç»„ï¼ŒåŒæ—¶ä¼šå¯¼è‡´åŽŸæ•°ç»„æ”¹å˜ã€‚ 12345const a1 = [1, 2];// å†™æ³•ä¸€const a2 = [...a1];// å†™æ³•äºŒconst [...a2] = a1; åˆå¹¶æ•°ç»„123456789const arr1 = ['a', 'b'];const arr2 = ['c'];const arr3 = ['d', 'e'];// ES5 çš„åˆå¹¶æ•°ç»„arr1.concat(arr2, arr3);// [ 'a', 'b', 'c', 'd', 'e' ]// ES6 çš„åˆå¹¶æ•°ç»„[...arr1, ...arr2, ...arr3]// [ 'a', 'b', 'c', 'd', 'e' ] ä¸¤ç§æ–¹æ³•éƒ½ä¸ºæµ…æ‹·è´ã€‚ ä¸Žè§£æž„èµ‹å€¼ç»“åˆ1234// ES5a = list[0], rest = list.slice(1)// ES6[a, ...rest] = list å­—ç¬¦ä¸² æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ 12[...'hello']// [ "h", "e", "l", "l", "o" ] å®žçŽ°äº† Iterator æŽ¥å£çš„å¯¹è±¡Map å’Œ Set ç»“æž„ï¼ŒGenerator å‡½æ•°16.2 Array.from()Array.from()ç”¨äºŽå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éåŽ†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢žçš„æ•°æ®ç»“æž„ Set å’Œ Mapï¼‰ å®žé™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯ DOM æ“ä½œè¿”å›žçš„ NodeList é›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„argumentså¯¹è±¡ã€‚Array.froméƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ 1234567891011// NodeListå¯¹è±¡let ps = document.querySelectorAll('p');Array.from(ps).filter(p =&gt; &#123; return p.textContent.length &gt; 100;&#125;);// argumentså¯¹è±¡function foo() &#123; var args = Array.from(arguments); // ...&#125; Array.fromè¿˜å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºŽæ•°ç»„çš„mapæ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åŽçš„å€¼æ”¾å…¥è¿”å›žçš„æ•°ç»„ã€‚123456Array.from(arrayLike, x =&gt; x * x);// ç­‰åŒäºŽArray.from(arrayLike).map(x =&gt; x * x);Array.from([1, 2, 3], (x) =&gt; x * x)// [1, 4, 9] æ•°ç»„åŽ»é‡åˆå¹¶ 1234567function combine()&#123; let arr = [].concat.apply([], arguments); //æ²¡æœ‰åŽ»é‡å¤çš„æ–°æ•°ç»„ return Array.from(new Set(arr));&#125; var m = [1, 2, 2], n = [2,3,3]; console.log(combine(m,n)); 16.3 Array.of()Array.ofæ–¹æ³•ç”¨äºŽå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚åˆ›å»ºä¸€ä¸ªå…·æœ‰å¯å˜æ•°é‡å‚æ•°çš„æ–°æ•°ç»„å®žä¾‹ï¼Œè€Œä¸è€ƒè™‘å‚æ•°çš„æ•°é‡æˆ–ç±»åž‹ã€‚ 1234Array.of() // []Array.of(undefined) // [undefined]Array.of(1) // [1]Array.of(1, 2) // [1, 2] 16.4 copyWithin()copyWithin()æ–¹æ³•æµ…å¤åˆ¶æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ°åŒä¸€æ•°ç»„ä¸­çš„å¦ä¸€ä¸ªä½ç½®ï¼Œå¹¶è¿”å›žå®ƒï¼Œè€Œä¸ä¿®æ”¹å…¶å¤§å°ã€‚åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŽŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åŽè¿”å›žå½“å‰æ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šä¿®æ”¹å½“å‰æ•°ç»„ã€‚ 1Array.prototype.copyWithin(target, start = 0, end = this.length) å®ƒæŽ¥æ”¶ä¸‰ä¸ªå‚æ•°: targetï¼ˆå¿…éœ€ï¼‰ï¼šä»Žè¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚å¦‚æžœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚ startï¼ˆå¯é€‰ï¼‰ï¼šä»Žè¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º 0ã€‚å¦‚æžœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚ endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºŽæ•°ç»„é•¿åº¦ã€‚å¦‚æžœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚ å‚æ•°target,startå’Œend å¿…é¡»ä¸ºæ•´æ•°ã€‚å¦‚æžœstartä¸ºè´Ÿï¼Œåˆ™å…¶æŒ‡å®šçš„ç´¢å¼•ä½ç½®ç­‰åŒäºŽlength+startï¼Œlengthä¸ºæ•°ç»„çš„é•¿åº¦ã€‚endä¹Ÿæ˜¯å¦‚æ­¤ã€‚copyWithinæ–¹æ³•ä¸è¦æ±‚å…¶thiså€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼›é™¤æ­¤ä¹‹å¤–ï¼ŒcopyWithinæ˜¯ä¸€ä¸ªå¯å˜æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ”¹å˜thiså¯¹è±¡æœ¬èº«ï¼Œå¹¶ä¸”è¿”å›žå®ƒï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒçš„æ‹·è´ã€‚copyWithin å°±åƒ C å’Œ C++ çš„ memcpy å‡½æ•°ä¸€æ ·ï¼Œä¸”å®ƒæ˜¯ç”¨æ¥ç§»åŠ¨ Array æˆ–è€… TypedArray æ•°æ®çš„ä¸€ä¸ªé«˜æ€§èƒ½çš„æ–¹æ³•ã€‚å¤åˆ¶ä»¥åŠç²˜è´´åºåˆ—è¿™ä¸¤è€…æ˜¯ä¸ºä¸€ä½“çš„æ“ä½œ;å³ä½¿å¤åˆ¶å’Œç²˜è´´åŒºåŸŸé‡å ï¼Œç²˜è´´çš„åºåˆ—ä¹Ÿä¼šæœ‰æ‹·è´æ¥çš„å€¼ã€‚copyWithin å‡½æ•°æ˜¯è®¾è®¡ä¸ºé€šç”¨çš„ï¼Œå…¶ä¸è¦æ±‚å…¶ this å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚The copyWithin æ˜¯ä¸€ä¸ªå¯å˜æ–¹æ³•ï¼Œå®ƒä¸ä¼šæ”¹å˜ this çš„ lengthï¼Œä½†æ˜¯ä¼šæ”¹å˜ this æœ¬èº«çš„å†…å®¹ï¼Œä¸”éœ€è¦æ—¶ä¼šåˆ›å»ºæ–°çš„å±žæ€§ã€‚ 1234567891011[1, 2, 3, 4, 5].copyWithin(-2);// [1, 2, 3, 1, 2][1, 2, 3, 4, 5].copyWithin(0, 3);// [4, 5, 3, 4, 5][1, 2, 3, 4, 5].copyWithin(0, 3, 4);// [4, 2, 3, 4, 5][1, 2, 3, 4, 5].copyWithin(-2, -3, -1);// [1, 2, 3, 3, 4] 16.5 find() å’Œ findIndex()find() æ–¹æ³•è¿”å›žæ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚å¦åˆ™è¿”å›ž undefinedã€‚findIndex()æ–¹æ³•è¿”å›žæ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚å¦åˆ™è¿”å›ž-1ã€‚ 1234567891011121314[1, 5, 10, 15].find(function(value, index, arr) &#123; return value &gt; 9;&#125;) // 10[1, 5, 10, 15].findIndex(function(value, index, arr) &#123; return value &gt; 9;&#125;) // 2//æŽ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›žè°ƒå‡½æ•°çš„thiså¯¹è±¡ã€‚function f(v)&#123; return v &gt; this.age;&#125;let person = &#123;name: 'John', age: 20&#125;;[10, 12, 26, 15].find(f, person); // 26 è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘çŽ°NaNï¼Œå¼¥è¡¥äº†æ•°ç»„çš„indexOfæ–¹æ³•çš„ä¸è¶³ã€‚ 16.6 fill()fill() æ–¹æ³•ç”¨ä¸€ä¸ªå›ºå®šå€¼å¡«å……ä¸€ä¸ªæ•°ç»„ä¸­ä»Žèµ·å§‹ç´¢å¼•åˆ°ç»ˆæ­¢ç´¢å¼•å†…çš„å…¨éƒ¨å…ƒç´ ã€‚ä¸åŒ…æ‹¬ç»ˆæ­¢ç´¢å¼•ã€‚è¿”å›žä¿®æ”¹åŽçš„æ•°ç»„ã€‚ æŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š value :ç”¨æ¥å¡«å……æ•°ç»„å…ƒç´ çš„å€¼ã€‚ start | å¯é€‰ èµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤å€¼ä¸º0ã€‚ end | å¯é€‰ ç»ˆæ­¢ç´¢å¼•ï¼Œé»˜è®¤å€¼ä¸º this.lengthã€‚ 12['a', 'b', 'c'].fill(7, 1, 2)// ['a', 7, 'c'] å¦‚æžœå¡«å……çš„ç±»åž‹ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆè¢«èµ‹å€¼çš„æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´å¯¹è±¡ã€‚ 16.7 entries()ï¼Œkeys() å’Œ values()ä¸‰ä¸ªæ–¹æ³•éƒ½ç”¨äºŽå¯¹æ•°ç»„çš„éåŽ†ã€‚keys()æ˜¯å¯¹é”®åçš„éåŽ†ã€values()æ˜¯å¯¹é”®å€¼çš„éåŽ†ï¼Œentries()æ˜¯å¯¹é”®å€¼å¯¹çš„éåŽ†ã€‚1234567891011121314151617for (let index of ['a', 'b'].keys()) &#123; console.log(index);&#125;// 0// 1for (let elem of ['a', 'b'].values()) &#123; console.log(elem);&#125;// 'a'// 'b'for (let [index, elem] of ['a', 'b'].entries()) &#123; console.log(index, elem);&#125;// 0 "a"// 1 "b" ä¸é€‚ç”¨for...oféåŽ†çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨éåŽ†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œè¿›è¡ŒéåŽ†12345let letter = ['a', 'b', 'c'];let entries = letter.entries();console.log(entries.next().value); // [0, 'a']console.log(entries.next().value); // [1, 'b']console.log(entries.next().value); // [2, 'c'] 16.8 includes()includes() æ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œæ ¹æ®æƒ…å†µï¼Œå¦‚æžœåŒ…å«åˆ™è¿”å›ž trueï¼Œå¦åˆ™è¿”å›žfalseã€‚ arr.includes(searchElement, fromIndex) searchElement éœ€è¦æŸ¥æ‰¾çš„å…ƒç´ å€¼ã€‚ fromIndex | å¯é€‰ ä»Žè¯¥ç´¢å¼•å¤„å¼€å§‹æŸ¥æ‰¾ searchElementã€‚å¦‚æžœä¸ºè´Ÿå€¼ï¼Œåˆ™æŒ‰å‡åºä»Ž array.length - fromIndex çš„ç´¢å¼•å¼€å§‹æœç´¢ã€‚é»˜è®¤ä¸º 0ã€‚ 12345[1, 2, 3].includes(2); // true[1, 2, 3].includes(4); // false[1, 2, 3].includes(3, 3); // false[1, 2, 3].includes(3, -1); // true[1, 2, NaN].includes(NaN); // true 16.9 flat()å’ŒflatMap()flat() æ–¹æ³•ä¼šé€’å½’åˆ°æŒ‡å®šæ·±åº¦å°†æ‰€æœ‰å­æ•°ç»„è¿žæŽ¥ï¼Œå¹¶è¿”å›žä¸€ä¸ªæ–°æ•°ç»„ã€‚ var newArray = arr.flat(depth) depth | å¯é€‰ æŒ‡å®šåµŒå¥—æ•°ç»„ä¸­çš„ç»“æž„æ·±åº¦ï¼Œé»˜è®¤å€¼ä¸º1ã€‚å‚æ•°ä¸ºInfinityæ—¶è¡¨ç¤ºä¸ç®¡åµŒå¥—å¤šå°‘å±‚ï¼Œéƒ½è½¬ä¸ºä¸€ç»´æ•°ç»„ã€‚ flatMap()æ–¹æ³•é¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åŽå°†ç»“æžœåŽ‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚å®ƒä¸Ž map å’Œ æ·±åº¦å€¼1çš„ flat å‡ ä¹Žç›¸åŒï¼Œä½†flatMapé€šå¸¸åœ¨åˆå¹¶æˆä¸€ç§æ–¹æ³•çš„æ•ˆçŽ‡ç¨å¾®é«˜ä¸€äº›ã€‚ var new_array = arr.flatMap(function callback(currentValue[, index[, array]]) { // è¿”å›žæ–°æ•°ç»„çš„å…ƒç´ }[, thisArg]) 123456789101112131415[1, 2, [3, [4, 5]]].flat(2)// [1, 2, 3, 4, 5]// ç›¸å½“äºŽ [[2, 4], [3, 6], [4, 8]].flat()[2, 3, 4].flatMap((x) =&gt; [x, x * 2])// [2, 4, 3, 6, 4, 8]//flatMapç­‰ä»·ä¸Žreduceä¸Žconcatvar arr1 = [1, 2, 3, 4];arr1.flatMap(x =&gt; [x * 2]);// ç­‰ä»·äºŽarr1.reduce((acc, x) =&gt; acc.concat([x * 2]), []);// [2, 4, 6, 8] å¦‚æžœåŽŸæ•°ç»„æœ‰ç©ºä½ï¼Œflat()æ–¹æ³•ä¼šè·³è¿‡ç©ºä½ã€‚ 16.10 æ•°ç»„çš„ç©ºä½ forEach(), filter(), reduce(), every() å’Œsome()éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚ map()ä¼šè·³è¿‡ç©ºä½ï¼Œä½†ä¼šä¿ç•™è¿™ä¸ªå€¼ join()å’ŒtoString()ä¼šå°†ç©ºä½è§†ä¸ºundefinedï¼Œè€Œundefinedå’Œnullä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚ ES6 åˆ™æ˜¯æ˜Žç¡®å°†ç©ºä½è½¬ä¸ºundefinedã€‚ å‚è€ƒé“¾æŽ¥ MDN Array é˜®ä¸€å³°ECMAScript 6 å…¥é—¨]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>ES6</tag>
        <tag>Array</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BFC]]></title>
    <url>%2F2018%2F03%2F23%2FBFC%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯BFCBFCå…¨ç§°æ˜¯Block Formatting Contextï¼Œå³å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚å®ƒæ˜¯CSS2.1è§„èŒƒå®šä¹‰çš„ï¼Œå…³äºŽCSSæ¸²æŸ“å®šä½çš„ä¸€ä¸ªæ¦‚å¿µã€‚è¦æ˜Žç™½BFCåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œé¦–å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯è§†è§‰æ ¼å¼åŒ–æ¨¡åž‹ã€‚ è§†è§‰æ ¼å¼åŒ–æ¨¡åž‹è§†è§‰æ ¼å¼åŒ–æ¨¡åž‹(visual formatting model)æ˜¯ç”¨æ¥å¤„ç†æ–‡æ¡£å¹¶å°†å®ƒæ˜¾ç¤ºåœ¨è§†è§‰åª’ä½“ä¸Šçš„æœºåˆ¶ï¼Œå®ƒä¹Ÿæ˜¯CSSä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚è§†è§‰æ ¼å¼åŒ–æ¨¡åž‹å®šä¹‰äº†ç›’ï¼ˆBoxï¼‰çš„ç”Ÿæˆï¼Œç›’ä¸»è¦åŒ…æ‹¬äº†å—ç›’ã€è¡Œå†…ç›’ã€åŒ¿åç›’ï¼ˆæ²¡æœ‰åå­—ä¸èƒ½è¢«é€‰æ‹©å™¨é€‰ä¸­çš„ç›’ï¼‰ä»¥åŠä¸€äº›å®žéªŒæ€§çš„ç›’ï¼ˆæœªæ¥å¯èƒ½æ·»åŠ åˆ°è§„èŒƒä¸­ï¼‰ã€‚ç›’çš„ç±»åž‹ç”±displayå±žæ€§å†³å®šã€‚ å—ç›’ï¼ˆblock boxï¼‰å—ç›’æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š å½“å…ƒç´ çš„CSSå±žæ€§displayä¸ºblockï¼Œlist-itemæˆ– tableæ—¶ï¼Œå®ƒæ˜¯å—çº§å…ƒç´  block-levelï¼› è§†è§‰ä¸Šå‘ˆçŽ°ä¸ºå—ï¼Œç«–ç›´æŽ’åˆ—ï¼› å—çº§ç›’å‚ä¸Ž(å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)ï¼› æ¯ä¸ªå—çº§å…ƒç´ è‡³å°‘ç”Ÿæˆä¸€ä¸ªå—çº§ç›’ï¼Œç§°ä¸ºä¸»è¦å—çº§ç›’(principal block-level box)ã€‚ä¸€äº›å…ƒç´ ï¼Œæ¯”å¦‚&lt;li&gt;ï¼Œç”Ÿæˆé¢å¤–çš„ç›’æ¥æ”¾ç½®é¡¹ç›®ç¬¦å·ï¼Œä¸è¿‡å¤šæ•°å…ƒç´ åªç”Ÿæˆä¸€ä¸ªä¸»è¦å—çº§ç›’ã€‚ è¡Œå†…ç›’ï¼ˆinline boxï¼‰ å½“å…ƒç´ çš„CSSå±žæ€§displayçš„è®¡ç®—å€¼ä¸ºinlineï¼Œinline-blockæˆ–inline-tableæ—¶ï¼Œç§°å®ƒä¸ºè¡Œå†…çº§å…ƒç´ ï¼› è§†è§‰ä¸Šå®ƒå°†å†…å®¹ä¸Žå…¶å®ƒè¡Œå†…çº§å…ƒç´ æŽ’åˆ—ä¸ºå¤šè¡Œï¼›å…¸åž‹çš„å¦‚æ®µè½å†…å®¹ï¼Œæœ‰æ–‡æœ¬(å¯ä»¥æœ‰å¤šç§æ ¼å¼è­¬å¦‚ç€é‡)ï¼Œæˆ–å›¾ç‰‡ï¼Œéƒ½æ˜¯è¡Œå†…çº§å…ƒç´ ï¼› è¡Œå†…çº§å…ƒç´ ç”Ÿæˆè¡Œå†…çº§ç›’(inline-level boxes)ï¼Œå‚ä¸Žè¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡(inline formatting context)ã€‚åŒæ—¶å‚ä¸Žç”Ÿæˆè¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„è¡Œå†…çº§ç›’ç§°ä¸ºè¡Œå†…ç›’(inline boxes)ã€‚æ‰€æœ‰display:inlineçš„éžæ›¿æ¢å…ƒç´ ç”Ÿæˆçš„ç›’æ˜¯è¡Œå†…ç›’ï¼› ä¸å‚ä¸Žç”Ÿæˆè¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„è¡Œå†…çº§ç›’ç§°ä¸ºåŽŸå­è¡Œå†…çº§ç›’(atomic inline-level boxes)ã€‚è¿™äº›ç›’ç”±å¯æ›¿æ¢è¡Œå†…å…ƒç´ ï¼Œæˆ– display å€¼ä¸º inline-block æˆ– inline-table çš„å…ƒç´ ç”Ÿæˆï¼Œä¸èƒ½æ‹†åˆ†æˆå¤šä¸ªç›’ï¼› åŒ¿åç›’ï¼ˆanonymous boxï¼‰åŒ¿åç›’ä¹Ÿæœ‰ä»½åŒ¿åå—ç›’ä¸ŽåŒ¿åè¡Œå†…ç›’ï¼Œå› ä¸ºåŒ¿åç›’æ²¡æœ‰åå­—ï¼Œä¸èƒ½åˆ©ç”¨é€‰æ‹©å™¨æ¥é€‰æ‹©å®ƒä»¬ï¼Œæ‰€ä»¥å®ƒä»¬çš„æ‰€æœ‰å±žæ€§éƒ½ä¸ºinheritæˆ–åˆå§‹é»˜è®¤å€¼ï¼› å¦‚ä¸‹é¢ä¾‹å­ï¼Œä¼šåˆ›é”®åŒ¿åå—ç›’æ¥åŒ…å«æ¯—é‚»çš„è¡Œå†…çº§ç›’ï¼š 12345&lt;div&gt; Some inline text &lt;p&gt;followed by a paragraph&lt;/p&gt; followed by more inline text.&lt;/div&gt; ä¸‰ä¸ªå®šä½æ–¹æ¡ˆåœ¨å®šä½çš„æ—¶å€™ï¼Œæµè§ˆå™¨å°±ä¼šæ ¹æ®å…ƒç´ çš„ç›’ç±»åž‹å’Œä¸Šä¸‹æ–‡å¯¹è¿™äº›å…ƒç´ è¿›è¡Œå®šä½ï¼Œå¯ä»¥è¯´ç›’å°±æ˜¯å®šä½çš„åŸºæœ¬å•ä½ã€‚å®šä½æ—¶ï¼Œæœ‰ä¸‰ç§å®šä½æ–¹æ¡ˆï¼Œåˆ†åˆ«æ˜¯å¸¸è§„æµï¼Œæµ®åŠ¨å·²ç»ç»å¯¹å®šä½ã€‚ å¸¸è§„æµ(Normal flow) åœ¨å¸¸è§„æµä¸­ï¼Œç›’ä¸€ä¸ªæŽ¥ç€ä¸€ä¸ªæŽ’åˆ—; åœ¨å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡é‡Œé¢ï¼Œ å®ƒä»¬ç«–ç€æŽ’åˆ—ï¼› åœ¨è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡é‡Œé¢ï¼Œ å®ƒä»¬æ¨ªç€æŽ’åˆ—; å½“positionä¸ºstaticæˆ–relativeï¼Œå¹¶ä¸”floatä¸ºnoneæ—¶ä¼šè§¦å‘å¸¸è§„æµï¼› å¯¹äºŽé™æ€å®šä½(static positioning)ï¼Œposition: staticï¼Œç›’çš„ä½ç½®æ˜¯å¸¸è§„æµå¸ƒå±€é‡Œçš„ä½ç½®ï¼› å¯¹äºŽç›¸å¯¹å®šä½(relative positioning)ï¼Œposition: relativeï¼Œç›’åç§»ä½ç½®ç”±è¿™äº›å±žæ€§å®šä¹‰topï¼Œbottomï¼Œleftandrightã€‚å³ä½¿æœ‰åç§»ï¼Œä»ç„¶ä¿ç•™åŽŸæœ‰çš„ä½ç½®ï¼Œå…¶å®ƒå¸¸è§„æµä¸èƒ½å ç”¨è¿™ä¸ªä½ç½®ã€‚ æµ®åŠ¨(Floats) ç›’ç§°ä¸ºæµ®åŠ¨ç›’(floating boxes)ï¼› å®ƒä½äºŽå½“å‰è¡Œçš„å¼€å¤´æˆ–æœ«å°¾ï¼› è¿™å¯¼è‡´å¸¸è§„æµçŽ¯ç»•åœ¨å®ƒçš„å‘¨è¾¹ï¼Œé™¤éžè®¾ç½® clear å±žæ€§ï¼› ç»å¯¹å®šä½(Absolute positioning) ç»å¯¹å®šä½æ–¹æ¡ˆï¼Œç›’ä»Žå¸¸è§„æµä¸­è¢«ç§»é™¤ï¼Œä¸å½±å“å¸¸è§„æµçš„å¸ƒå±€ï¼› å®ƒçš„å®šä½ç›¸å¯¹äºŽå®ƒçš„åŒ…å«å—ï¼Œç›¸å…³CSSå±žæ€§ï¼štopï¼Œbottomï¼ŒleftåŠrightï¼› å¦‚æžœå…ƒç´ çš„å±žæ€§positionä¸ºabsoluteæˆ–fixedï¼Œå®ƒæ˜¯ç»å¯¹å®šä½å…ƒç´ ï¼› å¯¹äºŽposition: absoluteï¼Œå…ƒç´ å®šä½å°†ç›¸å¯¹äºŽæœ€è¿‘çš„ä¸€ä¸ªrelativeã€fixedæˆ–absoluteçš„çˆ¶å…ƒç´ ï¼Œå¦‚æžœæ²¡æœ‰åˆ™ç›¸å¯¹äºŽbodyï¼› å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡åˆ°è¿™é‡Œï¼Œå·²ç»å¯¹CSSçš„å®šä½æœ‰ä¸€å®šçš„äº†è§£äº†ï¼Œä»Žä¸Šé¢çš„ä¿¡æ¯ä¸­ä¹Ÿå¯ä»¥å¾—çŸ¥ï¼Œå—æ ¼å¼ä¸Šä¸‹æ–‡æ˜¯é¡µé¢CSS è§†è§‰æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºŽå†³å®šå—ç›’å­çš„å¸ƒå±€åŠæµ®åŠ¨ç›¸äº’å½±å“èŒƒå›´çš„ä¸€ä¸ªåŒºåŸŸã€‚ BFCçš„åˆ›å»ºæ–¹æ³• æ ¹å…ƒç´ æˆ–å…¶å®ƒåŒ…å«å®ƒçš„å…ƒç´ ï¼› æµ®åŠ¨ (å…ƒç´ çš„floatä¸ä¸ºnone)ï¼› ç»å¯¹å®šä½å…ƒç´  (å…ƒç´ çš„positionä¸ºabsoluteæˆ–fixed)ï¼› è¡Œå†…å—inline-blocks(å…ƒç´ çš„ display: inline-block)ï¼› è¡¨æ ¼å•å…ƒæ ¼(å…ƒç´ çš„display: table-cellï¼ŒHTMLè¡¨æ ¼å•å…ƒæ ¼é»˜è®¤å±žæ€§)ï¼› overflowçš„å€¼ä¸ä¸ºvisibleçš„å…ƒç´ ï¼› å¼¹æ€§ç›’ flex boxes (å…ƒç´ çš„display: flexæˆ–inline-flex)ï¼› ä½†å…¶ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯overflow:hiddenã€float:left/rightã€position:absoluteã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡çœ‹åˆ°è¿™äº›å±žæ€§çš„æ—¶å€™ï¼Œå°±ä»£è¡¨äº†è¯¥å…ƒç´ ä»¥åŠåˆ›å»ºäº†ä¸€ä¸ªBFCäº†ã€‚ BFCçš„èŒƒå›´BFCçš„èŒƒå›´åœ¨MDNä¸­æ˜¯è¿™æ ·æè¿°çš„ã€‚ A block formatting context contains everything inside of the element creating it that is not also inside a descendant element that creates a new block formatting context. ä¸­æ–‡çš„æ„æ€ä¸€ä¸ªBFCåŒ…å«åˆ›å»ºè¯¥ä¸Šä¸‹æ–‡å…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ ï¼Œä½†ä¸åŒ…æ‹¬åˆ›å»ºäº†æ–°BFCçš„å­å…ƒç´ çš„å†…éƒ¨å…ƒç´ ã€‚ è¿™æ®µçœ‹ä¸ŠåŽ»æœ‰ç‚¹å¥‡æ€ªï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼ŒåŠ å…¥æœ‰ä¸‹é¢ä»£ç ï¼Œclassåä¸º.BFCä»£è¡¨åˆ›å»ºäº†æ–°çš„å—æ ¼å¼åŒ–ï¼š12345678910&lt;div id='div_1' class='BFC'&gt; &lt;div id='div_2'&gt; &lt;div id='div_3'&gt;&lt;/div&gt; &lt;div id='div_4'&gt;&lt;/div&gt; &lt;/div&gt; &lt;div id='div_5' class='BFC'&gt; &lt;div id='div_6'&gt;&lt;/div&gt; &lt;div id='div_7'&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; è¿™æ®µä»£ç è¡¨ç¤ºï¼Œ#div_1åˆ›å»ºäº†ä¸€ä¸ªå—æ ¼å¼ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡åŒ…æ‹¬äº†#div_2ã€#div_3ã€#div_4ã€#div_5ã€‚å³#div_2ä¸­çš„å­å…ƒç´ ä¹Ÿå±žäºŽ#div_1æ‰€åˆ›å»ºçš„BFCã€‚ä½†ç”±äºŽ#div_5åˆ›å»ºäº†æ–°çš„BFCï¼Œæ‰€ä»¥#div_6å’Œ#div_7å°±è¢«æŽ’é™¤åœ¨å¤–å±‚çš„BFCä¹‹å¤–ã€‚æˆ‘è®¤ä¸ºï¼Œè¿™ä»Žå¦ä¸€æ–¹è§’åº¦è¯´æ˜Žï¼Œä¸€ä¸ªå…ƒç´ ä¸èƒ½åŒæ—¶å­˜åœ¨äºŽä¸¤ä¸ªBFCä¸­ã€‚BFCçš„ä¸€ä¸ªæœ€é‡è¦çš„æ•ˆæžœæ˜¯ï¼Œè®©å¤„äºŽBFCå†…éƒ¨çš„å…ƒç´ ä¸Žå¤–éƒ¨çš„å…ƒç´ ç›¸äº’éš”ç¦»ï¼Œä½¿å†…å¤–å…ƒç´ çš„å®šä½ä¸ä¼šç›¸äº’å½±å“ã€‚è¿™æ˜¯åˆ©ç”¨BFCæ¸…é™¤æµ®åŠ¨æ‰€åˆ©ç”¨çš„ç‰¹æ€§ï¼Œå…³äºŽæ¸…é™¤æµ®åŠ¨å°†åœ¨åŽé¢è®²è¿°ã€‚å¦‚æžœä¸€ä¸ªå…ƒç´ èƒ½å¤ŸåŒæ—¶å¤„äºŽä¸¤ä¸ªBFCä¸­ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€è¿™ä¸ªå…ƒç´ èƒ½ä¸Žä¸¤ä¸ªBFCä¸­çš„å…ƒç´ å‘ç”Ÿä½œç”¨ï¼Œå°±è¿åäº†BFCçš„éš”ç¦»ä½œç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå‡è®¾å°±ä¸æˆç«‹äº†ã€‚ BFCçš„æ•ˆæžœå°±å¦‚åˆšæ‰æåˆ°çš„ï¼ŒBFCçš„æœ€æ˜¾è‘—çš„æ•ˆæžœå°±æ˜¯å»ºç«‹ä¸€ä¸ªéš”ç¦»çš„ç©ºé—´ï¼Œæ–­ç»ç©ºé—´å†…å¤–å…ƒç´ é—´ç›¸äº’çš„ä½œç”¨ã€‚ç„¶è€Œï¼ŒBFCè¿˜æœ‰æ›´å¤šçš„ç‰¹æ€§ï¼š Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with â€˜overflowâ€™ other than â€˜visibleâ€™ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the â€˜marginâ€™ properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.In a block formatting context, each boxâ€™s left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a boxâ€™s line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats). ç®€å•å½’çº³ä¸€ä¸‹ï¼š å†…éƒ¨çš„ç›’ä¼šåœ¨åž‚ç›´æ–¹å‘ä¸€ä¸ªæŽ¥ä¸€ä¸ªæŽ’åˆ—ï¼ˆå¯ä»¥çœ‹ä½œBFCä¸­æœ‰ä¸€ä¸ªçš„å¸¸è§„æµï¼‰ï¼› å¤„äºŽåŒä¸€ä¸ªBFCä¸­çš„å…ƒç´ ç›¸äº’å½±å“ï¼Œå¯èƒ½ä¼šå‘ç”Ÿmargin collapseï¼› æ¯ä¸ªå…ƒç´ çš„margin boxçš„å·¦è¾¹ï¼Œä¸Žå®¹å™¨å—border boxçš„å·¦è¾¹ç›¸æŽ¥è§¦(å¯¹äºŽä»Žå·¦å¾€å³çš„æ ¼å¼åŒ–ï¼Œå¦åˆ™ç›¸å)ã€‚å³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼› BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹äº¦ç„¶ï¼› è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œè€ƒè™‘BFCæ‰€åŒ…å«çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿žæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸Žè®¡ç®—ï¼› æµ®åŠ¨ç›’åŒºåŸŸä¸å åŠ åˆ°BFCä¸Šï¼› è¿™ä¹ˆå¤šæ€§è´¨æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œä½†å¯ä»¥ä½œå¦‚ä¸‹æŽ¨ç†æ¥å¸®åŠ©ç†è§£ï¼šhtmlçš„æ ¹å…ƒç´ å°±æ˜¯ï¼Œè€Œæ ¹å…ƒç´ ä¼šåˆ›å»ºä¸€ä¸ªBFCï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„BFCæ—¶å°±ç›¸å½“äºŽåœ¨è¿™ä¸ªå…ƒç´ å†…éƒ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œå­å…ƒç´ çš„å®šä½å°±å¦‚åŒåœ¨ä¸€ä¸ªæ–°é¡µé¢ä¸­é‚£æ ·ï¼Œè€Œè¿™ä¸ªæ–°æ—§htmlé¡µé¢ä¹‹é—´æ—¶ä¸ä¼šç›¸äº’å½±å“çš„ã€‚ä¸Šè¿°è¿™ä¸ªç†è§£å¹¶ä¸æ˜¯æœ€å‡†ç¡®çš„ç†è§£ï¼Œç”šè‡³æ˜¯å°†å› æžœå€’ç½®äº†ï¼ˆå› ä¸ºhtmlæ˜¯æ ¹å…ƒç´ ï¼Œå› æ­¤æ‰ä¼šæœ‰BFCçš„ç‰¹æ€§ï¼Œè€Œä¸æ˜¯BFCæœ‰htmlçš„ç‰¹æ€§ï¼‰ï¼Œä½†è¿™æ ·çš„æŽ¨ç†å¯ä»¥å¸®åŠ©ç†è§£BFCè¿™ä¸ªæ¦‚å¿µã€‚]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsåŸºç¡€]]></title>
    <url>%2F2017%2F07%2F22%2Fjs%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[åŠ¨æ€ç±»åž‹JavaScript æ˜¯ä¸€ç§å¼±ç±»åž‹æˆ–è€…è¯´åŠ¨æ€è¯­è¨€ã€‚è¿™æ„å‘³ç€ä½ ä¸ç”¨æå‰å£°æ˜Žå˜é‡çš„ç±»åž‹ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç±»åž‹ä¼šè¢«è‡ªåŠ¨ç¡®å®šã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¿å­˜ä¸åŒç±»åž‹çš„æ•°æ®ã€‚ æ•°æ®ç±»åž‹æœ€æ–°çš„ ECMAScript æ ‡å‡†å®šä¹‰äº† 7 ç§æ•°æ®ç±»åž‹: 6 ç§åŽŸå§‹ç±»åž‹: Booleanæœ‰ä¸¤ä¸ªå­—é¢å€¼ trueå’Œfalse Nullå€¼ null æ˜¯ä¸€ä¸ªå­—é¢é‡ï¼Œå®ƒä¸åƒundefined æ˜¯å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±žæ€§ã€‚null æ˜¯è¡¨ç¤ºç¼ºå°‘çš„æ ‡è¯†ï¼ŒæŒ‡ç¤ºå˜é‡æœªæŒ‡å‘ä»»ä½•å¯¹è±¡ã€‚æŠŠnull ä½œä¸ºå°šæœªåˆ›å»ºçš„å¯¹è±¡ï¼Œä¹Ÿè®¸æ›´å¥½ç†è§£ã€‚åœ¨ APIs ä¸­ï¼Œnull å¸¸åœ¨è¿”å›žç±»åž‹æ˜¯å¯¹è±¡ï¼Œä½†æ²¡å…³è”å€¼çš„åœ°æ–¹ä½¿ç”¨ã€‚nullè¡¨ç¤ºä¸€ä¸ªç©ºæŒ‡é’ˆå¯¹è±¡ã€‚ Undefined ä¸€ä¸ªæ²¡æœ‰è¢«èµ‹å€¼çš„å˜é‡çš„ç±»åž‹æ˜¯undefinedï¼Œå¦‚æžœæ–¹æ³• Number String Symbol (ECMAScript 6 æ–°å®šä¹‰) å’Œ Object ä½¿ç”¨ typeof æ“ä½œç¬¦åˆ¤æ–­å¯¹è±¡ç±»åž‹ # å‚è€ƒé“¾æŽ¥1.MDN Array]]></content>
      <tags>
        <tag>jsç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[cssç¬”è®°]]></title>
    <url>%2F2016%2F10%2F12%2Fcss%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[å¸¸è§çŸ¥è¯†å½’çº³1. ç›’å­æ¨¡åž‹2. css é€‰æ‹©å™¨3. css ä¸‰å¤§ç‰¹æ€§4. css3 å¸¸ç”¨æ ·å¼ 1 ç›’å­æ¨¡åž‹w3cï¼š content, padding, border, margin ie: content, margin, å…¶ä¸­ content åŒ…å«äº† padding å’Œ border 2 css é€‰æ‹©å™¨idé€‰æ‹©å™¨(#myid)ã€ç±»é€‰æ‹©å™¨(.myclassname)ã€æ ‡ç­¾é€‰æ‹©å™¨(div, h1, p)ã€ç›¸é‚»é€‰æ‹©å™¨(h1 + p)ã€å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰ã€åŽä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰ã€é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ*ï¼‰ã€å±žæ€§é€‰æ‹©å™¨ï¼ˆa[rel=â€externalâ€]ï¼‰ã€ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa:hover, li:nth-childï¼‰ 3 css ä¸‰å¤§ç‰¹æ€§ç»§æ‰¿ã€å±‚å æ€§ã€æƒé‡ 3.1 ç»§æ‰¿ä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Ÿå“ªäº›æ ·å¼å¯ä»¥ç»§æ‰¿ï¼Ÿå“ªäº›æ ·å¼ä¸å¯ä»¥ç»§æ‰¿ï¼Ÿ ç»§æ‰¿ï¼šçˆ¶èŠ‚ç‚¹å…·æœ‰æŸäº›å±žæ€§æ ·å¼ï¼Œå­èŠ‚ç‚¹æ²¡æœ‰è®¾ç½®è¿™ä¸ªæ ·å¼ï¼Œå´èƒ½å¤Ÿè¡¨çŽ°å‡ºè·Ÿçˆ¶èŠ‚ç‚¹ç›¸åŒçš„è¿™ä¸ªæ ·å¼ å¯ä»¥ç»§æ‰¿çš„æ ·å¼ï¼š font-size font-family (font ç³»åˆ—) color text-align text-decoration (text ç³»åˆ—) line-height ä¸å¯ç»§æ‰¿çš„æ ·å¼ï¼š width padding border margin height 3.2 æƒé‡æŒ‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æžœæœ‰å¤šä¸ªç›¸åŒçš„æ ·å¼è®¾å®šï¼Œå¦‚æžœç¡®å®šé‡‡ç”¨å“ªä¸€ä¸ª? ä¼˜å…ˆçº§ï¼ˆå°±è¿‘åŽŸåˆ™ï¼‰ï¼š!important &gt; å†…è” &gt; [ id &gt; class &gt; tag ] !important æ¯”å†…è”ä¼˜å…ˆçº§é«˜ 3.3 å±‚å æ€§æŒ‡åŒä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥è®¾ç½®å¤šå±‚æ ·å¼ï¼Œæµè§ˆå™¨æ ¹æ®ç‰¹å®šçš„å±‚å ç®—æ³•ï¼Œè®¡ç®—å‡ºcssæ ·å¼å¯¹åº”çš„æƒé‡å€¼ï¼ŒèŽ·èƒœçš„åˆ™åº”ç”¨åˆ°èŠ‚ç‚¹ä¸Šã€‚ 4 css3 å¸¸ç”¨æ ·å¼åœ¨ç¼–å†™CSS3æ ·å¼æ—¶ï¼Œä¸åŒçš„æµè§ˆå™¨å¯èƒ½éœ€è¦ä¸åŒçš„å‰ç¼€ï¼Œè¿™è¡¨ç¤ºCSSå±žæ€§æˆ–è§„åˆ™å°šæœªæˆä¸ºW3Cæ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯æµè§ˆå™¨çš„ç§æœ‰å±žæ€§ï¼Œè™½ç„¶ç›®å‰è¾ƒæ–°çš„æµè§ˆå™¨å¯èƒ½ä¸éœ€è¦å‰ç¼€äº†äº†ï¼Œä½†æ˜¯ä¸ºäº†æ›´å¥½çš„å‘å‰å…¼å®¹å‰ç¼€æš‚æ—¶è¿˜æ˜¯ä¸èƒ½å°‘ã€‚ æµè§ˆå™¨ å‰ç¼€ chromeå’Œsafari -webkit firfox -moz IE -ms opera -o 4.1 border-radio å…«ä¸ªå‚æ•°4.2 box-shadow æ°´å¹³ åž‚ç›´ æ¨¡ç³Šåº¦ å¤–å»¶ é¢œè‰² inset4.3 text-shadow æ°´å¹³ åž‚ç›´ æ¨¡ç³Šåº¦ é¢œè‰²4.4 transparenttransparentæ˜¯å…¨é€æ˜Žé»‘è‰²(black)çš„é€Ÿè®°æ³•ï¼Œå³ä¸€ä¸ªç±»ä¼¼rgba(0,0,0,0)è¿™æ ·çš„å€¼ã€‚åœ¨CSS1ä¸­ï¼Œtransparentè¢«ç”¨æ¥ä½œä¸ºbackground-colorçš„ä¸€ä¸ªå‚æ•°å€¼ï¼Œç”¨äºŽè¡¨ç¤ºèƒŒæ™¯é€æ˜Žã€‚åœ¨CSS2ä¸­ï¼Œborder-colorä¹Ÿå¼€å§‹æŽ¥å—transparentä½œä¸ºå‚æ•°å€¼ã€‚åœ¨CSS3ä¸­ï¼Œtransparentè¢«å»¶ä¼¸åˆ°ä»»ä½•ä¸€ä¸ªæœ‰colorå€¼çš„å±žæ€§ä¸Šã€‚ 4.5 è®¾ç½®æœåŠ¡å™¨ç«¯å­—ä½“ @font-face12345@font-face&#123; font-family:name; src:url("fonts/Fontin_Sans_B_45b.otf") format("opentype"); font-weight:normal;&#125; //nameç”¨æ¥å£°æ˜Žä½¿ç”¨æœåŠ¡ç«¯çš„å­—ä½“ã€‚//formatç”¨æ¥å£°æ˜Žå­—ä½“æ–‡ä»¶çš„æ ¼å¼ï¼Œå¯ä»¥çœç•¥æ–‡ä»¶æ ¼å¼çš„å£°æ˜Žè€Œå•ç‹¬ä½¿ç”¨srcå±žæ€§å€¼ã€‚å­—ä½“æ–‡ä»¶çš„æ ¼å¼æœ‰å“ªäº›ï¼ˆOpenTypeä¸ŽTrueType,å‰è€…çš„å±žæ€§å€¼ä¸ºopentypeï¼ŒåŽè€…çš„å±žæ€§å€¼ä¸ºtruetypeï¼›å‰è€…çš„æ–‡ä»¶æ‰©å±•åä¸º.otfï¼ŒåŽè€…çš„ä¸º.ttfï¼‰æ³¨ï¼šåœ¨IEä¸­ä½¿ç”¨æ—¶ï¼Œåªèƒ½ä½¿ç”¨å¾®è½¯è‡ªå¸¦çš„Embedded OpenTypeå­—ä½“æ–‡ä»¶ï¼Œæ‰©å±•åä¸º.eotï¼ŒåŒæ—¶ä¸éœ€è¦ä½¿ç”¨formatå±žæ€§å€¼ï¼Œç”¨æ³•å¦‚ä¸‹1234@font-face&#123; font-family:BorderWeb; src:url(BORDERW0.eot);&#125; æœ€åŽé€šè¿‡ {font-family:name}æ¥ä½¿ç”¨ã€‚ 4.6 backgroundbackground-clipï¼šborder-box | padding-box | content-box | textpadding-boxï¼šä»ŽpaddingåŒºåŸŸï¼ˆä¸å«paddingï¼‰å¼€å§‹å‘å¤–è£å‰ªèƒŒæ™¯ã€‚border-boxï¼šä»ŽborderåŒºåŸŸï¼ˆä¸å«borderï¼‰å¼€å§‹å‘å¤–è£å‰ªèƒŒæ™¯ã€‚content-boxï¼šä»ŽcontentåŒºåŸŸå¼€å§‹å‘å¤–è£å‰ªèƒŒæ™¯ã€‚background-originï¼špadding-box|border-box|content-boxè¯¥å±žæ€§æŒ‡å®šäº†èƒŒæ™¯ä»Žå“ªä¸ªåŒºåŸŸ(è¾¹æ¡†ã€è¡¥ç™½æˆ–å†…å®¹)å¼€å§‹ç»˜åˆ¶,ä½†ä¹Ÿä»…ä»…èƒ½æŽ§åˆ¶èƒŒæ™¯å¼€å§‹ç»˜åˆ¶çš„ä½ç½®ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªå±žæ€§åœ¨è¾¹æ¡†ä¸Šç»˜åˆ¶èƒŒæ™¯ï¼Œä½†è¾¹æ¡†ä¸Šçš„èƒŒæ™¯æ˜¾ä¸æ˜¾ç¤ºå‡ºæ¥é‚£å°±è¦ç”±background-clipæ¥å†³å®šäº†background-size:lengthï¼šç”¨é•¿åº¦å€¼æŒ‡å®šèƒŒæ™¯å›¾åƒå¤§å°ã€‚ä¸å…è®¸è´Ÿå€¼ã€‚percentageï¼šç”¨ç™¾åˆ†æ¯”æŒ‡å®šèƒŒæ™¯å›¾åƒå¤§å°ã€‚ä¸å…è®¸è´Ÿå€¼ã€‚autoï¼šèƒŒæ™¯å›¾åƒçš„çœŸå®žå¤§å°ã€‚coverï¼šå°†èƒŒæ™¯å›¾åƒç­‰æ¯”ç¼©æ”¾åˆ°å®Œå…¨è¦†ç›–å®¹å™¨ï¼ŒèƒŒæ™¯å›¾åƒæœ‰å¯èƒ½è¶…å‡ºå®¹å™¨ã€‚containï¼šå°†èƒŒæ™¯å›¾åƒç­‰æ¯”ç¼©æ”¾åˆ°å®½åº¦æˆ–é«˜åº¦ä¸Žå®¹å™¨çš„å®½åº¦æˆ–é«˜åº¦ç›¸ç­‰ï¼ŒèƒŒæ™¯å›¾åƒå§‹ç»ˆè¢«åŒ…å«åœ¨å®¹å™¨å†…ã€‚ 4.7 background-image æ·»åŠ å¤šå¼ å›¾ç‰‡1234567div&#123; background-image:url(flower-red.png), url(flower-green.png),url(sky.jpg); background-repeat: no-repeat, repeat-x, no-repeat; background-position: 3% 98%,85%, center center, top; width: 300px; padding: 90px 0px; &#125; æ³¨ï¼šç¬¬ä¸€ä¸ªå®šä¹‰çš„èƒŒæ™¯å›¾ç‰‡åœ¨æœ€ä¸Šé¢çš„ï¼Œæœ€åŽå®šä¹‰çš„æ˜¯åœ¨æœ€ä¸‹é¢çš„ã€‚ä½¿ç”¨background-repeatå’Œbackground-positionå¯ä»¥å•ç‹¬æŒ‡å®šèƒŒæ™¯å›¾åƒä¸­æŸä¸ªæ–‡ä»¶çš„å¹³é“ºæ–¹å¼ä¸Žæ”¾ç½®çš„ä½ç½®]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
</search>
